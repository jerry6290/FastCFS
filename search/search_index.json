{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"FastCFS -- a high performance general distributed file system for databases, K8s and VM etc. \u00b6 English | Chinese 1. About \u00b6 FastCFS is a general distributed file system with strong consistency, high performance, high availability and supporting 10 billion massive files. FastCFS can be used as the back-end storage of databases (MySQL, PostgresSQL, Oracle etc.), K8s and NAS. 2. Current Version \u00b6 V3.1.0 3. Supported Platforms \u00b6 Linux: Kernel version >= 3.10 (Full support) MacOS or FreeBSD (Only server side) 4. Dependencies \u00b6 libfuse (version 3.9.4 or newer) Python (version 3.5 or newer) Ninja (version 1.7 or newer) gcc (version 4.7.0 or newer) libfastcommon (tag: V1.0.55) libserverframe (tag: V1.1.12) libdiskallocator (tag: V1.0.1) fastDIR (tag: V3.1.0) faststore (tag: V3.1.0) FastCFS (tag: V3.1.0) 5. Installation \u00b6 5.1 DIY installation \u00b6 you can use Cluster Operation Tool to deploy FastCFS step by step please see INSTALL recommend to execute libfuse_setup.sh for compiling and installing libfuse 5.2 easy installation \u00b6 libfastcommon, libserverframe, fastDIR, faststore and FastCFS can be compiled, installed and auto configurated by fastcfs.sh fastcfs.sh can automatically pull or update above six projects codes from GitHub, compile and install according to dependency orders, and automatically generate cluster related configuration files according to the config templates. git clone https://github.com/happyfish100/FastCFS.git; cd FastCFS/ fastcfs.sh usage: * install: pull/update codes from gitee, then make and install * config: copy config files and configure them with local ip * start | stop | restart: for service processes control one click to build (deploy and run) single node demo environment (MUST run by root): ./helloWorld.sh or execute following commands (MUST run by root): ./fastcfs.sh install ./fastcfs.sh config --force ./fastcfs.sh restart now you can see the mounted path of FastCFS by the command: df -h /opt/fastcfs/fuse | grep fuse 6. Benchmark \u00b6 FastCFS has huge better performance than Ceph: the IOPS ratio of sequential write is 6.x, sequential read is 2.x, random write is about 2.0. FastCFS vs. Ceph benchmark 7. K8s CSI Driver \u00b6 fastcfs-csi 8. Chinese Relative articles \u00b6 CSDN blog 9. TODO List \u00b6 [fstore] provide cluster tools for automatic expansion [fstore] hierarchical storage & slice merging: supporting two-level storage, such as SSD + HDD [fdir & fstore] binlog deduplication (fdir binlog, fstore replica & slice binlog) [fstore] after the machine recovery, the data masters should be rebalanced 10. Contact us \u00b6 email: 384681(at)qq(dot)com WeChat subscription: search \"fastdfs\" for the related articles (Chinese Only)","title":"FastCFS Introduction"},{"location":"#fastcfs-a-high-performance-general-distributed-file-system-for-databases-k8s-and-vm-etc","text":"English | Chinese","title":"FastCFS -- a high performance general distributed file system for databases, K8s and VM etc."},{"location":"#1-about","text":"FastCFS is a general distributed file system with strong consistency, high performance, high availability and supporting 10 billion massive files. FastCFS can be used as the back-end storage of databases (MySQL, PostgresSQL, Oracle etc.), K8s and NAS.","title":"1. About"},{"location":"#2-current-version","text":"V3.1.0","title":"2. Current Version"},{"location":"#3-supported-platforms","text":"Linux: Kernel version >= 3.10 (Full support) MacOS or FreeBSD (Only server side)","title":"3. Supported Platforms"},{"location":"#4-dependencies","text":"libfuse (version 3.9.4 or newer) Python (version 3.5 or newer) Ninja (version 1.7 or newer) gcc (version 4.7.0 or newer) libfastcommon (tag: V1.0.55) libserverframe (tag: V1.1.12) libdiskallocator (tag: V1.0.1) fastDIR (tag: V3.1.0) faststore (tag: V3.1.0) FastCFS (tag: V3.1.0)","title":"4. Dependencies"},{"location":"#5-installation","text":"","title":"5. Installation"},{"location":"#51-diy-installation","text":"you can use Cluster Operation Tool to deploy FastCFS step by step please see INSTALL recommend to execute libfuse_setup.sh for compiling and installing libfuse","title":"5.1 DIY installation"},{"location":"#52-easy-installation","text":"libfastcommon, libserverframe, fastDIR, faststore and FastCFS can be compiled, installed and auto configurated by fastcfs.sh fastcfs.sh can automatically pull or update above six projects codes from GitHub, compile and install according to dependency orders, and automatically generate cluster related configuration files according to the config templates. git clone https://github.com/happyfish100/FastCFS.git; cd FastCFS/ fastcfs.sh usage: * install: pull/update codes from gitee, then make and install * config: copy config files and configure them with local ip * start | stop | restart: for service processes control one click to build (deploy and run) single node demo environment (MUST run by root): ./helloWorld.sh or execute following commands (MUST run by root): ./fastcfs.sh install ./fastcfs.sh config --force ./fastcfs.sh restart now you can see the mounted path of FastCFS by the command: df -h /opt/fastcfs/fuse | grep fuse","title":"5.2 easy installation"},{"location":"#6-benchmark","text":"FastCFS has huge better performance than Ceph: the IOPS ratio of sequential write is 6.x, sequential read is 2.x, random write is about 2.0. FastCFS vs. Ceph benchmark","title":"6. Benchmark"},{"location":"#7-k8s-csi-driver","text":"fastcfs-csi","title":"7. K8s CSI Driver"},{"location":"#8-chinese-relative-articles","text":"CSDN blog","title":"8. Chinese Relative articles"},{"location":"#9-todo-list","text":"[fstore] provide cluster tools for automatic expansion [fstore] hierarchical storage & slice merging: supporting two-level storage, such as SSD + HDD [fdir & fstore] binlog deduplication (fdir binlog, fstore replica & slice binlog) [fstore] after the machine recovery, the data masters should be rebalanced","title":"9. TODO List"},{"location":"#10-contact-us","text":"email: 384681(at)qq(dot)com WeChat subscription: search \"fastdfs\" for the related articles (Chinese Only)","title":"10. Contact us"},{"location":"APT-INSTALL-zh_CN/","text":"\u5b89\u88c5\u57fa\u4e8e Debian \u548c Ubuntu \u7684\u53d1\u884c\u7248 \u00b6 1. \u914d\u7f6e apt \u5b58\u50a8\u5e93 \u00b6 \u914d\u7f6e apt \u5b58\u50a8\u5e93\u548c\u7b7e\u540d\u5bc6\u94a5\uff0c\u4ee5\u4f7f\u7cfb\u7edf\u7684\u5305\u7ba1\u7406\u5668\u542f\u7528\u81ea\u52a8\u66f4\u65b0\u3002 curl http://www.fastken.com/aptrepo/packages.fastos.pub | sudo apt-key add sudo sh -c 'echo \"deb http://www.fastken.com/aptrepo/fastos/ fastos main\" >> /etc/apt/sources.list' \u7136\u540e\u66f4\u65b0\u5305\u7f13\u5b58 sudo apt update 2. fastDIR server\u5b89\u88c5 \u00b6 \u5728\u9700\u8981\u8fd0\u884c fastDIR server\u7684\u670d\u52a1\u5668\u4e0a\u6267\u884c\uff1a sudo apt install fastdir-server -y 3. faststore server\u5b89\u88c5 \u00b6 \u5728\u9700\u8981\u8fd0\u884c faststore server\u7684\u670d\u52a1\u5668\u4e0a\u6267\u884c\uff1a sudo apt install faststore-server -y 4. FastCFS\u5ba2\u6237\u7aef\u5b89\u88c5 \u00b6 \u5728\u9700\u8981\u4f7f\u7528FastCFS\u5b58\u50a8\u670d\u52a1\u7684\u673a\u5668\uff08\u5373FastCFS\u5ba2\u6237\u7aef\uff09\u4e0a\u6267\u884c\uff1a # \u6ce8\uff1afastcfs-fused\u4f9d\u8d56fuse3 sudo apt install fastcfs-fused -y 5. Auth server\u5b89\u88c5\uff08\u53ef\u9009\uff09 \u00b6 \u5982\u679c\u9700\u8981\u5b58\u50a8\u6c60\u6216\u8bbf\u95ee\u63a7\u5236\uff0c\u5219\u9700\u8981\u5b89\u88c5\u672c\u6a21\u5757\u3002 \u5728\u9700\u8981\u8fd0\u884c Auth server\u7684\u670d\u52a1\u5668\u4e0a\u6267\u884c\uff1a sudo apt install fastcfs-auth-server -y 6. \u96c6\u7fa4\u914d\u7f6e\uff08\u5fc5\u987b\uff09 \u00b6 \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u9700\u8981\u4fee\u6539\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u670d\u52a1\u624d\u53ef\u4ee5\u6b63\u5e38\u542f\u52a8\u3002\u8bf7\u53c2\u9605 \u914d\u7f6e\u6307\u5357 7. \u542f\u52a8 \u00b6 FastCFS\u540e\u53f0\u7a0b\u5e8f\u53ef\u901a\u8fc7systemd\u7ba1\u7406\u3002systemd\u670d\u52a1\u540d\u79f0\u5982\u4e0b\uff1a fastdir\uff1a \u76ee\u5f55\u670d\u52a1\uff0c\u5bf9\u5e94\u7a0b\u5e8f\u4e3a fdir_serverd faststore\uff1a\u5b58\u50a8\u670d\u52a1\uff0c\u5bf9\u5e94\u7a0b\u5e8f\u4e3a fs_serverd fastcfs\uff1a FUSE\u540e\u53f0\u670d\u52a1\uff0c\u5bf9\u5e94\u7a0b\u5e8f\u4e3a fcfs_fused fastauth\uff1a \u8ba4\u8bc1\u670d\u52a1\uff0c\u5bf9\u5e94\u7a0b\u5e8f\u4e3a fcfs_authd \u53ef\u4ee5\u4f7f\u7528\u6807\u51c6\u7684systemd\u547d\u4ee4\u5bf9\u4e0a\u8ff04\u4e2a\u670d\u52a1\u8fdb\u884c\u7ba1\u7406\uff0c\u4f8b\u5982\uff1a sudo systemctl restart fastdir sudo systemctl restart faststore sudo systemctl restart fastcfs sudo systemctl restart fastauth","title":"APT INSTALL zh CN"},{"location":"APT-INSTALL-zh_CN/#debian-ubuntu","text":"","title":"\u5b89\u88c5\u57fa\u4e8e Debian \u548c Ubuntu \u7684\u53d1\u884c\u7248"},{"location":"APT-INSTALL-zh_CN/#1-apt","text":"\u914d\u7f6e apt \u5b58\u50a8\u5e93\u548c\u7b7e\u540d\u5bc6\u94a5\uff0c\u4ee5\u4f7f\u7cfb\u7edf\u7684\u5305\u7ba1\u7406\u5668\u542f\u7528\u81ea\u52a8\u66f4\u65b0\u3002 curl http://www.fastken.com/aptrepo/packages.fastos.pub | sudo apt-key add sudo sh -c 'echo \"deb http://www.fastken.com/aptrepo/fastos/ fastos main\" >> /etc/apt/sources.list' \u7136\u540e\u66f4\u65b0\u5305\u7f13\u5b58 sudo apt update","title":"1. \u914d\u7f6e apt \u5b58\u50a8\u5e93"},{"location":"APT-INSTALL-zh_CN/#2-fastdir-server","text":"\u5728\u9700\u8981\u8fd0\u884c fastDIR server\u7684\u670d\u52a1\u5668\u4e0a\u6267\u884c\uff1a sudo apt install fastdir-server -y","title":"2. fastDIR server\u5b89\u88c5"},{"location":"APT-INSTALL-zh_CN/#3-faststore-server","text":"\u5728\u9700\u8981\u8fd0\u884c faststore server\u7684\u670d\u52a1\u5668\u4e0a\u6267\u884c\uff1a sudo apt install faststore-server -y","title":"3. faststore server\u5b89\u88c5"},{"location":"APT-INSTALL-zh_CN/#4-fastcfs","text":"\u5728\u9700\u8981\u4f7f\u7528FastCFS\u5b58\u50a8\u670d\u52a1\u7684\u673a\u5668\uff08\u5373FastCFS\u5ba2\u6237\u7aef\uff09\u4e0a\u6267\u884c\uff1a # \u6ce8\uff1afastcfs-fused\u4f9d\u8d56fuse3 sudo apt install fastcfs-fused -y","title":"4. FastCFS\u5ba2\u6237\u7aef\u5b89\u88c5"},{"location":"APT-INSTALL-zh_CN/#5-auth-server","text":"\u5982\u679c\u9700\u8981\u5b58\u50a8\u6c60\u6216\u8bbf\u95ee\u63a7\u5236\uff0c\u5219\u9700\u8981\u5b89\u88c5\u672c\u6a21\u5757\u3002 \u5728\u9700\u8981\u8fd0\u884c Auth server\u7684\u670d\u52a1\u5668\u4e0a\u6267\u884c\uff1a sudo apt install fastcfs-auth-server -y","title":"5. Auth server\u5b89\u88c5\uff08\u53ef\u9009\uff09"},{"location":"APT-INSTALL-zh_CN/#6","text":"\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u9700\u8981\u4fee\u6539\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u670d\u52a1\u624d\u53ef\u4ee5\u6b63\u5e38\u542f\u52a8\u3002\u8bf7\u53c2\u9605 \u914d\u7f6e\u6307\u5357","title":"6. \u96c6\u7fa4\u914d\u7f6e\uff08\u5fc5\u987b\uff09"},{"location":"APT-INSTALL-zh_CN/#7","text":"FastCFS\u540e\u53f0\u7a0b\u5e8f\u53ef\u901a\u8fc7systemd\u7ba1\u7406\u3002systemd\u670d\u52a1\u540d\u79f0\u5982\u4e0b\uff1a fastdir\uff1a \u76ee\u5f55\u670d\u52a1\uff0c\u5bf9\u5e94\u7a0b\u5e8f\u4e3a fdir_serverd faststore\uff1a\u5b58\u50a8\u670d\u52a1\uff0c\u5bf9\u5e94\u7a0b\u5e8f\u4e3a fs_serverd fastcfs\uff1a FUSE\u540e\u53f0\u670d\u52a1\uff0c\u5bf9\u5e94\u7a0b\u5e8f\u4e3a fcfs_fused fastauth\uff1a \u8ba4\u8bc1\u670d\u52a1\uff0c\u5bf9\u5e94\u7a0b\u5e8f\u4e3a fcfs_authd \u53ef\u4ee5\u4f7f\u7528\u6807\u51c6\u7684systemd\u547d\u4ee4\u5bf9\u4e0a\u8ff04\u4e2a\u670d\u52a1\u8fdb\u884c\u7ba1\u7406\uff0c\u4f8b\u5982\uff1a sudo systemctl restart fastdir sudo systemctl restart faststore sudo systemctl restart fastcfs sudo systemctl restart fastauth","title":"7. \u542f\u52a8"},{"location":"AUTH-zh_CN/","text":"Auth (\u8ba4\u8bc1\u6a21\u5757)\u914d\u7f6e\u53ca\u8fd0\u884c \u00b6 \u5982\u679c\u4f60\u4e0d\u9700\u8981\u4f7f\u7528\u5b58\u50a8\u6c60\u6216\u8bbf\u95ee\u6743\u9650\u63a7\u5236\uff0c\u53ef\u4ee5\u8df3\u8fc7\u672c\u6587\u6863\u3002 \u672c\u6587\u6863\u4ee5FastCFS RPM\u5305\u8bbe\u5b9a\u7684\u8def\u5f84\uff08\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\u548c\u7a0b\u5e8f\u5de5\u4f5c\u76ee\u5f55\u7b49\uff09\u8fdb\u884c\u8bf4\u660e\uff0c\u5982\u679c\u4f60\u91c7\u7528\u81ea\u52a9\u7f16\u8bd1\u5b89\u88c5\u65b9\u5f0f\u7684\u8bdd\uff0c\u8bf7\u81ea\u884c\u5bf9\u5e94\u3002 1. Auth\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\u7ed3\u6784 \u00b6 /etc/fastcfs/ | |__ auth: \u8ba4\u8bc1\u4e2d\u5fc3 |__ keys: \u5b58\u653e\u7528\u6237\u5bc6\u94a5\u6587\u4ef6\uff0c\u6bcf\u4e2a\u7528\u6237\u5bf9\u5e94\u4e00\u4e2a\u5bc6\u94a5\u6587\u4ef6\uff0c\u4f8b\u5982 admin.key | |__ session_validate.key: \u7528\u4e8eFastDIR\u548cFastStore\u8bf7\u6c42auth\u670d\u52a1\u9a8c\u8bc1session\u548c\u6743\u9650 |__ cluster.conf: \u670d\u52a1\u5668\u5217\u8868\uff0c\u914d\u7f6e\u670d\u52a1\u5668ID\u3001IP\u548c\u7aef\u53e3 |__ server.conf: fcfs_authd\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6 |__ client.conf: \u5ba2\u6237\u7aef\u914d\u7f6e\u6587\u4ef6 |__ auth.conf: \u8ba4\u8bc1\u76f8\u5173\u7684\u516c\u5171\u914d\u7f6e\u6587\u4ef6\uff0c\u5728FastDIR\u548cFastStore\u7684cluster.conf\u4e2d\u5f15\u7528 |__ session.conf: session\u76f8\u5173\u914d\u7f6e\u6587\u4ef6\uff0c\u5728Auth\u3001FastDIR\u548cFastStore\u7684server.conf\u4e2d\u5f15\u7528 2. authd\u7a0b\u5e8f\u5de5\u4f5c\u76ee\u5f55 \u00b6 /opt/fastcfs/ | |__ auth |__ authd.pid: \u670d\u52a1\u8fdb\u7a0bfcfs_authd\u7684pid\u6587\u4ef6 |__ logs: \u65e5\u5fd7\u6587\u4ef6\u76ee\u5f55 |__ fcfs_authd.log: \u9519\u8bef\u65e5\u5fd7 |__ slow.log: \u6162\u67e5\u8be2\u65e5\u5fd7 \u5f00\u542f\u8ba4\u8bc1\u529f\u80fd\u9700\u8981\u8bbe\u7f6e\u8ba4\u8bc1\u4e2d\u5fc3\u3001FastDIR server\u3001FastStore server\u548cFastCFS\u5ba2\u6237\u7aef\u3002 3. \u8ba4\u8bc1\u4e2d\u5fc3\uff08authd server\uff09\u914d\u7f6e \u00b6 \u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff1a/etc/fastcfs/auth Auth\u96c6\u7fa4\u5185\u5404\u4e2aserver\u914d\u7f6e\u7684cluster.conf\u5fc5\u987b\u5b8c\u5168\u4e00\u6837\u3002 \u5efa\u8bae\u914d\u7f6e\u4e00\u6b21\uff0c\u5206\u53d1\u5230\u5176\u4ed6\u670d\u52a1\u5668\u5373\u53ef\u3002 3.1 \u628aAuth\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u670d\u52a1\u5b9e\u4f8b\u914d\u7f6e\u5230cluster.conf\u4e2d \u00b6 \u6bcf\u4e2aAuth\u670d\u52a1\u5b9e\u4f8b\u5305\u542b2\u4e2a\u670d\u52a1\u7aef\u53e3\uff1acluster \u548c service \u4e00\u4e2aAuth\u670d\u52a1\u5b9e\u4f8b\u9700\u8981\u914d\u7f6e\u4e00\u4e2a[server-$id]\u7684section\uff0c\u5176\u4e2d$id\u4e3a\u5b9e\u4f8bID\u3002 3.2 \u914d\u7f6e server.conf \u00b6 [cluster] \u548c [service] \u914d\u7f6e\u7684\u7aef\u53e3\uff08port\uff09\u5fc5\u987b\u4e0ecluster.conf\u4e2d\u672c\u673a\u7684\u4e00\u81f4\uff0c\u5426\u5219\u542f\u52a8\u4f1a\u62a5\u9519 3.3 \u914d\u7f6e auth.conf \u00b6 \u5c06 auth_enabled \u8bbe\u7f6e\u4e3a true \u4ee5\u5f00\u542f\u8ba4\u8bc1\u529f\u80fd 3.4 \u590d\u5236FastDIR server\u4e0a\u7684\u5982\u4e0b\u914d\u7f6e\u6587\u4ef6\u5230 /etc/fastcfs/fdir/ \u00b6 /etc/fastcfs/fdir/client.conf /etc/fastcfs/fdir/cluster.conf 3.5 \u542f\u52a8authd \u00b6 authd\u547d\u4ee4\u76f4\u63a5\u91cd\u542f\uff1a /usr/bin/fcfs_authd /etc/fastcfs/auth/server.conf restart \u6216\u8005\u7cfb\u7edf\u670d\u52a1\u547d\u4ee4\u542f\u52a8\uff1a sudo systemctl restart fastauth \u67e5\u770b\u65e5\u5fd7\uff1a tail /opt/fastcfs/auth/logs/fcfs_authd.log \u7b2c\u4e00\u6b21\u8fd0\u884c\u5c06\u81ea\u52a8\u521b\u5efa admin \u7528\u6237\uff0c\u9ed8\u8ba4\u751f\u6210\u7684\u5bc6\u94a5\u6587\u4ef6\u540d\u4e3a /etc/fastcfs/auth/keys/admin.key 3.6 \u521b\u5efa\u5b58\u50a8\u6c60 \u00b6 \u521b\u5efa\u540d\u4e3a fs \u7684\u5b58\u50a8\u6c60\uff0c\u914d\u989d\u65e0\u9650\u5236\uff1a fcfs_pool create fs unlimited \u6ce8\uff1a\u5b58\u50a8\u6c60\u540d\u79f0\u5fc5\u987b\u548cFastCFS fuse\u5ba2\u6237\u7aef\u914d\u7f6e\u6587\u4ef6fuse.conf\u4e2d\u7684\u547d\u540d\u7a7a\u95f4\u4e00\u81f4\uff08\u7f3a\u7701\u914d\u7f6e\u4e3afs\uff0c\u53ef\u6309\u9700\u4fee\u6539\uff09 4. FastDIR server \u00b6 4.1 \u590d\u5236auth server\u4e0a\u7684\u5982\u4e0b\u914d\u7f6e\u6587\u4ef6\u5230 /etc/fastcfs/auth/ \u00b6 /etc/fastcfs/auth/auth.conf /etc/fastcfs/auth/session.conf /etc/fastcfs/auth/cluster.conf /etc/fastcfs/auth/client.conf 4.2 \u590d\u5236auth server\u4e0a\u7684\u5982\u4e0b\u5bc6\u94a5\u6587\u4ef6\u5230 /etc/fastcfs/auth/keys/ \u00b6 /etc/fastcfs/auth/keys/admin.key /etc/fastcfs/auth/keys/session_validate.key \u62f7\u8d1d\u5b8c\u6210\u540e\u91cd\u542fFastDIR\u670d\u52a1\uff08fdir_serverd\uff09 5. FastStore server \u00b6 \u53c2\u89c1 4. FastDIR server \u90e8\u5206 \u62f7\u8d1d\u5b8c\u6210\u540e\u91cd\u542fFastStore\u670d\u52a1\uff08fs_serverd\uff09 6. FastCFS\u5ba2\u6237\u7aef\uff08fused\uff09 \u00b6 \u53c2\u89c1 4. FastDIR server \u90e8\u5206 \u62f7\u8d1d\u5b8c\u6210\u540e\u91cd\u542ffuse\u670d\u52a1\uff08fcfs_fused\uff09 \u53cb\u60c5\u63d0\u793a \u00b6 4 ~ 6\u90e8\u5206\u7684\u914d\u7f6e\u53ca\u542f\u52a8\u53c2\u89c1 \u914d\u7f6e\u6307\u5357 7. \u547d\u4ee4\u884c\u5de5\u5177 \u00b6 fcfs_user\uff1a\u7528\u6237\u7ba1\u7406\uff0c\u4e3b\u8981\u5305\u62ec\u521b\u5efa\u7528\u6237\u3001\u5220\u9664\u7528\u6237\u3001\u8bbe\u7f6e\u7528\u6237\u6743\u9650\uff08\u6743\u9650\u5305\u62ec\u7528\u6237\u7ba1\u7406\u3001\u521b\u5efa\u5b58\u50a8\u6c60\u7b49\u7b49\uff09 fcfs_pool\uff1a\u50a8\u5b58\u6c60\u7ba1\u7406\uff0c\u4e3b\u8981\u5305\u62ec\u521b\u5efapool\u3001\u5220\u9664pool\u3001\u628apool\u8bfb\u5199\u6743\u9650\u6388\u6743\u7ed9\u5176\u4ed6\u7528\u6237 8. \u6ce8\u610f\u4e8b\u9879 \u00b6 Auth server\u4f9d\u8d56FastDIR server\uff0c\u9700\u8981\u5148\u542f\u52a8FastDIR server\uff0c\u7136\u540e\u542f\u52a8Auth server\u3002","title":"Auth (\u8ba4\u8bc1\u6a21\u5757)\u914d\u7f6e\u53ca\u8fd0\u884c"},{"location":"AUTH-zh_CN/#auth","text":"\u5982\u679c\u4f60\u4e0d\u9700\u8981\u4f7f\u7528\u5b58\u50a8\u6c60\u6216\u8bbf\u95ee\u6743\u9650\u63a7\u5236\uff0c\u53ef\u4ee5\u8df3\u8fc7\u672c\u6587\u6863\u3002 \u672c\u6587\u6863\u4ee5FastCFS RPM\u5305\u8bbe\u5b9a\u7684\u8def\u5f84\uff08\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\u548c\u7a0b\u5e8f\u5de5\u4f5c\u76ee\u5f55\u7b49\uff09\u8fdb\u884c\u8bf4\u660e\uff0c\u5982\u679c\u4f60\u91c7\u7528\u81ea\u52a9\u7f16\u8bd1\u5b89\u88c5\u65b9\u5f0f\u7684\u8bdd\uff0c\u8bf7\u81ea\u884c\u5bf9\u5e94\u3002","title":"Auth (\u8ba4\u8bc1\u6a21\u5757)\u914d\u7f6e\u53ca\u8fd0\u884c"},{"location":"AUTH-zh_CN/#1-auth","text":"/etc/fastcfs/ | |__ auth: \u8ba4\u8bc1\u4e2d\u5fc3 |__ keys: \u5b58\u653e\u7528\u6237\u5bc6\u94a5\u6587\u4ef6\uff0c\u6bcf\u4e2a\u7528\u6237\u5bf9\u5e94\u4e00\u4e2a\u5bc6\u94a5\u6587\u4ef6\uff0c\u4f8b\u5982 admin.key | |__ session_validate.key: \u7528\u4e8eFastDIR\u548cFastStore\u8bf7\u6c42auth\u670d\u52a1\u9a8c\u8bc1session\u548c\u6743\u9650 |__ cluster.conf: \u670d\u52a1\u5668\u5217\u8868\uff0c\u914d\u7f6e\u670d\u52a1\u5668ID\u3001IP\u548c\u7aef\u53e3 |__ server.conf: fcfs_authd\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6 |__ client.conf: \u5ba2\u6237\u7aef\u914d\u7f6e\u6587\u4ef6 |__ auth.conf: \u8ba4\u8bc1\u76f8\u5173\u7684\u516c\u5171\u914d\u7f6e\u6587\u4ef6\uff0c\u5728FastDIR\u548cFastStore\u7684cluster.conf\u4e2d\u5f15\u7528 |__ session.conf: session\u76f8\u5173\u914d\u7f6e\u6587\u4ef6\uff0c\u5728Auth\u3001FastDIR\u548cFastStore\u7684server.conf\u4e2d\u5f15\u7528","title":"1. Auth\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\u7ed3\u6784"},{"location":"AUTH-zh_CN/#2-authd","text":"/opt/fastcfs/ | |__ auth |__ authd.pid: \u670d\u52a1\u8fdb\u7a0bfcfs_authd\u7684pid\u6587\u4ef6 |__ logs: \u65e5\u5fd7\u6587\u4ef6\u76ee\u5f55 |__ fcfs_authd.log: \u9519\u8bef\u65e5\u5fd7 |__ slow.log: \u6162\u67e5\u8be2\u65e5\u5fd7 \u5f00\u542f\u8ba4\u8bc1\u529f\u80fd\u9700\u8981\u8bbe\u7f6e\u8ba4\u8bc1\u4e2d\u5fc3\u3001FastDIR server\u3001FastStore server\u548cFastCFS\u5ba2\u6237\u7aef\u3002","title":"2. authd\u7a0b\u5e8f\u5de5\u4f5c\u76ee\u5f55"},{"location":"AUTH-zh_CN/#3-authd-server","text":"\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff1a/etc/fastcfs/auth Auth\u96c6\u7fa4\u5185\u5404\u4e2aserver\u914d\u7f6e\u7684cluster.conf\u5fc5\u987b\u5b8c\u5168\u4e00\u6837\u3002 \u5efa\u8bae\u914d\u7f6e\u4e00\u6b21\uff0c\u5206\u53d1\u5230\u5176\u4ed6\u670d\u52a1\u5668\u5373\u53ef\u3002","title":"3. \u8ba4\u8bc1\u4e2d\u5fc3\uff08authd server\uff09\u914d\u7f6e"},{"location":"AUTH-zh_CN/#31-authclusterconf","text":"\u6bcf\u4e2aAuth\u670d\u52a1\u5b9e\u4f8b\u5305\u542b2\u4e2a\u670d\u52a1\u7aef\u53e3\uff1acluster \u548c service \u4e00\u4e2aAuth\u670d\u52a1\u5b9e\u4f8b\u9700\u8981\u914d\u7f6e\u4e00\u4e2a[server-$id]\u7684section\uff0c\u5176\u4e2d$id\u4e3a\u5b9e\u4f8bID\u3002","title":"3.1 \u628aAuth\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u670d\u52a1\u5b9e\u4f8b\u914d\u7f6e\u5230cluster.conf\u4e2d"},{"location":"AUTH-zh_CN/#32-serverconf","text":"[cluster] \u548c [service] \u914d\u7f6e\u7684\u7aef\u53e3\uff08port\uff09\u5fc5\u987b\u4e0ecluster.conf\u4e2d\u672c\u673a\u7684\u4e00\u81f4\uff0c\u5426\u5219\u542f\u52a8\u4f1a\u62a5\u9519","title":"3.2 \u914d\u7f6e server.conf"},{"location":"AUTH-zh_CN/#33-authconf","text":"\u5c06 auth_enabled \u8bbe\u7f6e\u4e3a true \u4ee5\u5f00\u542f\u8ba4\u8bc1\u529f\u80fd","title":"3.3 \u914d\u7f6e auth.conf"},{"location":"AUTH-zh_CN/#34-fastdir-server-etcfastcfsfdir","text":"/etc/fastcfs/fdir/client.conf /etc/fastcfs/fdir/cluster.conf","title":"3.4 \u590d\u5236FastDIR server\u4e0a\u7684\u5982\u4e0b\u914d\u7f6e\u6587\u4ef6\u5230 /etc/fastcfs/fdir/"},{"location":"AUTH-zh_CN/#35-authd","text":"authd\u547d\u4ee4\u76f4\u63a5\u91cd\u542f\uff1a /usr/bin/fcfs_authd /etc/fastcfs/auth/server.conf restart \u6216\u8005\u7cfb\u7edf\u670d\u52a1\u547d\u4ee4\u542f\u52a8\uff1a sudo systemctl restart fastauth \u67e5\u770b\u65e5\u5fd7\uff1a tail /opt/fastcfs/auth/logs/fcfs_authd.log \u7b2c\u4e00\u6b21\u8fd0\u884c\u5c06\u81ea\u52a8\u521b\u5efa admin \u7528\u6237\uff0c\u9ed8\u8ba4\u751f\u6210\u7684\u5bc6\u94a5\u6587\u4ef6\u540d\u4e3a /etc/fastcfs/auth/keys/admin.key","title":"3.5 \u542f\u52a8authd"},{"location":"AUTH-zh_CN/#36","text":"\u521b\u5efa\u540d\u4e3a fs \u7684\u5b58\u50a8\u6c60\uff0c\u914d\u989d\u65e0\u9650\u5236\uff1a fcfs_pool create fs unlimited \u6ce8\uff1a\u5b58\u50a8\u6c60\u540d\u79f0\u5fc5\u987b\u548cFastCFS fuse\u5ba2\u6237\u7aef\u914d\u7f6e\u6587\u4ef6fuse.conf\u4e2d\u7684\u547d\u540d\u7a7a\u95f4\u4e00\u81f4\uff08\u7f3a\u7701\u914d\u7f6e\u4e3afs\uff0c\u53ef\u6309\u9700\u4fee\u6539\uff09","title":"3.6 \u521b\u5efa\u5b58\u50a8\u6c60"},{"location":"AUTH-zh_CN/#4-fastdir-server","text":"","title":"4. FastDIR server"},{"location":"AUTH-zh_CN/#41-auth-server-etcfastcfsauth","text":"/etc/fastcfs/auth/auth.conf /etc/fastcfs/auth/session.conf /etc/fastcfs/auth/cluster.conf /etc/fastcfs/auth/client.conf","title":"4.1 \u590d\u5236auth server\u4e0a\u7684\u5982\u4e0b\u914d\u7f6e\u6587\u4ef6\u5230 /etc/fastcfs/auth/"},{"location":"AUTH-zh_CN/#42-auth-server-etcfastcfsauthkeys","text":"/etc/fastcfs/auth/keys/admin.key /etc/fastcfs/auth/keys/session_validate.key \u62f7\u8d1d\u5b8c\u6210\u540e\u91cd\u542fFastDIR\u670d\u52a1\uff08fdir_serverd\uff09","title":"4.2 \u590d\u5236auth server\u4e0a\u7684\u5982\u4e0b\u5bc6\u94a5\u6587\u4ef6\u5230 /etc/fastcfs/auth/keys/"},{"location":"AUTH-zh_CN/#5-faststore-server","text":"\u53c2\u89c1 4. FastDIR server \u90e8\u5206 \u62f7\u8d1d\u5b8c\u6210\u540e\u91cd\u542fFastStore\u670d\u52a1\uff08fs_serverd\uff09","title":"5. FastStore server"},{"location":"AUTH-zh_CN/#6-fastcfsfused","text":"\u53c2\u89c1 4. FastDIR server \u90e8\u5206 \u62f7\u8d1d\u5b8c\u6210\u540e\u91cd\u542ffuse\u670d\u52a1\uff08fcfs_fused\uff09","title":"6. FastCFS\u5ba2\u6237\u7aef\uff08fused\uff09"},{"location":"AUTH-zh_CN/#_1","text":"4 ~ 6\u90e8\u5206\u7684\u914d\u7f6e\u53ca\u542f\u52a8\u53c2\u89c1 \u914d\u7f6e\u6307\u5357","title":"\u53cb\u60c5\u63d0\u793a"},{"location":"AUTH-zh_CN/#7","text":"fcfs_user\uff1a\u7528\u6237\u7ba1\u7406\uff0c\u4e3b\u8981\u5305\u62ec\u521b\u5efa\u7528\u6237\u3001\u5220\u9664\u7528\u6237\u3001\u8bbe\u7f6e\u7528\u6237\u6743\u9650\uff08\u6743\u9650\u5305\u62ec\u7528\u6237\u7ba1\u7406\u3001\u521b\u5efa\u5b58\u50a8\u6c60\u7b49\u7b49\uff09 fcfs_pool\uff1a\u50a8\u5b58\u6c60\u7ba1\u7406\uff0c\u4e3b\u8981\u5305\u62ec\u521b\u5efapool\u3001\u5220\u9664pool\u3001\u628apool\u8bfb\u5199\u6743\u9650\u6388\u6743\u7ed9\u5176\u4ed6\u7528\u6237","title":"7. \u547d\u4ee4\u884c\u5de5\u5177"},{"location":"AUTH-zh_CN/#8","text":"Auth server\u4f9d\u8d56FastDIR server\uff0c\u9700\u8981\u5148\u542f\u52a8FastDIR server\uff0c\u7136\u540e\u542f\u52a8Auth server\u3002","title":"8. \u6ce8\u610f\u4e8b\u9879"},{"location":"CONFIGURE-zh_CN/","text":"\u914d\u7f6e\u53ca\u8fd0\u884c \u00b6 \u672c\u6587\u6863\u4ee5FastCFS RPM\u5305\u8bbe\u5b9a\u7684\u8def\u5f84\uff08\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\u548c\u7a0b\u5e8f\u5de5\u4f5c\u76ee\u5f55\u7b49\uff09\u8fdb\u884c\u8bf4\u660e\uff0c\u5982\u679c\u4f60\u91c7\u7528\u81ea\u52a9\u7f16\u8bd1\u5b89\u88c5\u65b9\u5f0f\u7684\u8bdd\uff0c\u8bf7\u81ea\u884c\u5bf9\u5e94\u3002 FastCFS\u96c6\u7fa4\u914d\u7f6e\u5305\u542b\u5982\u4e0b\u56db\u90e8\u5206\uff1a fastDIR server\uff08\u670d\u52a1\u5b9e\u4f8b\uff09\u914d\u7f6e faststore server\uff08\u670d\u52a1\u5b9e\u4f8b\uff09\u914d\u7f6e FastCFS\u5ba2\u6237\u7aef\u914d\u7f6e \u8ba4\u8bc1\u914d\u7f6e\uff08\u53ef\u9009\uff09 1. \u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\u7ed3\u6784 \u00b6 /etc/fastcfs/ | |__ fcfs: fused\u670d\u52a1 | |__ fuse.conf: fcfs_fused\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6 | |__ fdir: FastDIR\u76ee\u5f55\u670d\u52a1 | |__ cluster.conf: \u670d\u52a1\u5668\u5217\u8868\uff0c\u914d\u7f6e\u670d\u52a1\u5668ID\u3001IP\u548c\u7aef\u53e3 | |__ server.conf: fdir_serverd\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6 | |__ storage.conf: \u6301\u4e45\u5316\u5b58\u50a8\u914d\u7f6e\u6587\u4ef6 | |__ client.conf: \u5ba2\u6237\u7aef\u914d\u7f6e\u6587\u4ef6 | |__ fstore: faststore\u5b58\u50a8\u670d\u52a1 |__ cluster.conf: \u670d\u52a1\u5668\u5217\u8868(\u914d\u7f6e\u670d\u52a1\u5668ID\u3001IP\u548c\u7aef\u53e3)\uff0c\u5e76\u914d\u7f6e\u670d\u52a1\u5668\u5206\u7ec4\u53ca\u6570\u636e\u5206\u7ec4\u4e4b\u95f4\u7684\u5bf9\u5e94\u5173\u7cfb |__ storage.conf: \u5b58\u50a8\u8def\u5f84\u53ca\u7a7a\u95f4\u5206\u914d\u548c\u56de\u6536\u914d\u7f6e |__ server.conf: fs_serverd\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6 |__ client.conf: \u5ba2\u6237\u7aef\u914d\u7f6e\u6587\u4ef6 2. \u7a0b\u5e8f\u5de5\u4f5c\u76ee\u5f55 \u00b6 /opt/fastcfs/ | |__ fcfs | |__ fused.pid: \u670d\u52a1\u8fdb\u7a0bfcfs_fused\u7684pid\u6587\u4ef6 | |__ logs: \u65e5\u5fd7\u6587\u4ef6\u76ee\u5f55 | |__ fcfs_fused.log: \u9519\u8bef\u65e5\u5fd7 | |__ fdir | |__ serverd.pid: \u670d\u52a1\u8fdb\u7a0bfdir_serverd\u7684pid\u6587\u4ef6 | |__ data: \u7cfb\u7edf\u6570\u636e\u6587\u4ef6\u76ee\u5f55\uff0c\u5305\u542b\u96c6\u7fa4\u62d3\u6251\u7ed3\u6784\u548cbinlog | | |__binlog: \u5b58\u653ebinlog\u6587\u4ef6 | | | |__ logs: \u65e5\u5fd7\u6587\u4ef6\u76ee\u5f55 | |__ fdir_serverd.log: \u9519\u8bef\u65e5\u5fd7 | |__ slow.log: \u6162\u67e5\u8be2\u65e5\u5fd7 | |__ fstore |__ serverd.pid: \u670d\u52a1\u8fdb\u7a0bfs_serverd\u7684pid\u6587\u4ef6 |__ data: \u7cfb\u7edf\u6570\u636e\u6587\u4ef6\u76ee\u5f55\uff0c\u5305\u542b\u96c6\u7fa4\u62d3\u6251\u7ed3\u6784\u548cbinlog | |__replica: replica binlog\uff0c\u4e00\u4e2aDG\u5bf9\u5e94\u4e00\u4e2a\u5b50\u76ee\u5f55 | |__slice: slice binlog | |__ logs: \u65e5\u5fd7\u6587\u4ef6\u76ee\u5f55 |__ fs_serverd.log: \u9519\u8bef\u65e5\u5fd7 |__ slow.log: \u6162\u67e5\u8be2\u65e5\u5fd7 3. fastDIR server\uff08\u670d\u52a1\u5b9e\u4f8b\uff09\u914d\u7f6e \u00b6 \u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff1a /etc/fastcfs/fdir fastDIR\u96c6\u7fa4\u5185\u5404\u4e2aserver\u914d\u7f6e\u7684cluster.conf\u5fc5\u987b\u5b8c\u5168\u4e00\u6837\uff0c\u5efa\u8bae\u914d\u7f6e\u4e00\u6b21\uff0c\u5206\u53d1\u5230\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u5373\u53ef\u3002 3.1 \u628afastDIR\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u670d\u52a1\u5b9e\u4f8b\u914d\u7f6e\u5230cluster.conf\u4e2d \u00b6 \u6bcf\u4e2a fastDIR \u670d\u52a1\u5b9e\u4f8b\u5305\u542b2\u4e2a\u670d\u52a1\u7aef\u53e3\uff1a cluster \u548c service \uff1b cluster.conf \u4e2d\u914d\u7f6e\u96c6\u7fa4\u6240\u6709\u5b9e\u4f8b\uff0c\u4e00\u4e2a\u5b9e\u4f8b\u7531IP + \u7aef\u53e3\uff08\u5305\u62ec cluster\u548cservice 2\u4e2a\u7aef\u53e3 \uff09\u7ec4\u6210\uff1b \u4e00\u4e2afastDIR\u670d\u52a1\u5b9e\u4f8b\u9700\u8981\u914d\u7f6e\u4e00\u4e2a[server-$id]\u7684section\uff0c\u5176\u4e2d$id\u4e3a\u5b9e\u4f8bID\uff08\u4ece1\u5f00\u59cb\u7f16\u53f7\uff09\uff1b \u5982\u679c\u4e00\u53f0\u670d\u52a1\u5668\u4e0a\u542f\u52a8\u4e86\u591a\u4e2a\u5b9e\u4f8b\uff0c\u56e0\u7aef\u53e3\u4e0e\u5168\u5c40\u914d\u7f6e\u7684\u4e0d\u4e00\u81f4\uff0c\u6b64\u65f6\u5fc5\u987b\u6307\u5b9a\u7aef\u53e3\u3002 \u4e00\u4e2a\u670d\u52a1\u5b9e\u4f8b\u7684\u914d\u7f6e\u793a\u4f8b\u5982\u4e0b\uff1a [server-3] cluster-port = 11015 service-port = 11016 host = 172.16.168.128 3.2 \u914d\u7f6e server.conf \u00b6 \u5982\u679c\u9700\u8981\u4fee\u6539\u6570\u636e\u5b58\u653e\u8def\u5f84\uff0c\u4fee\u6539\u914d\u7f6e\u9879 data_path \u4e3a\u7edd\u5bf9\u8def\u5f84 \u672c\u673a\u7aef\u53e3\u5305\u542bcluster\u548cservice 2\u4e2a\u7aef\u53e3\uff0c\u5206\u914d\u5728[cluster] \u548c [service] \u4e2d\u914d\u7f6e \u672c\u673aIP + \u672c\u673a\u7aef\u53e3\u5fc5\u987b\u914d\u7f6e\u5728cluster.conf\u7684\u4e00\u4e2a\u5b9e\u4f8b\u4e2d\uff0c\u5426\u5219\u542f\u52a8\u65f6\u4f1a\u51fa\u73b0\u4e0b\u9762\u7c7b\u4f3c\u7684\u51fa\u9519\u4fe1\u606f ERROR - file: cluster_info.c, line: 119, cluster config file: /etc/fastcfs/fdir/cluster.conf, can't find myself by my local ip and listen port V3.0\u652f\u6301\u7684\u6301\u4e45\u5316\u7279\u6027\u9ed8\u8ba4\u662f\u5173\u95ed\u7684\uff0c\u5728 [storage-engine] \u4e2d\u8bbe\u7f6e\uff0c\u8be6\u60c5\u53c2\u89c1\u914d\u7f6e\u793a\u4f8b 3.3 \u914d\u7f6e storage.conf \u00b6 \u5f00\u542f\u6301\u4e45\u5316\u5b58\u50a8\u7279\u6027\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u9700\u8981\u914d\u7f6estorage.conf \u901a\u5e38\u91c7\u7528\u9ed8\u8ba4\u8bbe\u7f6e\u5373\u53ef fastDIR\u91cd\u542f\uff1a /usr/bin/fdir_serverd /etc/fastcfs/fdir/server.conf restart \u6216\u8005\uff1a sudo systemctl restart fastdir \u67e5\u770b\u65e5\u5fd7\uff1a tail /opt/fastcfs/fdir/logs/fdir_serverd.log 2. faststore server\uff08\u670d\u52a1\u5b9e\u4f8b\uff09\u914d\u7f6e \u00b6 \u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff1a /etc/fastcfs/fstore faststore\u96c6\u7fa4\u5404\u4e2a\u670d\u52a1\u5b9e\u4f8b\u914d\u7f6e\u7684cluster.conf\u5fc5\u987b\u5b8c\u5168\u4e00\u6837\uff0c\u5efa\u8bae\u628acluster.conf\u4e00\u6b21\u6027\u914d\u7f6e\u597d\uff0c\u7136\u540e\u5206\u53d1\u5230\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u3002 2.1 \u628a faststore \u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u670d\u52a1\u5b9e\u4f8b\u914d\u7f6e\u5230 cluster.conf \u4e2d \u00b6 \u6bcf\u4e2a faststore \u670d\u52a1\u5b9e\u4f8b\u5305\u542b3\u4e2a\u670d\u52a1\u7aef\u53e3\uff1acluster\u3001replica \u548c service\uff0c\u548c fastDIR \u7684 cluster.conf \u76f8\u6bd4\uff0c\u591a\u4e86\u4e00\u4e2areplica\u7aef\u53e3\uff0c\u4e8c\u8005\u914d\u7f6e\u65b9\u5f0f\u5b8c\u5168\u76f8\u540c\u3002 2.2 \u5728 cluster.conf \u4e2d\u914d\u7f6e\u670d\u52a1\u5668\u5206\u7ec4\u548c\u6570\u636e\u5206\u7ec4\u5bf9\u5e94\u5173\u7cfb \u00b6 \u5bf9\u4e8e\u751f\u4ea7\u73af\u5883\uff0c\u4e3a\u4e86\u4fbf\u4e8e\u4eca\u540e\u6269\u5bb9\uff0c\u5efa\u8bae\u6570\u636e\u5206\u7ec4\u6570\u76ee\u81f3\u5c11\u4e3a64\uff0c\u6700\u597d\u4e0d\u8981\u8d85\u8fc71024\uff08\u89c6\u4e1a\u52a1\u672a\u67655\u5e74\u53d1\u5c55\u89c4\u6a21\u800c\u5b9a\uff09\u3002 2.3 \u5728storage.conf \u4e2d\u914d\u7f6e\u5b58\u50a8\u8def\u5f84\u7b49\u53c2\u6570 \u00b6 \u652f\u6301\u914d\u7f6e\u591a\u4e2a\u5b58\u50a8\u8def\u5f84\u3002\u4e3a\u4e86\u5145\u5206\u53d1\u6325\u51fa\u786c\u76d8\u6027\u80fd\uff0c\u5efa\u8bae\u6302\u8f7d\u5355\u76d8\uff0c\u6bcf\u5757\u76d8\u4f5c\u4e3a\u4e00\u4e2a\u5b58\u50a8\u8def\u5f84\u3002 \u914d\u7f6e\u793a\u4f8b\uff1a store_path_count = 1 [store-path-1] path = /opt/faststore/data 2.4 \u914d\u7f6e server.conf \u00b6 \u5982\u679c\u9700\u8981\u4fee\u6539binlog\u5b58\u653e\u8def\u5f84\uff0c\u4fee\u6539\u914d\u7f6e\u9879 data_path \u4e3a\u7edd\u5bf9\u8def\u5f84 \u672c\u673a\u7aef\u53e3\u5305\u542bcluster\u3001replica\u548cservice 3\u4e2a\u7aef\u53e3\uff0c\u5206\u914d\u5728[cluster]\u3001[replica] \u548c [service] \u4e2d\u914d\u7f6e \u672c\u673aIP + \u672c\u673a\u7aef\u53e3\u5fc5\u987b\u914d\u7f6e\u5728cluster.conf\u7684\u4e00\u4e2a\u5b9e\u4f8b\u4e2d\uff0c\u5426\u5219\u542f\u52a8\u65f6\u4f1a\u51fa\u73b0\u7c7b\u4f3c\u4e0b\u9762\u7684\u51fa\u9519\u4fe1\u606f ERROR - file: server_group_info.c, line: 347, cluster config file: /etc/fastcfs/fstore/cluster.conf, can't find myself by my local ip and listen port faststore\u91cd\u542f\uff1a /usr/bin/fs_serverd /etc/fastcfs/fstore/server.conf restart \u6216\u8005\uff1a sudo systemctl restart faststore \u67e5\u770b\u65e5\u5fd7\uff1a tail /opt/fastcfs/fstore/logs/fs_serverd.log 3. FastCFS\u5ba2\u6237\u7aef\u914d\u7f6e \u00b6 fused \u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff1a /etc/fastcfs/fcfs 3.1 \u590d\u5236faststore server\u4e0a\u7684\u5982\u4e0b\u914d\u7f6e\u6587\u4ef6\u5230 /etc/fastcfs/fstore/ \u00b6 /etc/fastcfs/fstore/cluster.conf 3.2 \u590d\u5236fastDIR server\u4e0a\u7684\u5982\u4e0b\u914d\u7f6e\u6587\u4ef6\u5230 /etc/fastcfs/fdir/ \u00b6 /etc/fastcfs/fdir/cluster.conf 3.3 \u4fee\u6539fuse\u6302\u8f7d\u70b9\uff08\u53ef\u9009\uff09 \u00b6 \u5982\u6709\u5fc5\u8981\uff0c\u53ef\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 fuse.conf \u4e2d\u7684 mountpoint \u53c2\u6570\u6765\u6307\u5b9a\u6302\u8f7d\u70b9\uff1a mountpoint = /opt/fastcfs/fuse fused \u91cd\u542f\uff1a /usr/bin/fcfs_fused /etc/fastcfs/fcfs/fuse.conf restart \u6216\u8005\uff1a sudo systemctl restart fastcfs \u67e5\u770b\u65e5\u5fd7\uff1a tail /opt/fastcfs/fcfs/logs/fcfs_fused.log \u67e5\u770bfastDIR\u96c6\u7fa4\u72b6\u6001\uff1a fdir_cluster_stat \u67e5\u770b\u5355\u53f0fastDIR \u670d\u52a1\u72b6\u6001\uff1a fdir_service_stat $IP:$port \u53cb\u60c5\u63d0\u793a\uff1a\u53ef\u4ee5\u62f7\u8d1dfdir_cluster_stat \u8f93\u51fa\u7684IP\u548c\u670d\u52a1\u7aef\u53e3 \u67e5\u770bfaststore\u96c6\u7fa4\u72b6\u6001\uff1a fs_cluster_stat \u67e5\u770b\u975eACTIVE\u7684\u670d\u52a1\u5217\u8868\uff0c\u4f7f\u7528\uff1a fs_cluster_stat -N \u4f7f\u7528 -h \u67e5\u770b\u66f4\u591a\u9009\u9879 \u67e5\u770bFastCFS\u78c1\u76d8\u4f7f\u7528\u60c5\u51b5\uff1a df -h /opt/fastcfs/fuse | grep fuse \u81f3\u6b64\uff0cmountpoint\uff08\u5982\uff1a/opt/fastcfs/fuse\uff09\u53ef\u4ee5\u4f5c\u4e3a\u672c\u5730\u6587\u4ef6\u76ee\u5f55\u8bbf\u95ee\u4e86\u3002 4. \u8ba4\u8bc1\u914d\u7f6e\uff08\u53ef\u9009\uff09 \u00b6 \u5982\u679c\u9700\u8981\u5f00\u542f\u5b58\u50a8\u6c60\u6216\u8bbf\u95ee\u6743\u9650\u63a7\u5236\uff0c\u8bf7\u53c2\u9605 \u8ba4\u8bc1\u914d\u7f6e\u6587\u6863 \u795d\u987a\u5229\uff01 have a nice day!","title":"\u914d\u7f6e\u53ca\u8fd0\u884c"},{"location":"CONFIGURE-zh_CN/#_1","text":"\u672c\u6587\u6863\u4ee5FastCFS RPM\u5305\u8bbe\u5b9a\u7684\u8def\u5f84\uff08\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\u548c\u7a0b\u5e8f\u5de5\u4f5c\u76ee\u5f55\u7b49\uff09\u8fdb\u884c\u8bf4\u660e\uff0c\u5982\u679c\u4f60\u91c7\u7528\u81ea\u52a9\u7f16\u8bd1\u5b89\u88c5\u65b9\u5f0f\u7684\u8bdd\uff0c\u8bf7\u81ea\u884c\u5bf9\u5e94\u3002 FastCFS\u96c6\u7fa4\u914d\u7f6e\u5305\u542b\u5982\u4e0b\u56db\u90e8\u5206\uff1a fastDIR server\uff08\u670d\u52a1\u5b9e\u4f8b\uff09\u914d\u7f6e faststore server\uff08\u670d\u52a1\u5b9e\u4f8b\uff09\u914d\u7f6e FastCFS\u5ba2\u6237\u7aef\u914d\u7f6e \u8ba4\u8bc1\u914d\u7f6e\uff08\u53ef\u9009\uff09","title":"\u914d\u7f6e\u53ca\u8fd0\u884c"},{"location":"CONFIGURE-zh_CN/#1","text":"/etc/fastcfs/ | |__ fcfs: fused\u670d\u52a1 | |__ fuse.conf: fcfs_fused\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6 | |__ fdir: FastDIR\u76ee\u5f55\u670d\u52a1 | |__ cluster.conf: \u670d\u52a1\u5668\u5217\u8868\uff0c\u914d\u7f6e\u670d\u52a1\u5668ID\u3001IP\u548c\u7aef\u53e3 | |__ server.conf: fdir_serverd\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6 | |__ storage.conf: \u6301\u4e45\u5316\u5b58\u50a8\u914d\u7f6e\u6587\u4ef6 | |__ client.conf: \u5ba2\u6237\u7aef\u914d\u7f6e\u6587\u4ef6 | |__ fstore: faststore\u5b58\u50a8\u670d\u52a1 |__ cluster.conf: \u670d\u52a1\u5668\u5217\u8868(\u914d\u7f6e\u670d\u52a1\u5668ID\u3001IP\u548c\u7aef\u53e3)\uff0c\u5e76\u914d\u7f6e\u670d\u52a1\u5668\u5206\u7ec4\u53ca\u6570\u636e\u5206\u7ec4\u4e4b\u95f4\u7684\u5bf9\u5e94\u5173\u7cfb |__ storage.conf: \u5b58\u50a8\u8def\u5f84\u53ca\u7a7a\u95f4\u5206\u914d\u548c\u56de\u6536\u914d\u7f6e |__ server.conf: fs_serverd\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6 |__ client.conf: \u5ba2\u6237\u7aef\u914d\u7f6e\u6587\u4ef6","title":"1. \u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\u7ed3\u6784"},{"location":"CONFIGURE-zh_CN/#2","text":"/opt/fastcfs/ | |__ fcfs | |__ fused.pid: \u670d\u52a1\u8fdb\u7a0bfcfs_fused\u7684pid\u6587\u4ef6 | |__ logs: \u65e5\u5fd7\u6587\u4ef6\u76ee\u5f55 | |__ fcfs_fused.log: \u9519\u8bef\u65e5\u5fd7 | |__ fdir | |__ serverd.pid: \u670d\u52a1\u8fdb\u7a0bfdir_serverd\u7684pid\u6587\u4ef6 | |__ data: \u7cfb\u7edf\u6570\u636e\u6587\u4ef6\u76ee\u5f55\uff0c\u5305\u542b\u96c6\u7fa4\u62d3\u6251\u7ed3\u6784\u548cbinlog | | |__binlog: \u5b58\u653ebinlog\u6587\u4ef6 | | | |__ logs: \u65e5\u5fd7\u6587\u4ef6\u76ee\u5f55 | |__ fdir_serverd.log: \u9519\u8bef\u65e5\u5fd7 | |__ slow.log: \u6162\u67e5\u8be2\u65e5\u5fd7 | |__ fstore |__ serverd.pid: \u670d\u52a1\u8fdb\u7a0bfs_serverd\u7684pid\u6587\u4ef6 |__ data: \u7cfb\u7edf\u6570\u636e\u6587\u4ef6\u76ee\u5f55\uff0c\u5305\u542b\u96c6\u7fa4\u62d3\u6251\u7ed3\u6784\u548cbinlog | |__replica: replica binlog\uff0c\u4e00\u4e2aDG\u5bf9\u5e94\u4e00\u4e2a\u5b50\u76ee\u5f55 | |__slice: slice binlog | |__ logs: \u65e5\u5fd7\u6587\u4ef6\u76ee\u5f55 |__ fs_serverd.log: \u9519\u8bef\u65e5\u5fd7 |__ slow.log: \u6162\u67e5\u8be2\u65e5\u5fd7","title":"2. \u7a0b\u5e8f\u5de5\u4f5c\u76ee\u5f55"},{"location":"CONFIGURE-zh_CN/#3-fastdir-server","text":"\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff1a /etc/fastcfs/fdir fastDIR\u96c6\u7fa4\u5185\u5404\u4e2aserver\u914d\u7f6e\u7684cluster.conf\u5fc5\u987b\u5b8c\u5168\u4e00\u6837\uff0c\u5efa\u8bae\u914d\u7f6e\u4e00\u6b21\uff0c\u5206\u53d1\u5230\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u5373\u53ef\u3002","title":"3. fastDIR server\uff08\u670d\u52a1\u5b9e\u4f8b\uff09\u914d\u7f6e"},{"location":"CONFIGURE-zh_CN/#31-fastdirclusterconf","text":"\u6bcf\u4e2a fastDIR \u670d\u52a1\u5b9e\u4f8b\u5305\u542b2\u4e2a\u670d\u52a1\u7aef\u53e3\uff1a cluster \u548c service \uff1b cluster.conf \u4e2d\u914d\u7f6e\u96c6\u7fa4\u6240\u6709\u5b9e\u4f8b\uff0c\u4e00\u4e2a\u5b9e\u4f8b\u7531IP + \u7aef\u53e3\uff08\u5305\u62ec cluster\u548cservice 2\u4e2a\u7aef\u53e3 \uff09\u7ec4\u6210\uff1b \u4e00\u4e2afastDIR\u670d\u52a1\u5b9e\u4f8b\u9700\u8981\u914d\u7f6e\u4e00\u4e2a[server-$id]\u7684section\uff0c\u5176\u4e2d$id\u4e3a\u5b9e\u4f8bID\uff08\u4ece1\u5f00\u59cb\u7f16\u53f7\uff09\uff1b \u5982\u679c\u4e00\u53f0\u670d\u52a1\u5668\u4e0a\u542f\u52a8\u4e86\u591a\u4e2a\u5b9e\u4f8b\uff0c\u56e0\u7aef\u53e3\u4e0e\u5168\u5c40\u914d\u7f6e\u7684\u4e0d\u4e00\u81f4\uff0c\u6b64\u65f6\u5fc5\u987b\u6307\u5b9a\u7aef\u53e3\u3002 \u4e00\u4e2a\u670d\u52a1\u5b9e\u4f8b\u7684\u914d\u7f6e\u793a\u4f8b\u5982\u4e0b\uff1a [server-3] cluster-port = 11015 service-port = 11016 host = 172.16.168.128","title":"3.1 \u628afastDIR\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u670d\u52a1\u5b9e\u4f8b\u914d\u7f6e\u5230cluster.conf\u4e2d"},{"location":"CONFIGURE-zh_CN/#32-serverconf","text":"\u5982\u679c\u9700\u8981\u4fee\u6539\u6570\u636e\u5b58\u653e\u8def\u5f84\uff0c\u4fee\u6539\u914d\u7f6e\u9879 data_path \u4e3a\u7edd\u5bf9\u8def\u5f84 \u672c\u673a\u7aef\u53e3\u5305\u542bcluster\u548cservice 2\u4e2a\u7aef\u53e3\uff0c\u5206\u914d\u5728[cluster] \u548c [service] \u4e2d\u914d\u7f6e \u672c\u673aIP + \u672c\u673a\u7aef\u53e3\u5fc5\u987b\u914d\u7f6e\u5728cluster.conf\u7684\u4e00\u4e2a\u5b9e\u4f8b\u4e2d\uff0c\u5426\u5219\u542f\u52a8\u65f6\u4f1a\u51fa\u73b0\u4e0b\u9762\u7c7b\u4f3c\u7684\u51fa\u9519\u4fe1\u606f ERROR - file: cluster_info.c, line: 119, cluster config file: /etc/fastcfs/fdir/cluster.conf, can't find myself by my local ip and listen port V3.0\u652f\u6301\u7684\u6301\u4e45\u5316\u7279\u6027\u9ed8\u8ba4\u662f\u5173\u95ed\u7684\uff0c\u5728 [storage-engine] \u4e2d\u8bbe\u7f6e\uff0c\u8be6\u60c5\u53c2\u89c1\u914d\u7f6e\u793a\u4f8b","title":"3.2 \u914d\u7f6e server.conf"},{"location":"CONFIGURE-zh_CN/#33-storageconf","text":"\u5f00\u542f\u6301\u4e45\u5316\u5b58\u50a8\u7279\u6027\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u9700\u8981\u914d\u7f6estorage.conf \u901a\u5e38\u91c7\u7528\u9ed8\u8ba4\u8bbe\u7f6e\u5373\u53ef fastDIR\u91cd\u542f\uff1a /usr/bin/fdir_serverd /etc/fastcfs/fdir/server.conf restart \u6216\u8005\uff1a sudo systemctl restart fastdir \u67e5\u770b\u65e5\u5fd7\uff1a tail /opt/fastcfs/fdir/logs/fdir_serverd.log","title":"3.3 \u914d\u7f6e storage.conf"},{"location":"CONFIGURE-zh_CN/#2-faststore-server","text":"\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff1a /etc/fastcfs/fstore faststore\u96c6\u7fa4\u5404\u4e2a\u670d\u52a1\u5b9e\u4f8b\u914d\u7f6e\u7684cluster.conf\u5fc5\u987b\u5b8c\u5168\u4e00\u6837\uff0c\u5efa\u8bae\u628acluster.conf\u4e00\u6b21\u6027\u914d\u7f6e\u597d\uff0c\u7136\u540e\u5206\u53d1\u5230\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u3002","title":"2. faststore server\uff08\u670d\u52a1\u5b9e\u4f8b\uff09\u914d\u7f6e"},{"location":"CONFIGURE-zh_CN/#21-faststore-clusterconf","text":"\u6bcf\u4e2a faststore \u670d\u52a1\u5b9e\u4f8b\u5305\u542b3\u4e2a\u670d\u52a1\u7aef\u53e3\uff1acluster\u3001replica \u548c service\uff0c\u548c fastDIR \u7684 cluster.conf \u76f8\u6bd4\uff0c\u591a\u4e86\u4e00\u4e2areplica\u7aef\u53e3\uff0c\u4e8c\u8005\u914d\u7f6e\u65b9\u5f0f\u5b8c\u5168\u76f8\u540c\u3002","title":"2.1 \u628a faststore \u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u670d\u52a1\u5b9e\u4f8b\u914d\u7f6e\u5230 cluster.conf \u4e2d"},{"location":"CONFIGURE-zh_CN/#22-clusterconf","text":"\u5bf9\u4e8e\u751f\u4ea7\u73af\u5883\uff0c\u4e3a\u4e86\u4fbf\u4e8e\u4eca\u540e\u6269\u5bb9\uff0c\u5efa\u8bae\u6570\u636e\u5206\u7ec4\u6570\u76ee\u81f3\u5c11\u4e3a64\uff0c\u6700\u597d\u4e0d\u8981\u8d85\u8fc71024\uff08\u89c6\u4e1a\u52a1\u672a\u67655\u5e74\u53d1\u5c55\u89c4\u6a21\u800c\u5b9a\uff09\u3002","title":"2.2 \u5728 cluster.conf \u4e2d\u914d\u7f6e\u670d\u52a1\u5668\u5206\u7ec4\u548c\u6570\u636e\u5206\u7ec4\u5bf9\u5e94\u5173\u7cfb"},{"location":"CONFIGURE-zh_CN/#23-storageconf","text":"\u652f\u6301\u914d\u7f6e\u591a\u4e2a\u5b58\u50a8\u8def\u5f84\u3002\u4e3a\u4e86\u5145\u5206\u53d1\u6325\u51fa\u786c\u76d8\u6027\u80fd\uff0c\u5efa\u8bae\u6302\u8f7d\u5355\u76d8\uff0c\u6bcf\u5757\u76d8\u4f5c\u4e3a\u4e00\u4e2a\u5b58\u50a8\u8def\u5f84\u3002 \u914d\u7f6e\u793a\u4f8b\uff1a store_path_count = 1 [store-path-1] path = /opt/faststore/data","title":"2.3 \u5728storage.conf \u4e2d\u914d\u7f6e\u5b58\u50a8\u8def\u5f84\u7b49\u53c2\u6570"},{"location":"CONFIGURE-zh_CN/#24-serverconf","text":"\u5982\u679c\u9700\u8981\u4fee\u6539binlog\u5b58\u653e\u8def\u5f84\uff0c\u4fee\u6539\u914d\u7f6e\u9879 data_path \u4e3a\u7edd\u5bf9\u8def\u5f84 \u672c\u673a\u7aef\u53e3\u5305\u542bcluster\u3001replica\u548cservice 3\u4e2a\u7aef\u53e3\uff0c\u5206\u914d\u5728[cluster]\u3001[replica] \u548c [service] \u4e2d\u914d\u7f6e \u672c\u673aIP + \u672c\u673a\u7aef\u53e3\u5fc5\u987b\u914d\u7f6e\u5728cluster.conf\u7684\u4e00\u4e2a\u5b9e\u4f8b\u4e2d\uff0c\u5426\u5219\u542f\u52a8\u65f6\u4f1a\u51fa\u73b0\u7c7b\u4f3c\u4e0b\u9762\u7684\u51fa\u9519\u4fe1\u606f ERROR - file: server_group_info.c, line: 347, cluster config file: /etc/fastcfs/fstore/cluster.conf, can't find myself by my local ip and listen port faststore\u91cd\u542f\uff1a /usr/bin/fs_serverd /etc/fastcfs/fstore/server.conf restart \u6216\u8005\uff1a sudo systemctl restart faststore \u67e5\u770b\u65e5\u5fd7\uff1a tail /opt/fastcfs/fstore/logs/fs_serverd.log","title":"2.4 \u914d\u7f6e server.conf"},{"location":"CONFIGURE-zh_CN/#3-fastcfs","text":"fused \u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff1a /etc/fastcfs/fcfs","title":"3. FastCFS\u5ba2\u6237\u7aef\u914d\u7f6e"},{"location":"CONFIGURE-zh_CN/#31-faststore-server-etcfastcfsfstore","text":"/etc/fastcfs/fstore/cluster.conf","title":"3.1 \u590d\u5236faststore server\u4e0a\u7684\u5982\u4e0b\u914d\u7f6e\u6587\u4ef6\u5230 /etc/fastcfs/fstore/"},{"location":"CONFIGURE-zh_CN/#32-fastdir-server-etcfastcfsfdir","text":"/etc/fastcfs/fdir/cluster.conf","title":"3.2 \u590d\u5236fastDIR server\u4e0a\u7684\u5982\u4e0b\u914d\u7f6e\u6587\u4ef6\u5230 /etc/fastcfs/fdir/"},{"location":"CONFIGURE-zh_CN/#33-fuse","text":"\u5982\u6709\u5fc5\u8981\uff0c\u53ef\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 fuse.conf \u4e2d\u7684 mountpoint \u53c2\u6570\u6765\u6307\u5b9a\u6302\u8f7d\u70b9\uff1a mountpoint = /opt/fastcfs/fuse fused \u91cd\u542f\uff1a /usr/bin/fcfs_fused /etc/fastcfs/fcfs/fuse.conf restart \u6216\u8005\uff1a sudo systemctl restart fastcfs \u67e5\u770b\u65e5\u5fd7\uff1a tail /opt/fastcfs/fcfs/logs/fcfs_fused.log \u67e5\u770bfastDIR\u96c6\u7fa4\u72b6\u6001\uff1a fdir_cluster_stat \u67e5\u770b\u5355\u53f0fastDIR \u670d\u52a1\u72b6\u6001\uff1a fdir_service_stat $IP:$port \u53cb\u60c5\u63d0\u793a\uff1a\u53ef\u4ee5\u62f7\u8d1dfdir_cluster_stat \u8f93\u51fa\u7684IP\u548c\u670d\u52a1\u7aef\u53e3 \u67e5\u770bfaststore\u96c6\u7fa4\u72b6\u6001\uff1a fs_cluster_stat \u67e5\u770b\u975eACTIVE\u7684\u670d\u52a1\u5217\u8868\uff0c\u4f7f\u7528\uff1a fs_cluster_stat -N \u4f7f\u7528 -h \u67e5\u770b\u66f4\u591a\u9009\u9879 \u67e5\u770bFastCFS\u78c1\u76d8\u4f7f\u7528\u60c5\u51b5\uff1a df -h /opt/fastcfs/fuse | grep fuse \u81f3\u6b64\uff0cmountpoint\uff08\u5982\uff1a/opt/fastcfs/fuse\uff09\u53ef\u4ee5\u4f5c\u4e3a\u672c\u5730\u6587\u4ef6\u76ee\u5f55\u8bbf\u95ee\u4e86\u3002","title":"3.3 \u4fee\u6539fuse\u6302\u8f7d\u70b9\uff08\u53ef\u9009\uff09"},{"location":"CONFIGURE-zh_CN/#4","text":"\u5982\u679c\u9700\u8981\u5f00\u542f\u5b58\u50a8\u6c60\u6216\u8bbf\u95ee\u6743\u9650\u63a7\u5236\uff0c\u8bf7\u53c2\u9605 \u8ba4\u8bc1\u914d\u7f6e\u6587\u6863 \u795d\u987a\u5229\uff01 have a nice day!","title":"4. \u8ba4\u8bc1\u914d\u7f6e\uff08\u53ef\u9009\uff09"},{"location":"Easy-install-detail-zh_CN/","text":"\u5feb\u901f\u4f53\u9a8cFastCFS \u00b6 \u4ee5CentOS 8\u4e3a\u4f8b\uff0c\u7528\u5355\u4e2a\u670d\u52a1\u8282\u70b9\uff0c\u4ee5\u4e00\u952e\u5b89\u88c5\u7684\u65b9\u5f0f\u4f53\u9a8c\u4e0bFastCFS\u3002 \u6b64\u65b9\u5f0f\u4ec5\u4f9b\u4f53\u9a8c\u4f7f\u7528\uff0c\u4e0d\u9002\u5408\u5728\u751f\u4ea7\u73af\u5883\u4f7f\u7528. 1. \u83b7\u5f97\u6700\u65b0\u7684\u4ee3\u7801 \u00b6 git clone https://gitee.com/fastdfs100/FastCFS.git 2. \u5b89\u88c5 \u00b6 \u6d89\u53ca\u5230libfuse\u7684\u5b89\u88c5\u66f4\u65b0\u4ee5\u53ca\u5728/usr/local\u4e0b\u521b\u5efa\u76ee\u5f55\uff0c\u8bf7\u52a1\u5fc5\u4f7f\u7528sudo\u6216\u8005root\u7684\u65b9\u5f0f\u5b89\u88c5\u3002 cd FastCFS/ sudo ./helloWorld.sh \u5b89\u88c5\u8fc7\u7a0b\u4e2d\u4f1a\u6709\u8fdb\u5ea6\u63d0\u793a\u4fe1\u606f\uff0c\u5168\u81ea\u52a8\u8fdb\u884c\uff0c\u5f53\u770b\u5230\u4ee5\u4e0b\u63d0\u793a\u65f6\u8bf4\u660e\u5b89\u88c5\u6210\u529f\u4e86\u3002 INFO: Copy file fuse.conf to /etc/fastcfs/fcfs/ waiting services ready ... /dev/fuse 38G 0 38G 0% /opt/fastcfs/fuse the mounted path is: /opt/fastcfs/fuse have a nice day! 3. \u9a8c\u8bc1\uff1a\u67e5\u770b\u5b89\u88c5\u7684\u6587\u4ef6\u76ee\u5f55 \u00b6 \u5b89\u88c5\u6210\u529f\u540e\uff0c\u901a\u8fc7df -h \u53ef\u4ee5\u770b\u5230\u65b0\u589e\u4e00\u4e2a/dev/fuse\u7684\u8bbe\u5907\uff0c\u9ed8\u8ba4\u5bb9\u91cf\u4e0e\u4f60\u7684\u78c1\u76d8\u5bb9\u91cf\u6709\u5173\uff0c\u975e\u56fa\u5b9a\u503c\u3002\u6bd4\u5982\u6211\u7684\u662f38G. Filesystem Size Used Avail Use% Mounted on devtmpfs 189M 0 189M 0% /dev tmpfs 219M 0 219M 0% /dev/shm tmpfs 219M 6.6M 212M 4% /run tmpfs 219M 0 219M 0% /sys/fs/cgroup /dev/mapper/cs-root 47G 5.9G 42G 13% / /dev/sda1 1014M 242M 773M 24% /boot tmpfs 44M 4.0K 44M 1% /run/user/1000 /dev/fuse 38G 0 38G 0% /opt/fastcfs/fuse 4. \u4f7f\u7528\uff1a\u5728\u65b0\u6302\u8f7d\u7684\u76ee\u5f55/opt/fastcfs/fuse \u4e2d\uff0c\u53ef\u4ee5\u8fdb\u884c\u6807\u51c6\u7684\u6587\u4ef6\u521b\u5efa/\u7f16\u8f91/\u5220\u9664\u64cd\u4f5c \u00b6 [first@192.168.126.50 /opt/fastcfs/fuse] $ pwd /opt/fastcfs/fuse [first@192.168.126.50 /opt/fastcfs/fuse] $ touch abc // \u521b\u5efa\u6587\u4ef6 [first@192.168.126.50 /opt/fastcfs/fuse] $ ll total 0 -rw-rw-r--. 1 first first 0 May 14 17:06 abc [first@192.168.126.50 /opt/fastcfs/fuse] $ rm abc // \u5220\u9664\u6587\u4ef6 [first@192.168.126.50 /opt/fastcfs/fuse] $ mkdir -p d1/d2/d3 // \u521b\u5efa\u76ee\u5f55 [first@192.168.126.50 /opt/fastcfs/fuse] $ ll total 0 drwxrwxr-x. 2 first first 0 May 14 17:06 d1 [first@192.168.126.50 /opt/fastcfs/fuse] $ touch d1/d2/d3/123 // \u521b\u5efa\u6587\u4ef6 [first@192.168.126.50 /opt/fastcfs/fuse] $ ll d1/d2/d3/123 -rw-rw-r--. 1 first first 0 May 14 17:06 d1/d2/d3/123 [first@192.168.126.50 /opt/fastcfs/fuse] $ rm -rf d1 // \u5220\u9664\u76ee\u5f55 [first@192.168.126.50 /opt/fastcfs/fuse] $ ll total 0 5. \u505c\u6b62\u670d\u52a1 \u00b6 \u4f7f\u7528fashcfs.sh\u4e3a\u7ba1\u7406\u811a\u672c\uff0c\u53ef\u4ee5\u505c\u6b62\u3001\u91cd\u542f\u670d\u52a1: [first@192.168.126.50 ~/FastCFS] $ sudo ./fastcfs.sh stop [sudo] password for first: waiting for pid [2364] exit ... pid [2364] exit. waiting for pid [2379] exit ... pid [2379] exit. waiting for pid [2383] exit ... pid [2383] exit. waiting for pid [2400] exit ... pid [2400] exit. 6. \u79fb\u9664\u5b89\u88c5\u5305\u6062\u590d\u521d\u59cb\u73af\u5883 \u00b6 sudo yum remove FastCFS-auth-server FastCFS-fused fastDIR-server faststore-server -y sudo yum remove fastDIR-config faststore-config FastCFS-auth-config FastCFS-fuse-config -y sudo rm -rf /etc/fastcfs /opt/fastcfs /opt/faststore","title":"Quickstart"},{"location":"Easy-install-detail-zh_CN/#fastcfs","text":"\u4ee5CentOS 8\u4e3a\u4f8b\uff0c\u7528\u5355\u4e2a\u670d\u52a1\u8282\u70b9\uff0c\u4ee5\u4e00\u952e\u5b89\u88c5\u7684\u65b9\u5f0f\u4f53\u9a8c\u4e0bFastCFS\u3002 \u6b64\u65b9\u5f0f\u4ec5\u4f9b\u4f53\u9a8c\u4f7f\u7528\uff0c\u4e0d\u9002\u5408\u5728\u751f\u4ea7\u73af\u5883\u4f7f\u7528.","title":"\u5feb\u901f\u4f53\u9a8cFastCFS"},{"location":"Easy-install-detail-zh_CN/#1","text":"git clone https://gitee.com/fastdfs100/FastCFS.git","title":"1. \u83b7\u5f97\u6700\u65b0\u7684\u4ee3\u7801"},{"location":"Easy-install-detail-zh_CN/#2","text":"\u6d89\u53ca\u5230libfuse\u7684\u5b89\u88c5\u66f4\u65b0\u4ee5\u53ca\u5728/usr/local\u4e0b\u521b\u5efa\u76ee\u5f55\uff0c\u8bf7\u52a1\u5fc5\u4f7f\u7528sudo\u6216\u8005root\u7684\u65b9\u5f0f\u5b89\u88c5\u3002 cd FastCFS/ sudo ./helloWorld.sh \u5b89\u88c5\u8fc7\u7a0b\u4e2d\u4f1a\u6709\u8fdb\u5ea6\u63d0\u793a\u4fe1\u606f\uff0c\u5168\u81ea\u52a8\u8fdb\u884c\uff0c\u5f53\u770b\u5230\u4ee5\u4e0b\u63d0\u793a\u65f6\u8bf4\u660e\u5b89\u88c5\u6210\u529f\u4e86\u3002 INFO: Copy file fuse.conf to /etc/fastcfs/fcfs/ waiting services ready ... /dev/fuse 38G 0 38G 0% /opt/fastcfs/fuse the mounted path is: /opt/fastcfs/fuse have a nice day!","title":"2. \u5b89\u88c5"},{"location":"Easy-install-detail-zh_CN/#3","text":"\u5b89\u88c5\u6210\u529f\u540e\uff0c\u901a\u8fc7df -h \u53ef\u4ee5\u770b\u5230\u65b0\u589e\u4e00\u4e2a/dev/fuse\u7684\u8bbe\u5907\uff0c\u9ed8\u8ba4\u5bb9\u91cf\u4e0e\u4f60\u7684\u78c1\u76d8\u5bb9\u91cf\u6709\u5173\uff0c\u975e\u56fa\u5b9a\u503c\u3002\u6bd4\u5982\u6211\u7684\u662f38G. Filesystem Size Used Avail Use% Mounted on devtmpfs 189M 0 189M 0% /dev tmpfs 219M 0 219M 0% /dev/shm tmpfs 219M 6.6M 212M 4% /run tmpfs 219M 0 219M 0% /sys/fs/cgroup /dev/mapper/cs-root 47G 5.9G 42G 13% / /dev/sda1 1014M 242M 773M 24% /boot tmpfs 44M 4.0K 44M 1% /run/user/1000 /dev/fuse 38G 0 38G 0% /opt/fastcfs/fuse","title":"3. \u9a8c\u8bc1\uff1a\u67e5\u770b\u5b89\u88c5\u7684\u6587\u4ef6\u76ee\u5f55"},{"location":"Easy-install-detail-zh_CN/#4-optfastcfsfuse","text":"[first@192.168.126.50 /opt/fastcfs/fuse] $ pwd /opt/fastcfs/fuse [first@192.168.126.50 /opt/fastcfs/fuse] $ touch abc // \u521b\u5efa\u6587\u4ef6 [first@192.168.126.50 /opt/fastcfs/fuse] $ ll total 0 -rw-rw-r--. 1 first first 0 May 14 17:06 abc [first@192.168.126.50 /opt/fastcfs/fuse] $ rm abc // \u5220\u9664\u6587\u4ef6 [first@192.168.126.50 /opt/fastcfs/fuse] $ mkdir -p d1/d2/d3 // \u521b\u5efa\u76ee\u5f55 [first@192.168.126.50 /opt/fastcfs/fuse] $ ll total 0 drwxrwxr-x. 2 first first 0 May 14 17:06 d1 [first@192.168.126.50 /opt/fastcfs/fuse] $ touch d1/d2/d3/123 // \u521b\u5efa\u6587\u4ef6 [first@192.168.126.50 /opt/fastcfs/fuse] $ ll d1/d2/d3/123 -rw-rw-r--. 1 first first 0 May 14 17:06 d1/d2/d3/123 [first@192.168.126.50 /opt/fastcfs/fuse] $ rm -rf d1 // \u5220\u9664\u76ee\u5f55 [first@192.168.126.50 /opt/fastcfs/fuse] $ ll total 0","title":"4. \u4f7f\u7528\uff1a\u5728\u65b0\u6302\u8f7d\u7684\u76ee\u5f55/opt/fastcfs/fuse \u4e2d\uff0c\u53ef\u4ee5\u8fdb\u884c\u6807\u51c6\u7684\u6587\u4ef6\u521b\u5efa/\u7f16\u8f91/\u5220\u9664\u64cd\u4f5c"},{"location":"Easy-install-detail-zh_CN/#5","text":"\u4f7f\u7528fashcfs.sh\u4e3a\u7ba1\u7406\u811a\u672c\uff0c\u53ef\u4ee5\u505c\u6b62\u3001\u91cd\u542f\u670d\u52a1: [first@192.168.126.50 ~/FastCFS] $ sudo ./fastcfs.sh stop [sudo] password for first: waiting for pid [2364] exit ... pid [2364] exit. waiting for pid [2379] exit ... pid [2379] exit. waiting for pid [2383] exit ... pid [2383] exit. waiting for pid [2400] exit ... pid [2400] exit.","title":"5. \u505c\u6b62\u670d\u52a1"},{"location":"Easy-install-detail-zh_CN/#6","text":"sudo yum remove FastCFS-auth-server FastCFS-fused fastDIR-server faststore-server -y sudo yum remove fastDIR-config faststore-config FastCFS-auth-config FastCFS-fuse-config -y sudo rm -rf /etc/fastcfs /opt/fastcfs /opt/faststore","title":"6. \u79fb\u9664\u5b89\u88c5\u5305\u6062\u590d\u521d\u59cb\u73af\u5883"},{"location":"FAQ-zh_CN/","text":"FAQ \u00b6 1. \u7f51\u7edc\u8fde\u63a5\u5f02\u5e38 \u00b6 \u5f53\u65e5\u5fd7\u51fa\u73b0 Connection refused \u6216\u8005 Transport endpoint is not connected \u4e4b\u7c7b\u7684\u5f02\u5e38\u8bb0\u5f55\u3002 \u8bf7\u68c0\u67e5\u9632\u706b\u5899\u8bbe\u7f6e\u3002FastCFS \u5171\u67097\u4e2a\u670d\u52a1\u7aef\u53e3,\u8fd9\u4e9b\u5bf9\u5e94\u7684\u7aef\u53e3\u5e94\u8be5\u6253\u5f00\uff1a fdir \u9ed8\u8ba4\u96c6\u7fa4\u7aef\u53e3 11011 \u9ed8\u8ba4\u670d\u52a1\u7aef\u53e3 11012 fauth \u9ed8\u8ba4\u96c6\u7fa4\u7aef\u53e3 31011 \u9ed8\u8ba4\u670d\u52a1\u7aef\u53e3 31012 fstore \u9ed8\u8ba4\u96c6\u7fa4\u7aef\u53e3 21014 \u9ed8\u8ba4\u526f\u672c\u7aef\u53e3 21015 \u9ed8\u8ba4\u670d\u52a1\u7aef\u53e3 21016 2. \u670d\u52a1\u6709\u6ca1\u6709\u542f\u52a8\u987a\u5e8f\uff1f \u00b6 \u6709\u3002\u5e94\u6309\u987a\u5e8f\u542f\u52a8 fdir \uff0c fauth \uff08\u53ef\u9009\uff09\uff0c fstore \uff0c fuseclient \u3002","title":"FAQ"},{"location":"FAQ-zh_CN/#faq","text":"","title":"FAQ"},{"location":"FAQ-zh_CN/#1","text":"\u5f53\u65e5\u5fd7\u51fa\u73b0 Connection refused \u6216\u8005 Transport endpoint is not connected \u4e4b\u7c7b\u7684\u5f02\u5e38\u8bb0\u5f55\u3002 \u8bf7\u68c0\u67e5\u9632\u706b\u5899\u8bbe\u7f6e\u3002FastCFS \u5171\u67097\u4e2a\u670d\u52a1\u7aef\u53e3,\u8fd9\u4e9b\u5bf9\u5e94\u7684\u7aef\u53e3\u5e94\u8be5\u6253\u5f00\uff1a fdir \u9ed8\u8ba4\u96c6\u7fa4\u7aef\u53e3 11011 \u9ed8\u8ba4\u670d\u52a1\u7aef\u53e3 11012 fauth \u9ed8\u8ba4\u96c6\u7fa4\u7aef\u53e3 31011 \u9ed8\u8ba4\u670d\u52a1\u7aef\u53e3 31012 fstore \u9ed8\u8ba4\u96c6\u7fa4\u7aef\u53e3 21014 \u9ed8\u8ba4\u526f\u672c\u7aef\u53e3 21015 \u9ed8\u8ba4\u670d\u52a1\u7aef\u53e3 21016","title":"1. \u7f51\u7edc\u8fde\u63a5\u5f02\u5e38"},{"location":"FAQ-zh_CN/#2","text":"\u6709\u3002\u5e94\u6309\u987a\u5e8f\u542f\u52a8 fdir \uff0c fauth \uff08\u53ef\u9009\uff09\uff0c fstore \uff0c fuseclient \u3002","title":"2. \u670d\u52a1\u6709\u6ca1\u6709\u542f\u52a8\u987a\u5e8f\uff1f"},{"location":"INSTALL-zh_CN/","text":"FastCFS\u5b89\u88c5\u624b\u518c \u00b6 1. fastcfs.sh \u811a\u672c\u7edf\u4e00\u5b89\u88c5 \u00b6 \u901a\u8fc7\u6267\u884cfastcfs.sh\u811a\u672c\uff0c\u53ef\u81ea\u52a8\u4ecegitee\u4ed3\u5e93\u62c9\u53d6\u6216\u66f4\u65b0\u516d\u4e2a\u4ed3\u5e93\u4ee3\u7801\uff0c\u6309\u7167\u4f9d\u8d56\u987a\u5e8f\u8fdb\u884c\u7f16\u8bd1\u3001\u5b89\u88c5\uff0c\u5e76\u80fd\u6839\u636e\u914d\u7f6e\u6587\u4ef6\u6a21\u7248\u81ea\u52a8\u751f\u6210\u96c6\u7fa4\u76f8\u5173\u914d\u7f6e\u6587\u4ef6\u3002 fastcfs.sh \u547d\u4ee4\u53c2\u6570\u8bf4\u660e\uff1a * install: \u5b89\u88c5\u7a0b\u5e8f\u5305 * config: \u590d\u5236\u914d\u7f6e\u6587\u4ef6\u5e76\u81ea\u52a8\u914d\u7f6e\u4e3a\u5355\u8282\u70b9 * start | stop | restart: \u670d\u52a1\u8fdb\u7a0b\u63a7\u5236 \u6216\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff08\u9700\u8981root\u8eab\u4efd\u6267\u884c\uff09\uff1a ./fastcfs.sh install ./fastcfs.sh config ./fastcfs.sh restart \u901a\u8fc7 df \u547d\u4ee4\u67e5\u770bFastCFS\u6302\u8f7d\u7684\u6587\u4ef6\u76ee\u5f55\uff1a df -h /opt/fastcfs/fuse | grep fuse \u4ee5\u4e0a\u547d\u4ee4\u6267\u884c\u6210\u529f\uff0c\u4f60\u5c31\u53ef\u4ee5\u901a\u8fc7\u672c\u5730\u76ee\u5f55 /opt/fastcfs/fuse \u8bbf\u95eeFastCFS\u4e86\u3002 2\u3001DIY\u7f16\u8bd1\u548c\u5b89\u88c5 \u00b6 2.1. Linux\u4e0b\u9700\u8981\u5b89\u88c5libaio devel\u5305 \u00b6 \u5bf9\u4e8e CentOS\u6216REHL\uff0c\u6267\u884c\uff1a yum install libaio-devel -y \u5bf9\u4e8e Unbuntu\u6216Debian\uff0c\u6267\u884c\uff1a apt install libaio-dev -y \u5176\u4ed6Linux\u7cfb\u7edf\uff0c\u9700\u8981\u7f16\u8bd1\u5b89\u88c5 libaio \u5e93\u3002 2.2. libfastcommon \u7f16\u8bd1\u5b89\u88c5 \u00b6 git clone https://gitee.com/fastdfs100/libfastcommon.git; cd libfastcommon/ git checkout master ./make.sh clean && ./make.sh && ./make.sh install \u9ed8\u8ba4\u5b89\u88c5\u76ee\u5f55\uff1a /usr/lib64 /usr/lib /usr/include/fastcommon 2.3. libserverframe \u7f16\u8bd1\u5b89\u88c5 \u00b6 git clone https://gitee.com/fastdfs100/libserverframe.git; cd libserverframe/ ./make.sh clean && ./make.sh && ./make.sh install 2.4. libdiskallocator \u7f16\u8bd1\u5b89\u88c5 \u00b6 git clone https://gitee.com/fastdfs100/libdiskallocator.git; cd libdiskallocator/ ./make.sh clean && ./make.sh && ./make.sh install 2.5. Auth client \u7f16\u8bd1\u5b89\u88c5 \u00b6 git clone https://gitee.com/fastdfs100/FastCFS.git; cd FastCFS/ ./make.sh clean && ./make.sh --module=auth_client && ./make.sh --module=auth_client install 2.6. fastDIR \u7f16\u8bd1\u5b89\u88c5 \u00b6 git clone https://gitee.com/fastdfs100/fastDIR.git; cd fastDIR/ ./make.sh clean && ./make.sh && ./make.sh install mkdir -p /etc/fastcfs/fdir/ cp conf/*.conf /etc/fastcfs/fdir/ 2.7. faststore \u7f16\u8bd1\u5b89\u88c5 \u00b6 git clone https://gitee.com/fastdfs100/faststore.git; cd faststore/ ./make.sh clean && ./make.sh && ./make.sh install mkdir -p /etc/fastcfs/fstore/ cp conf/*.conf /etc/fastcfs/fstore/ 2.8. libfuse \u7f16\u8bd1\u5b89\u88c5 \u00b6 libfuse \u7f16\u8bd1\u4f9d\u8d56\u6bd4\u8f83\u590d\u6742\uff0c\u5efa\u8bae\u4f7f\u7528\u811a\u672clibfuse_setup.sh\u4e00\u952e\u7f16\u8bd1\u548c\u5b89\u88c5\u3002\u6216\u8005\u6267\u884c\u5982\u4e0b\u6b65\u9aa4DIY\uff1a \u6784\u5efalibfuse\u9700\u8981\u5148\u5b89\u88c5meson\u548cninja\u3002\u5b89\u88c5meson\u548cninja\u9700\u8981python3.5\u53ca\u4ee5\u4e0a\u7248\u672c\u3002 2.8.1. python\u5b89\u88c5 \u00b6 \u9700\u8981\u5b89\u88c5\u7684\u5305\u540d\uff1a python3 python3-pip Ubuntu\u4e0b\u5b89\u88c5\u547d\u4ee4\uff1a apt install python3 python3-pip -y CentOS\u4e0b\u5b89\u88c5\u547d\u4ee4\uff1a yum install python3 python3-pip -y 2.8.2. meson \u548c ninja \u5b89\u88c5 \u00b6 pip3 install meson pip3 install ninja 2.8.3. gcc \u5b89\u88c5 \u00b6 Ubuntu\u4e0b\u5b89\u88c5\u547d\u4ee4\uff1a apt install gcc g++ -y CentOS\u4e0b\u5b89\u88c5\u547d\u4ee4\uff1a yum install gcc gcc-c++ -y 2.8.4. libfuse \u5b89\u88c5 \u00b6 git clone https://gitee.com/mirrors/libfuse.git; cd libfuse/ git checkout fuse-3.10.1 mkdir build/; cd build/ meson .. meson configure -D prefix=/usr meson configure -D examples=false ninja && ninja install sed -i 's/#user_allow_other/user_allow_other/g' /etc/fuse.conf 2.9. FastCFS \u7f16\u8bd1\u5b89\u88c5 \u00b6 \u8fdb\u5165\u4e4b\u524dclone\u4e0b\u6765\u7684FastCFS\u76ee\u5f55\uff0c\u7136\u540e\u6267\u884c\uff1a ./make.sh --exclude=auth_client clean && ./make.sh --exclude=auth_client && ./make.sh --exclude=auth_client install mkdir -p /etc/fastcfs/fcfs/ mkdir -p /etc/fastcfs/auth/ cp conf/*.conf /etc/fastcfs/fcfs/ cp -R src/auth/conf/* /etc/fastcfs/auth/ \u914d\u7f6e\u53c2\u89c1 \u914d\u7f6e\u6587\u6863","title":"FastCFS\u5b89\u88c5\u624b\u518c"},{"location":"INSTALL-zh_CN/#fastcfs","text":"","title":"FastCFS\u5b89\u88c5\u624b\u518c"},{"location":"INSTALL-zh_CN/#1-fastcfssh","text":"\u901a\u8fc7\u6267\u884cfastcfs.sh\u811a\u672c\uff0c\u53ef\u81ea\u52a8\u4ecegitee\u4ed3\u5e93\u62c9\u53d6\u6216\u66f4\u65b0\u516d\u4e2a\u4ed3\u5e93\u4ee3\u7801\uff0c\u6309\u7167\u4f9d\u8d56\u987a\u5e8f\u8fdb\u884c\u7f16\u8bd1\u3001\u5b89\u88c5\uff0c\u5e76\u80fd\u6839\u636e\u914d\u7f6e\u6587\u4ef6\u6a21\u7248\u81ea\u52a8\u751f\u6210\u96c6\u7fa4\u76f8\u5173\u914d\u7f6e\u6587\u4ef6\u3002 fastcfs.sh \u547d\u4ee4\u53c2\u6570\u8bf4\u660e\uff1a * install: \u5b89\u88c5\u7a0b\u5e8f\u5305 * config: \u590d\u5236\u914d\u7f6e\u6587\u4ef6\u5e76\u81ea\u52a8\u914d\u7f6e\u4e3a\u5355\u8282\u70b9 * start | stop | restart: \u670d\u52a1\u8fdb\u7a0b\u63a7\u5236 \u6216\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff08\u9700\u8981root\u8eab\u4efd\u6267\u884c\uff09\uff1a ./fastcfs.sh install ./fastcfs.sh config ./fastcfs.sh restart \u901a\u8fc7 df \u547d\u4ee4\u67e5\u770bFastCFS\u6302\u8f7d\u7684\u6587\u4ef6\u76ee\u5f55\uff1a df -h /opt/fastcfs/fuse | grep fuse \u4ee5\u4e0a\u547d\u4ee4\u6267\u884c\u6210\u529f\uff0c\u4f60\u5c31\u53ef\u4ee5\u901a\u8fc7\u672c\u5730\u76ee\u5f55 /opt/fastcfs/fuse \u8bbf\u95eeFastCFS\u4e86\u3002","title":"1. fastcfs.sh \u811a\u672c\u7edf\u4e00\u5b89\u88c5"},{"location":"INSTALL-zh_CN/#2diy","text":"","title":"2\u3001DIY\u7f16\u8bd1\u548c\u5b89\u88c5"},{"location":"INSTALL-zh_CN/#21-linuxlibaio-devel","text":"\u5bf9\u4e8e CentOS\u6216REHL\uff0c\u6267\u884c\uff1a yum install libaio-devel -y \u5bf9\u4e8e Unbuntu\u6216Debian\uff0c\u6267\u884c\uff1a apt install libaio-dev -y \u5176\u4ed6Linux\u7cfb\u7edf\uff0c\u9700\u8981\u7f16\u8bd1\u5b89\u88c5 libaio \u5e93\u3002","title":"2.1. Linux\u4e0b\u9700\u8981\u5b89\u88c5libaio devel\u5305"},{"location":"INSTALL-zh_CN/#22-libfastcommon","text":"git clone https://gitee.com/fastdfs100/libfastcommon.git; cd libfastcommon/ git checkout master ./make.sh clean && ./make.sh && ./make.sh install \u9ed8\u8ba4\u5b89\u88c5\u76ee\u5f55\uff1a /usr/lib64 /usr/lib /usr/include/fastcommon","title":"2.2. libfastcommon \u7f16\u8bd1\u5b89\u88c5"},{"location":"INSTALL-zh_CN/#23-libserverframe","text":"git clone https://gitee.com/fastdfs100/libserverframe.git; cd libserverframe/ ./make.sh clean && ./make.sh && ./make.sh install","title":"2.3. libserverframe \u7f16\u8bd1\u5b89\u88c5"},{"location":"INSTALL-zh_CN/#24-libdiskallocator","text":"git clone https://gitee.com/fastdfs100/libdiskallocator.git; cd libdiskallocator/ ./make.sh clean && ./make.sh && ./make.sh install","title":"2.4. libdiskallocator \u7f16\u8bd1\u5b89\u88c5"},{"location":"INSTALL-zh_CN/#25-auth-client","text":"git clone https://gitee.com/fastdfs100/FastCFS.git; cd FastCFS/ ./make.sh clean && ./make.sh --module=auth_client && ./make.sh --module=auth_client install","title":"2.5. Auth client \u7f16\u8bd1\u5b89\u88c5"},{"location":"INSTALL-zh_CN/#26-fastdir","text":"git clone https://gitee.com/fastdfs100/fastDIR.git; cd fastDIR/ ./make.sh clean && ./make.sh && ./make.sh install mkdir -p /etc/fastcfs/fdir/ cp conf/*.conf /etc/fastcfs/fdir/","title":"2.6. fastDIR \u7f16\u8bd1\u5b89\u88c5"},{"location":"INSTALL-zh_CN/#27-faststore","text":"git clone https://gitee.com/fastdfs100/faststore.git; cd faststore/ ./make.sh clean && ./make.sh && ./make.sh install mkdir -p /etc/fastcfs/fstore/ cp conf/*.conf /etc/fastcfs/fstore/","title":"2.7. faststore \u7f16\u8bd1\u5b89\u88c5"},{"location":"INSTALL-zh_CN/#28-libfuse","text":"libfuse \u7f16\u8bd1\u4f9d\u8d56\u6bd4\u8f83\u590d\u6742\uff0c\u5efa\u8bae\u4f7f\u7528\u811a\u672clibfuse_setup.sh\u4e00\u952e\u7f16\u8bd1\u548c\u5b89\u88c5\u3002\u6216\u8005\u6267\u884c\u5982\u4e0b\u6b65\u9aa4DIY\uff1a \u6784\u5efalibfuse\u9700\u8981\u5148\u5b89\u88c5meson\u548cninja\u3002\u5b89\u88c5meson\u548cninja\u9700\u8981python3.5\u53ca\u4ee5\u4e0a\u7248\u672c\u3002","title":"2.8. libfuse \u7f16\u8bd1\u5b89\u88c5"},{"location":"INSTALL-zh_CN/#281-python","text":"\u9700\u8981\u5b89\u88c5\u7684\u5305\u540d\uff1a python3 python3-pip Ubuntu\u4e0b\u5b89\u88c5\u547d\u4ee4\uff1a apt install python3 python3-pip -y CentOS\u4e0b\u5b89\u88c5\u547d\u4ee4\uff1a yum install python3 python3-pip -y","title":"2.8.1. python\u5b89\u88c5"},{"location":"INSTALL-zh_CN/#282-meson-ninja","text":"pip3 install meson pip3 install ninja","title":"2.8.2. meson \u548c ninja \u5b89\u88c5"},{"location":"INSTALL-zh_CN/#283-gcc","text":"Ubuntu\u4e0b\u5b89\u88c5\u547d\u4ee4\uff1a apt install gcc g++ -y CentOS\u4e0b\u5b89\u88c5\u547d\u4ee4\uff1a yum install gcc gcc-c++ -y","title":"2.8.3. gcc \u5b89\u88c5"},{"location":"INSTALL-zh_CN/#284-libfuse","text":"git clone https://gitee.com/mirrors/libfuse.git; cd libfuse/ git checkout fuse-3.10.1 mkdir build/; cd build/ meson .. meson configure -D prefix=/usr meson configure -D examples=false ninja && ninja install sed -i 's/#user_allow_other/user_allow_other/g' /etc/fuse.conf","title":"2.8.4. libfuse \u5b89\u88c5"},{"location":"INSTALL-zh_CN/#29-fastcfs","text":"\u8fdb\u5165\u4e4b\u524dclone\u4e0b\u6765\u7684FastCFS\u76ee\u5f55\uff0c\u7136\u540e\u6267\u884c\uff1a ./make.sh --exclude=auth_client clean && ./make.sh --exclude=auth_client && ./make.sh --exclude=auth_client install mkdir -p /etc/fastcfs/fcfs/ mkdir -p /etc/fastcfs/auth/ cp conf/*.conf /etc/fastcfs/fcfs/ cp -R src/auth/conf/* /etc/fastcfs/auth/ \u914d\u7f6e\u53c2\u89c1 \u914d\u7f6e\u6587\u6863","title":"2.9. FastCFS \u7f16\u8bd1\u5b89\u88c5"},{"location":"INSTALL/","text":"1. Linux need install libaio devel \u00b6 for CentOS or REHL: yum install libaio-devel -y for Unbuntu or Debian: apt install libaio-dev -y 2. libfastcommon \u00b6 git clone git@github.com:happyfish100/libfastcommon.git || git clone https://github.com/happyfish100/libfastcommon.git cd libfastcommon/ git checkout master ./make.sh clean && ./make.sh && ./make.sh install default install directories: /usr/lib64 /usr/lib /usr/include/fastcommon 3. libserverframe \u00b6 git clone git@github.com:happyfish100/libserverframe.git || git clone https://github.com/happyfish100/libserverframe.git cd libserverframe/ ./make.sh clean && ./make.sh && ./make.sh install 4. libdiskallocator \u00b6 git clone https://gitee.com/fastdfs100/libdiskallocator.git || git clone https://github.com/happyfish100/libdiskallocator.git cd libdiskallocator/ ./make.sh clean && ./make.sh && ./make.sh install 5. Auth client \u00b6 git clone git@github.com:happyfish100/FastCFS.git || git clone https://github.com/happyfish100/FastCFS.git cd FastCFS/ ./make.sh clean && ./make.sh --module=auth_client && ./make.sh --module=auth_client install 6. fastDIR \u00b6 git clone git@github.com:happyfish100/fastDIR.git || git clone https://github.com/happyfish100/fastDIR.git cd fastDIR/ ./make.sh clean && ./make.sh && ./make.sh install mkdir -p /etc/fastcfs/fdir/ cp conf/*.conf /etc/fastcfs/fdir/ 7. faststore \u00b6 git clone git@github.com:happyfish100/faststore.git || git clone https://github.com/happyfish100/faststore.git cd faststore/ ./make.sh clean && ./make.sh && ./make.sh install mkdir -p /etc/fastcfs/fstore/ cp conf/*.conf /etc/fastcfs/fstore/ 8. libfuse \u00b6 libfuse requires meson and ninja which require python3.5 or higher version python \u00b6 packages: python3 python3-pip Ubuntu: apt install python3 python3-pip -y CentOS: yum install python3 python3-pip -y meson and ninja \u00b6 pip3 install meson pip3 install ninja gcc \u00b6 Ubuntu: apt install gcc g++ -y CentOS: yum install gcc gcc-c++ -y libfuse \u00b6 git clone git@github.com:libfuse/libfuse.git || git clone https://github.com/libfuse/libfuse.git cd libfuse/ git checkout fuse-3.10.1 mkdir build/; cd build/ meson .. meson configure -D prefix=/usr meson configure -D examples=false ninja && ninja install sed -i 's/#user_allow_other/user_allow_other/g' /etc/fuse.conf 9. FastCFS \u00b6 cd FastCFS/ ./make.sh --exclude=auth_client clean && ./make.sh --exclude=auth_client && ./make.sh --exclude=auth_client install mkdir -p /etc/fastcfs/fcfs/ mkdir -p /etc/fastcfs/auth/ cp conf/*.conf /etc/fastcfs/fcfs/ cp -R src/auth/conf/* /etc/fastcfs/auth/","title":"Install"},{"location":"INSTALL/#1-linux-need-install-libaio-devel","text":"for CentOS or REHL: yum install libaio-devel -y for Unbuntu or Debian: apt install libaio-dev -y","title":"1. Linux need install libaio devel"},{"location":"INSTALL/#2-libfastcommon","text":"git clone git@github.com:happyfish100/libfastcommon.git || git clone https://github.com/happyfish100/libfastcommon.git cd libfastcommon/ git checkout master ./make.sh clean && ./make.sh && ./make.sh install default install directories: /usr/lib64 /usr/lib /usr/include/fastcommon","title":"2. libfastcommon"},{"location":"INSTALL/#3-libserverframe","text":"git clone git@github.com:happyfish100/libserverframe.git || git clone https://github.com/happyfish100/libserverframe.git cd libserverframe/ ./make.sh clean && ./make.sh && ./make.sh install","title":"3. libserverframe"},{"location":"INSTALL/#4-libdiskallocator","text":"git clone https://gitee.com/fastdfs100/libdiskallocator.git || git clone https://github.com/happyfish100/libdiskallocator.git cd libdiskallocator/ ./make.sh clean && ./make.sh && ./make.sh install","title":"4. libdiskallocator"},{"location":"INSTALL/#5-auth-client","text":"git clone git@github.com:happyfish100/FastCFS.git || git clone https://github.com/happyfish100/FastCFS.git cd FastCFS/ ./make.sh clean && ./make.sh --module=auth_client && ./make.sh --module=auth_client install","title":"5. Auth client"},{"location":"INSTALL/#6-fastdir","text":"git clone git@github.com:happyfish100/fastDIR.git || git clone https://github.com/happyfish100/fastDIR.git cd fastDIR/ ./make.sh clean && ./make.sh && ./make.sh install mkdir -p /etc/fastcfs/fdir/ cp conf/*.conf /etc/fastcfs/fdir/","title":"6. fastDIR"},{"location":"INSTALL/#7-faststore","text":"git clone git@github.com:happyfish100/faststore.git || git clone https://github.com/happyfish100/faststore.git cd faststore/ ./make.sh clean && ./make.sh && ./make.sh install mkdir -p /etc/fastcfs/fstore/ cp conf/*.conf /etc/fastcfs/fstore/","title":"7. faststore"},{"location":"INSTALL/#8-libfuse","text":"libfuse requires meson and ninja which require python3.5 or higher version","title":"8. libfuse"},{"location":"INSTALL/#python","text":"packages: python3 python3-pip Ubuntu: apt install python3 python3-pip -y CentOS: yum install python3 python3-pip -y","title":"python"},{"location":"INSTALL/#meson-and-ninja","text":"pip3 install meson pip3 install ninja","title":"meson and ninja"},{"location":"INSTALL/#gcc","text":"Ubuntu: apt install gcc g++ -y CentOS: yum install gcc gcc-c++ -y","title":"gcc"},{"location":"INSTALL/#libfuse","text":"git clone git@github.com:libfuse/libfuse.git || git clone https://github.com/libfuse/libfuse.git cd libfuse/ git checkout fuse-3.10.1 mkdir build/; cd build/ meson .. meson configure -D prefix=/usr meson configure -D examples=false ninja && ninja install sed -i 's/#user_allow_other/user_allow_other/g' /etc/fuse.conf","title":"libfuse"},{"location":"INSTALL/#9-fastcfs","text":"cd FastCFS/ ./make.sh --exclude=auth_client clean && ./make.sh --exclude=auth_client && ./make.sh --exclude=auth_client install mkdir -p /etc/fastcfs/fcfs/ mkdir -p /etc/fastcfs/auth/ cp conf/*.conf /etc/fastcfs/fcfs/ cp -R src/auth/conf/* /etc/fastcfs/auth/","title":"9. FastCFS"},{"location":"ReleaseNotes/","text":"FastCFS V3.1.0 \u53d1\u5e03\uff0c\u4e3b\u8981\u6539\u8fdb\u5982\u4e0b\uff1a \u00b6 \u65b0\u7279\u6027 \u00b6 [fdir] \u5bf9\u6838\u5fc3\u7ec4\u4ef6FastDIR\u8fdb\u884c\u6539\u8fdb\uff0c\u5b9e\u73b0\u4e86LRU\u6dd8\u6c70\u7b97\u6cd5\uff0c\u4ee5\u6709\u9650\u5185\u5b58\u652f\u6301\u6d77\u91cf\u6587\u4ef6 \u5206\u5e03\u5f0f\u76ee\u5f55\u670d\u52a1FastDIR\u7684\u6dd8\u6c70\u7b97\u6cd5\u5177\u6709\u4e24\u5927\u7279\u6027\uff1a \u6309\u76ee\u5f55\u7ed3\u6784\u6dd8\u6c70\uff1a\u5148\u6dd8\u6c70\u5b50\u8282\u70b9\uff0c\u7136\u540e\u6dd8\u6c70\u7236\u8282\u70b9\uff1b \u6309\u6570\u636e\u7ebf\u7a0b\u6dd8\u6c70\uff1a\u6bcf\u4e2a\u6570\u636e\u7ebf\u7a0b\u4f5c\u4e3a\u4e00\u4e2a\u72ec\u7acb\u7684\u6570\u636e\u5355\u5143\uff0c\u6570\u636e\u5b58\u53d6\u548c\u6dd8\u6c70\u5747\u5728\u5176\u6570\u636e\u7ebf\u7a0b\u4e2d\u4ee5\u65e0\u9501\u65b9\u5f0f\u5b8c\u6210\u3002 Bug\u4fee\u590d \u00b6 \u91c7\u7528\u5f15\u7528\u8ba1\u6570\u65b9\u5f0f\uff0c\u4e0d\u518d\u5ef6\u8fdf\u91ca\u653e dentry\uff1b delay free namespace string for lockless\uff1b bugfixed: get trunk_file_size from ini file correctly\u3002 FastCFS V3.0.0 \u53d1\u5e03\uff0c\u4e3b\u8981\u6539\u8fdb\u5982\u4e0b\uff1a \u00b6 \u65b0\u7279\u6027 \u00b6 [fdir] \u6838\u5fc3\u7ec4\u4ef6FastDIR\u901a\u8fc7\u63d2\u4ef6\u65b9\u5f0f\u5b9e\u73b0\u6570\u636e\u5b58\u50a8\u5f15\u64ce\uff0c\u91c7\u7528binlog + \u5b58\u50a8\u5f15\u64ce\u63d2\u4ef6\uff0c\u6309\u9700\u52a0\u8f7dinode\u6570\u636e\uff0c\u5355\u673a\u4ee5\u6709\u9650\u5185\u5b58\uff08\u598264GB\uff09\u652f\u6301100\u4ebf\u7ea7\u7684\u6d77\u91cf\u6587\u4ef6 Bug\u4fee\u590d \u00b6 [fdir] increase/decrease parent's nlink on rename operation [fdir] set dentry->kv_array->count to 0 correctly [fstore] should init barray->count to 0 FastCFS V2.3.0\u53d1\u5e03\uff0c\u4e3b\u8981\u6539\u8fdb\u5982\u4e0b\uff1a \u00b6 \u65b0\u7279\u6027 \u00b6 [fauth] auth server\u4ee5\u4e3b\u5907\u65b9\u5f0f\u652f\u6301\u591a\u8282\u70b9\uff0c\u907f\u514d\u5355\u70b9\uff1b [fstore&fdir] leader/master\u9009\u4e3e/\u5207\u6362\u5f15\u5165\u8d85\u65f6\u673a\u5236\uff0c\u9009\u4e3e\u65f6\u957f\u53ef\u63a7\uff1b [\u7f51\u7edc] \u7f51\u7edc\u901a\u4fe1\u76f8\u5173\u6539\u8fdb\uff1a 1\uff09\u63e1\u624b\u5931\u8d25\uff0cserver\u7aef\u4e3b\u52a8\u65ad\u5f00\u8fde\u63a5\uff1b 2\uff09cluster\u5185\u90e8\u901a\u4fe1server\u7aef\u8d85\u65f6\u63a7\u5236\uff1b 3\uff09\u8c03\u6574\u7f51\u7edc\u901a\u4fe1\u8d85\u65f6\u9ed8\u8ba4\u503c\uff08\u8fde\u63a5\u8d85\u65f6\u753110\u79d2\u8c03\u6574\u4e3a2\u79d2\uff0c\u6536\u53d1\u6570\u636e\u8d85\u65f6\u753130\u79d2\u8c03\u6574\u4e3a10\u79d2\uff09\u3002 Bug\u4fee\u590d \u00b6 FastCFS V2.2.0 \u53d1\u5e03\uff0c\u4e3b\u8981\u6539\u8fdb\u5982\u4e0b\uff1a \u00b6 \u65b0\u7279\u6027 \u00b6 [fstore] \u4f7f\u7528libaio\u5b9e\u73b0\u5f02\u6b65\u8bfb\uff0c\u968f\u673a\u8bfb\u6027\u80fd\u63d0\u5347\u660e\u663e\uff1b [fstore] \u652f\u6301\u9884\u8bfb\u673a\u5236\uff0c\u987a\u5e8f\u8bfb\u6027\u80fd\u63d0\u5347\u663e\u8457\uff1b [csi] k8s\u9a71\u52a8\uff08fastcfs-csi\uff09\u5df2\u540c\u6b65\u53d1\u5e03\uff0c [devOPS] \u96c6\u7fa4\u8fd0\u7ef4\u5de5\u5177\uff08fcfs.sh\uff09 Bug\u4fee\u590d \u00b6 [fstore] \u4fee\u590dV2.1.0\u5f15\u5165\u7684bug\uff1a\u7b2c\u4e00\u6b21\u8fd0\u884c\u65f6\uff0c\u4e00\u4e2a\u5173\u952ebool\u53d8\u91cf\u6ca1\u6709\u6b63\u786e\u8d4b\u503c\uff1b [fuseclient] \u4fee\u590d\u5217\u4e3e\u76ee\u5f55\u5bfc\u81f4\u5143\u6570\u636e\u7f13\u5b58\u7684\u4e00\u81f4\u6027\u95ee\u9898\uff1b [fauth] \u4fee\u590dusername\u548cpoolname\u683c\u5f0f\u4fee\u9970\u7b26\u4e0d\u5f53\u5bfc\u81f4\u7684\u4e71\u7801\u95ee\u9898\u3002 FastCFS V2.0.0 \u53d1\u5e03\uff0c\u4e3a\u4e86\u66f4\u597d\u5730\u5bf9\u63a5\u865a\u62df\u673a\u548cK8s\uff0cV2.0\u4e3b\u8981\u5b9e\u73b0\u4e86\u5b58\u50a8\u6c60\u548c\u8bbf\u95ee\u6743\u9650\u63a7\u5236\uff0c\u5e76\u652f\u6301\u914d\u989d\uff1a \u00b6 \u65b0\u7279\u6027 \u00b6 [fauth] \u7528\u6237\u548c\u6743\u9650\u4f53\u7cfb Bug\u4fee\u590d \u00b6 FastCFS V1.2.0 \u53d1\u5e03\uff0c\u4e3b\u8981\u5bf9\u6570\u636e\u6062\u590d\u548cmaster\u4efb\u547d\u673a\u5236\u505a\u4e86\u6539\u8fdb\uff0c\u4fee\u590d\u4e865\u4e2a\u7a33\u5b9a\u6027bug\uff0cFastCFS\u7684\u53ef\u9760\u6027\u548c\u7a33\u5b9a\u6027\u4e0a\u4e86\u4e00\u4e2a\u65b0\u53f0\u9636\uff1a \u00b6 \u65b0\u7279\u6027 \u00b6 Bug\u4fee\u590d \u00b6 FastCFS V1.0.0 \u53d1\u5e03\uff1a \u00b6 FastCFS 3\u4eba\u5c0f\u56e2\u961f\u5386\u7ecf11\u4e2a\u6708\u7684\u7814\u53d1\uff0c\u63a8\u51fa\u4e86FastCFS\u7b2c\u4e00\u4e2a\u53ef\u7528\u7248\u672c\uff0cMySQL\u3001PostgresSQL\u548cOracle\u53ef\u4ee5\u8dd1\u901a\u3002 FastCFS\u670d\u52a1\u7aef\u4e24\u4e2a\u6838\u5fc3\u7ec4\u4ef6\u662f FastStore \u548c FastDIR\u3002FastStore\u662f\u57fa\u4e8e\u5757\u5b58\u50a8\u7684\u5206\u5e03\u5f0f\u6570\u636e\u5b58\u50a8\u670d\u52a1\uff0c\u5176\u6587\u4ef6block\u5927\u5c0f\u4e3a4MB\uff0c\u6587\u4ef6 inode + \u6587\u4ef6\u504f\u79fb\u91cf (offset)\u4f5c\u4e3ablock\u7684key\uff0c\u5bf9\u5e94\u7684\u6587\u4ef6\u5185\u5bb9\u4e3a value\uff0cFastStore\u672c\u8d28\u662f\u4e00\u4e2a\u5206\u5e03\u5f0fKey-Value\u7cfb\u7edf\u3002 \u4e3b\u8981\u7279\u6027 \u00b6 [fdir] \u9ad8\u6027\u80fd\u5206\u5e03\u5f0f\u76ee\u5f55\u670d\u52a1\uff0c\u7ba1\u7406\u6587\u4ef6\u5143\u6570\u636e\uff0c\u652f\u6301\u547d\u540d\u7a7a\u95f4 [fstore] FastStore\u662f\u4e00\u4e2a\u5206\u5e03\u5f0fKey-Value\u7cfb\u7edf\uff0c\u63d0\u4f9b\u4e86\u6587\u4ef6\u5757\u64cd\u4f5c\uff0c\u57fa\u4e8e\u6570\u636e\u5757\u7684\u65e0\u4e2d\u5fc3\u8bbe\u8ba1\uff0c\uff08\u7c7b\u4e00\u81f4\u6027Hash\uff09\uff0c\u7406\u8bba\u4e0a\u53ef\u4ee5\u65e0\u9650\u6269\u5bb9\uff1b [fuseclient] \u57fa\u4e8eFUSE\u7684\u6807\u51c6\u6587\u4ef6\u63a5\u53e3\u5df2\u7ecf\u5b9e\u73b0\uff0c\u53ef\u4ee5\u4f7f\u7528fused\u6a21\u5757mount\u5230\u672c\u5730\uff0c\u4e3a\u6570\u636e\u5e93\u3001\u865a\u62df\u673a\u4ee5\u53ca\u5176\u4ed6\u4f7f\u7528\u6807\u51c6\u6587\u4ef6\u63a5\u53e3\u7684\u5e94\u7528\u63d0\u4f9b\u5b58\u50a8\u3002","title":"Release Notes"},{"location":"ReleaseNotes/#fastcfs-v310","text":"","title":"FastCFS V3.1.0 \u53d1\u5e03\uff0c\u4e3b\u8981\u6539\u8fdb\u5982\u4e0b\uff1a"},{"location":"ReleaseNotes/#_1","text":"[fdir] \u5bf9\u6838\u5fc3\u7ec4\u4ef6FastDIR\u8fdb\u884c\u6539\u8fdb\uff0c\u5b9e\u73b0\u4e86LRU\u6dd8\u6c70\u7b97\u6cd5\uff0c\u4ee5\u6709\u9650\u5185\u5b58\u652f\u6301\u6d77\u91cf\u6587\u4ef6 \u5206\u5e03\u5f0f\u76ee\u5f55\u670d\u52a1FastDIR\u7684\u6dd8\u6c70\u7b97\u6cd5\u5177\u6709\u4e24\u5927\u7279\u6027\uff1a \u6309\u76ee\u5f55\u7ed3\u6784\u6dd8\u6c70\uff1a\u5148\u6dd8\u6c70\u5b50\u8282\u70b9\uff0c\u7136\u540e\u6dd8\u6c70\u7236\u8282\u70b9\uff1b \u6309\u6570\u636e\u7ebf\u7a0b\u6dd8\u6c70\uff1a\u6bcf\u4e2a\u6570\u636e\u7ebf\u7a0b\u4f5c\u4e3a\u4e00\u4e2a\u72ec\u7acb\u7684\u6570\u636e\u5355\u5143\uff0c\u6570\u636e\u5b58\u53d6\u548c\u6dd8\u6c70\u5747\u5728\u5176\u6570\u636e\u7ebf\u7a0b\u4e2d\u4ee5\u65e0\u9501\u65b9\u5f0f\u5b8c\u6210\u3002","title":"\u65b0\u7279\u6027"},{"location":"ReleaseNotes/#bug","text":"\u91c7\u7528\u5f15\u7528\u8ba1\u6570\u65b9\u5f0f\uff0c\u4e0d\u518d\u5ef6\u8fdf\u91ca\u653e dentry\uff1b delay free namespace string for lockless\uff1b bugfixed: get trunk_file_size from ini file correctly\u3002","title":"Bug\u4fee\u590d"},{"location":"ReleaseNotes/#fastcfs-v300","text":"","title":"FastCFS V3.0.0 \u53d1\u5e03\uff0c\u4e3b\u8981\u6539\u8fdb\u5982\u4e0b\uff1a"},{"location":"ReleaseNotes/#_2","text":"[fdir] \u6838\u5fc3\u7ec4\u4ef6FastDIR\u901a\u8fc7\u63d2\u4ef6\u65b9\u5f0f\u5b9e\u73b0\u6570\u636e\u5b58\u50a8\u5f15\u64ce\uff0c\u91c7\u7528binlog + \u5b58\u50a8\u5f15\u64ce\u63d2\u4ef6\uff0c\u6309\u9700\u52a0\u8f7dinode\u6570\u636e\uff0c\u5355\u673a\u4ee5\u6709\u9650\u5185\u5b58\uff08\u598264GB\uff09\u652f\u6301100\u4ebf\u7ea7\u7684\u6d77\u91cf\u6587\u4ef6","title":"\u65b0\u7279\u6027"},{"location":"ReleaseNotes/#bug_1","text":"[fdir] increase/decrease parent's nlink on rename operation [fdir] set dentry->kv_array->count to 0 correctly [fstore] should init barray->count to 0","title":"Bug\u4fee\u590d"},{"location":"ReleaseNotes/#fastcfs-v230","text":"","title":"FastCFS V2.3.0\u53d1\u5e03\uff0c\u4e3b\u8981\u6539\u8fdb\u5982\u4e0b\uff1a"},{"location":"ReleaseNotes/#_3","text":"[fauth] auth server\u4ee5\u4e3b\u5907\u65b9\u5f0f\u652f\u6301\u591a\u8282\u70b9\uff0c\u907f\u514d\u5355\u70b9\uff1b [fstore&fdir] leader/master\u9009\u4e3e/\u5207\u6362\u5f15\u5165\u8d85\u65f6\u673a\u5236\uff0c\u9009\u4e3e\u65f6\u957f\u53ef\u63a7\uff1b [\u7f51\u7edc] \u7f51\u7edc\u901a\u4fe1\u76f8\u5173\u6539\u8fdb\uff1a 1\uff09\u63e1\u624b\u5931\u8d25\uff0cserver\u7aef\u4e3b\u52a8\u65ad\u5f00\u8fde\u63a5\uff1b 2\uff09cluster\u5185\u90e8\u901a\u4fe1server\u7aef\u8d85\u65f6\u63a7\u5236\uff1b 3\uff09\u8c03\u6574\u7f51\u7edc\u901a\u4fe1\u8d85\u65f6\u9ed8\u8ba4\u503c\uff08\u8fde\u63a5\u8d85\u65f6\u753110\u79d2\u8c03\u6574\u4e3a2\u79d2\uff0c\u6536\u53d1\u6570\u636e\u8d85\u65f6\u753130\u79d2\u8c03\u6574\u4e3a10\u79d2\uff09\u3002","title":"\u65b0\u7279\u6027"},{"location":"ReleaseNotes/#bug_2","text":"","title":"Bug\u4fee\u590d"},{"location":"ReleaseNotes/#fastcfs-v220","text":"","title":"FastCFS V2.2.0 \u53d1\u5e03\uff0c\u4e3b\u8981\u6539\u8fdb\u5982\u4e0b\uff1a"},{"location":"ReleaseNotes/#_4","text":"[fstore] \u4f7f\u7528libaio\u5b9e\u73b0\u5f02\u6b65\u8bfb\uff0c\u968f\u673a\u8bfb\u6027\u80fd\u63d0\u5347\u660e\u663e\uff1b [fstore] \u652f\u6301\u9884\u8bfb\u673a\u5236\uff0c\u987a\u5e8f\u8bfb\u6027\u80fd\u63d0\u5347\u663e\u8457\uff1b [csi] k8s\u9a71\u52a8\uff08fastcfs-csi\uff09\u5df2\u540c\u6b65\u53d1\u5e03\uff0c [devOPS] \u96c6\u7fa4\u8fd0\u7ef4\u5de5\u5177\uff08fcfs.sh\uff09","title":"\u65b0\u7279\u6027"},{"location":"ReleaseNotes/#bug_3","text":"[fstore] \u4fee\u590dV2.1.0\u5f15\u5165\u7684bug\uff1a\u7b2c\u4e00\u6b21\u8fd0\u884c\u65f6\uff0c\u4e00\u4e2a\u5173\u952ebool\u53d8\u91cf\u6ca1\u6709\u6b63\u786e\u8d4b\u503c\uff1b [fuseclient] \u4fee\u590d\u5217\u4e3e\u76ee\u5f55\u5bfc\u81f4\u5143\u6570\u636e\u7f13\u5b58\u7684\u4e00\u81f4\u6027\u95ee\u9898\uff1b [fauth] \u4fee\u590dusername\u548cpoolname\u683c\u5f0f\u4fee\u9970\u7b26\u4e0d\u5f53\u5bfc\u81f4\u7684\u4e71\u7801\u95ee\u9898\u3002","title":"Bug\u4fee\u590d"},{"location":"ReleaseNotes/#fastcfs-v200-k8sv20","text":"","title":"FastCFS V2.0.0 \u53d1\u5e03\uff0c\u4e3a\u4e86\u66f4\u597d\u5730\u5bf9\u63a5\u865a\u62df\u673a\u548cK8s\uff0cV2.0\u4e3b\u8981\u5b9e\u73b0\u4e86\u5b58\u50a8\u6c60\u548c\u8bbf\u95ee\u6743\u9650\u63a7\u5236\uff0c\u5e76\u652f\u6301\u914d\u989d\uff1a"},{"location":"ReleaseNotes/#_5","text":"[fauth] \u7528\u6237\u548c\u6743\u9650\u4f53\u7cfb","title":"\u65b0\u7279\u6027"},{"location":"ReleaseNotes/#bug_4","text":"","title":"Bug\u4fee\u590d"},{"location":"ReleaseNotes/#fastcfs-v120-master5bugfastcfs","text":"","title":"FastCFS V1.2.0 \u53d1\u5e03\uff0c\u4e3b\u8981\u5bf9\u6570\u636e\u6062\u590d\u548cmaster\u4efb\u547d\u673a\u5236\u505a\u4e86\u6539\u8fdb\uff0c\u4fee\u590d\u4e865\u4e2a\u7a33\u5b9a\u6027bug\uff0cFastCFS\u7684\u53ef\u9760\u6027\u548c\u7a33\u5b9a\u6027\u4e0a\u4e86\u4e00\u4e2a\u65b0\u53f0\u9636\uff1a"},{"location":"ReleaseNotes/#_6","text":"","title":"\u65b0\u7279\u6027"},{"location":"ReleaseNotes/#bug_5","text":"","title":"Bug\u4fee\u590d"},{"location":"ReleaseNotes/#fastcfs-v100","text":"FastCFS 3\u4eba\u5c0f\u56e2\u961f\u5386\u7ecf11\u4e2a\u6708\u7684\u7814\u53d1\uff0c\u63a8\u51fa\u4e86FastCFS\u7b2c\u4e00\u4e2a\u53ef\u7528\u7248\u672c\uff0cMySQL\u3001PostgresSQL\u548cOracle\u53ef\u4ee5\u8dd1\u901a\u3002 FastCFS\u670d\u52a1\u7aef\u4e24\u4e2a\u6838\u5fc3\u7ec4\u4ef6\u662f FastStore \u548c FastDIR\u3002FastStore\u662f\u57fa\u4e8e\u5757\u5b58\u50a8\u7684\u5206\u5e03\u5f0f\u6570\u636e\u5b58\u50a8\u670d\u52a1\uff0c\u5176\u6587\u4ef6block\u5927\u5c0f\u4e3a4MB\uff0c\u6587\u4ef6 inode + \u6587\u4ef6\u504f\u79fb\u91cf (offset)\u4f5c\u4e3ablock\u7684key\uff0c\u5bf9\u5e94\u7684\u6587\u4ef6\u5185\u5bb9\u4e3a value\uff0cFastStore\u672c\u8d28\u662f\u4e00\u4e2a\u5206\u5e03\u5f0fKey-Value\u7cfb\u7edf\u3002","title":"FastCFS V1.0.0 \u53d1\u5e03\uff1a"},{"location":"ReleaseNotes/#_7","text":"[fdir] \u9ad8\u6027\u80fd\u5206\u5e03\u5f0f\u76ee\u5f55\u670d\u52a1\uff0c\u7ba1\u7406\u6587\u4ef6\u5143\u6570\u636e\uff0c\u652f\u6301\u547d\u540d\u7a7a\u95f4 [fstore] FastStore\u662f\u4e00\u4e2a\u5206\u5e03\u5f0fKey-Value\u7cfb\u7edf\uff0c\u63d0\u4f9b\u4e86\u6587\u4ef6\u5757\u64cd\u4f5c\uff0c\u57fa\u4e8e\u6570\u636e\u5757\u7684\u65e0\u4e2d\u5fc3\u8bbe\u8ba1\uff0c\uff08\u7c7b\u4e00\u81f4\u6027Hash\uff09\uff0c\u7406\u8bba\u4e0a\u53ef\u4ee5\u65e0\u9650\u6269\u5bb9\uff1b [fuseclient] \u57fa\u4e8eFUSE\u7684\u6807\u51c6\u6587\u4ef6\u63a5\u53e3\u5df2\u7ecf\u5b9e\u73b0\uff0c\u53ef\u4ee5\u4f7f\u7528fused\u6a21\u5757mount\u5230\u672c\u5730\uff0c\u4e3a\u6570\u636e\u5e93\u3001\u865a\u62df\u673a\u4ee5\u53ca\u5176\u4ed6\u4f7f\u7528\u6807\u51c6\u6587\u4ef6\u63a5\u53e3\u7684\u5e94\u7528\u63d0\u4f9b\u5b58\u50a8\u3002","title":"\u4e3b\u8981\u7279\u6027"},{"location":"YUMINSTALL-Diy-5nodes-zh_CN/","text":"\u5b89\u88c5\u7684\u96c6\u7fa4\u67b6\u6784 \u00b6 FastCFS\u652f\u6301\u5927\u89c4\u6a21\u7684\u96c6\u7fa4\uff0c\u4e0b\u9762\u4ee5\u6700\u4e3a\u5178\u578b\u7684\u6700\u5c0f\u5316\u96c6\u7fa4\u7684\u90e8\u7f72\u65b9\u5f0f\uff0c\u8bf4\u660e\u4e0b\u81ea\u5b9a\u4e49\u5b89\u88c5\u7684\u8fc7\u7a0b\u3002\u66f4\u5927\u89c4\u6a21\u7684\u5b89\u88c5\u65b9\u5f0f\u53ef\u53c2\u7167\u6b64\u8fc7\u7a0b\u6269\u5c55\u5b89\u88c5\u3002 1. \u8282\u70b9\u7c7b\u578b\u548c\u6570\u91cf\uff1a\u5171\u8ba15\u4e2a\u8282\u70b9\uff0c3\u4e2a\u670d\u52a1\u7aef\u8282\u70b9\uff083\u526f\u672c\u7b56\u7565\uff09\uff0c2\u5ba2\u6237\u7aef\u8282\u70b9 2. \u670d\u52a1\u7aef\u96c6\u7fa4\uff1aFastStore\u548cFastDir\u516c\u7528\uff0c\u4e5f\u53ef\u4ee5\u5206\u5f00\u72ec\u7acb\u90e8\u7f72\uff0c\u751f\u4ea7\u73af\u5883\u5efa\u8bae\u5206\u5f00\u3002\u672c\u8bf4\u660e\u4e3a\u4e86\u964d\u4f4e\u8282\u70b9\u6570\u91cf\uff0c\u91c7\u7528\u4e86\u516c\u7528\u90e8\u7f72\u7684\u65b9\u5f0f\u3002 3. \u5ba2\u6237\u7aef\uff1a\u4e3a\u4e86\u8bf4\u660e\u652f\u6301\u591a\u5ba2\u6237\u7aef\uff0c\u4f7f\u7528\u4e862\u4e2a\u5ba2\u6237\u7aef\u8282\u70b9\u3002\u751f\u4ea7\u73af\u5883\u4e2d\u5982\u679c\u53ea\u9700\u89811\u4e2a\u5ba2\u6237\u7aef\uff0c\u4e5f\u662f\u6ca1\u95ee\u9898\u7684\u3002 \u524d\u7f6e\u4f9d\u8d56 \u00b6 \u5148\u5b89\u88c5FastOS.repo yum\u6e90\uff0cFastCFS\u6240\u9700\u8981\u7684pkg\u90fd\u5728\u6b64\u6e90\u4e2d\uff0c\u5b89\u88c5\u6210\u529f\u540e\u5c31\u53ef\u4ee5\u5b89\u88c5FastCFS\u76f8\u5173\u8f6f\u4ef6\u5305\u4e86\u3002 CentOS 7 rpm -ivh http://www.fastken.com/yumrepo/el7/x86_64/FastOSrepo-1.0.0-1.el7.centos.x86_64.rpm CentOS 8 rpm -ivh http://www.fastken.com/yumrepo/el8/x86_64/FastOSrepo-1.0.0-1.el8.x86_64.rpm \u670d\u52a1\u7aef\u96c6\u7fa4\u5b89\u88c5 \u00b6 \u5728192.168.126.[101,102,103]\u4e0a\u5206\u522b\u5b89\u88c5FastStore\u3001FastDIR \u4e24\u4e2a\u670d\u52a1. \u5b89\u88c5FastDIR \u00b6 yum install fastDIR-server \u5b89\u88c5\u8fc7\u7a0b\u4e2d\u4f1a\u5b89\u88c5\u6240\u4f9d\u8d56\u7684\u5305\uff0c\u9009y\u5c31\u53ef\u4ee5\u4e86. ================================================================================================================== Package Architecture Version Repository Size ================================================================================================================== Installing: fastDIR-server x86_64 2.0.1-1.el8 FastOS 71 k Installing dependencies: FastCFS-auth-client x86_64 2.0.1-1.el8 FastOS 36 k FastCFS-auth-config x86_64 2.0.1-1.el8 FastOS 10 k fastDIR-config x86_64 2.0.1-1.el8 FastOS 9.5 k libfastcommon x86_64 1.0.50-1.el8 FastOS 140 k libserverframe x86_64 1.1.7-1.el8 FastOS 47 k Transaction Summary ================================================================================================================== Install 6 Packages Total download size: 313 k Installed size: 711 k Is this ok [y/N]: y // \u5b89\u88c5\u8fc7\u7a0b\u4e2d\u4f1a\u5b89\u88c5\u6240\u4f9d\u8d56\u7684\u5305\uff0c\u9009y\u5c31\u53ef\u4ee5\u4e86. \u5b89\u88c5\u5b8c\u6bd5\u540e\uff0c\u5728/etc/fastcfs \u4e0b\u53ef\u770b\u5230fdir\u7684\u76ee\u5f55\uff0c\u5b58\u50a8\u7684\u662fFastDIR\u7684\u914d\u7f6e\u6587\u4ef6. \u914d\u7f6e\u9879\u7684\u5185\u5bb9\uff0c\u540e\u7eed\u4f1a\u8bf4\u660e\u3002 $ ll /etc/fastcfs/fdir/ total 16 -rw-r--r--. 1 root root 1565 May 9 13:49 client.conf -rw-r--r--. 1 root root 753 May 9 13:49 cluster.conf -rw-r--r--. 1 root root 5242 May 9 13:49 server.conf \u5b89\u88c5FastStore \u00b6 yum install faststore-server \u518d\u8bf4\u660e\u4e0b\uff1a\u5b9e\u9645\u751f\u4ea7\u73af\u5883\u90e8\u7f72\u4e2d\uff0cFastDIR\u662f\u548cFastStore\u4e24\u4e2a\u670d\u52a1\u53ef\u4ee5\u5206\u5f00\u90e8\u7f72\u7684\uff0c\u4e0d\u9700\u8981\u518d\u540c\u4e00\u53f0\u670d\u52a1\u5668\u4e0a\u3002 ================================================================================================================== Package Architecture Version Repository Size ================================================================================================================== Installing: faststore-server x86_64 2.0.1-1.el8 FastOS 134 k Installing dependencies: faststore-config x86_64 2.0.1-1.el8 FastOS 11 k Transaction Summary ================================================================================================================== Install 2 Packages Total download size: 145 k Installed size: 422 k Is this ok [y/N]: y // \u5b89\u88c5\u8fc7\u7a0b\u4e2d\u4f1a\u5b89\u88c5\u6240\u4f9d\u8d56\u7684\u5305\uff0c\u9009y\u5c31\u53ef\u4ee5\u4e86. \u5b89\u88c5\u5b8c\u6bd5\u540e\uff0c\u5728/etc/fastcfs \u4e0b\u53ef\u770b\u5230fstore\u76ee\u5f55\uff0c\u5b58\u50a8\u7684\u662fFastStore\u7684\u914d\u7f6e\u6587\u4ef6\u3002\u914d\u7f6e\u9879\u7684\u5185\u5bb9\uff0c\u540e\u7eed\u4f1a\u8bf4\u660e\u3002 $ ll /etc/fastcfs/fstore/ total 20 -rw-r--r--. 1 root root 1577 May 9 13:52 client.conf -rw-r--r--. 1 root root 3256 May 9 13:52 cluster.conf -rw-r--r--. 1 root root 4965 May 9 13:52 server.conf -rw-r--r--. 1 root root 2609 May 9 13:52 storage.conf \u5b89\u88c5\u5ba2\u6237\u7aef \u00b6 \u5728192.168.126.[201,202]\u4e0a\u5b89\u88c5Client\u5305, \u5305\u540d\u4e3aFastCFS-fused. yum remove fuse -y // \u4ec5\u7b2c\u4e00\u6b21\u5b89\u88c5\u65f6\u6267\u884c yum install FastCFS-fused -y \u539fCentOS\u4e2dfuse\u4e3a\u8001\u7248\u672c\u7684\u5305\uff08fuse2.x\uff09\uff0c\u9700\u8981\u5378\u8f7d\u624d\u53ef\u4ee5\u6210\u529f\u5b89\u88c5FastCFS-fused\u4f9d\u8d56\u7684fuse3\u3002\u7b2c\u4e00\u6b21\u5b89\u88c5\u624d\u9700\u8981\u5378\u8f7dfuse\u5305\uff0c\u4ee5\u540e\u5c31\u4e0d\u7528\u6267\u884c\u4e86\u3002 \u5b89\u88c5\u5b8c\u6bd5\u540e\uff0c\u5728/etc/fastcfs \u4e0b\u53ef\u770b\u5230\u4ee5\u4e0b\u76ee\u5f55\uff0c\u5b58\u50a8\u662f\u5bf9\u5e94\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6. $ ll /etc/fastcfs/ drwxr-xr-x. 3 root root 113 May 14 15:20 auth drwxr-xr-x. 2 root root 23 May 14 15:20 fcfs drwxr-xr-x. 2 root root 64 May 14 15:20 fdir drwxr-xr-x. 2 root root 84 May 14 15:20 fstore \u4e3a\u4ec0\u4e48\u5728Client\u7684\u8282\u70b9\u4e0a\uff0c\u9700\u8981\u6709fdir\u548cfstore\u7684\u76ee\u5f55\u5462\uff1f\u56e0\u4e3aFastCFS\u662f\u65e0\u4e2d\u5fc3\u914d\u7f6e\u7684\uff0cClient\u9700\u8981\u77e5\u9053fdir\u548cfstore\u7684\u96c6\u7fa4\u60c5\u51b5\uff0c\u6240\u4ee5\u5c31\u9700\u8981fdir\u548cfstore\u7684\u914d\u7f6e\u6587\u4ef6\u3002 \u81ea\u5b9a\u4e49\u5b89\u88c5\u914d\u7f6e \u00b6 \u8bf4\u660e \u00b6 FastCFS\u5e76\u6ca1\u6709\u7edf\u4e00\u7684\u914d\u7f6e\u4e2d\u5fc3\uff0c\u9700\u8981\u5728\u5404\u4e2a\u8282\u70b9\u4e0a\u5355\u72ec\u90e8\u7f72\u914d\u7f6e\u6587\u4ef6\u3002\u914d\u7f6e\u6587\u4ef6\u5206\u4e3a\u4e24\u5927\u7c7b\uff1a\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u548c\u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u3002 \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\uff1a \u6307\u7684\u662f\u63cf\u8ff0 FastDir \u548c FastStore \u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5165\u53e3\u6587\u4ef6\u540d\u79f0\u4e3acluster.conf . \u8be5\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u5b9a\u662f\u96c6\u7fa4\u7684\u53c2\u6570\uff0c\u5982\u670d\u52a1\u8282\u70b9\u7684IP\u548c\u7aef\u53e3\u53f7\uff0c\u670d\u52a1\u8282\u70b9\u7684\u6570\u91cf\u7b49\u3002 cluster.conf \u6587\u4ef6\u5168\u5c40\u7edf\u4e00\uff0c\u5404\u4e2a\u8282\u70b9\u4e0a\u7684\u5185\u5bb9\u662f\u76f8\u540c\u7684, FastDir \u548c FastStore \u6709\u5404\u81ea\u7684cluster.conf\u6587\u4ef6\u3002 \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\uff1a \u6307\u7684\u662f\u670d\u52a1\u672c\u8eab\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5165\u53e3\u6587\u4ef6\u540d\u79f0server.conf \u5982\u7ebf\u7a0b\u6570\u91cf\u3001\u94fe\u63a5\u6570\u91cf\u3001\u7f13\u51b2\u533a\u5927\u5c0f\u3001\u65e5\u5fd7\u914d\u7f6e\u7b49\u3002 \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u5168\u5c40\u4e0d\u7edf\u4e00\u3002\u4e0d\u8fc7\u4ece\u96c6\u7fa4\u7684\u89d2\u5ea6\u8003\u8651\uff0c\u5982\u679c\u5404\u670d\u52a1\u5668\u914d\u7f6e\u76f8\u540c\uff0c\u6700\u597d\u662f\u7edf\u4e00\u7684\u3002 FastDIR \u914d\u7f6e \u00b6 \u914d\u7f6e\u6587\u4ef6\u8bf4\u660e $ ll /etc/fastcfs/fdir/ -rw-r--r--. 1 root root 1565 May 9 13:49 client.conf // \u6682\u65f6\u4e0d\u4f7f\u7528\uff0c\u4e0d\u7528\u5173\u6ce8 -rw-r--r--. 1 root root 753 May 9 13:49 cluster.conf // \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6 -rw-r--r--. 1 root root 5242 May 9 13:49 server.conf // \u670d\u52a1\u914d\u7f6e\u6587\u4ef6 \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6 \uff1a\u5728101\u8282\u70b9\u4e0a\uff0c\u4fee\u6539/etc/fastcfs/fdir/cluster.conf \u6587\u4ef6\uff0c\u4fee\u6539\u4e3a\u6b63\u786e\u7684IP\u5730\u5740\uff0c\u4fee\u6539\u540e\u7684\u5185\u5bb9\u5982\u4e0b 1 # config the auth config filename 2 auth_config_filename = /etc/fastcfs/auth/auth.conf 3 4 5 [group-cluster] 6 # the default cluster port 7 port = 11011 // \u96c6\u7fa4\u4e4b\u95f4\u7684\u901a\u4fe1\u4f7f\u7528\u7684\u9ed8\u8ba4\u7aef\u53e3\u53f7\uff0c\u4e0d\u7528\u4fee\u6539 8 9 [group-service] 10 # the default service port 11 port = 11012 // \u5bf9client\u63d0\u4f9b\u670d\u52a1\uff0c\u4f7f\u7528\u7684\u9ed8\u8ba4\u7aef\u53e3\u53f7\uff0c\u4e0d\u7528\u4fee\u6539 12 13 # config a server instance 14 # section format: [server-$id] 15 # server id is a 32 bits natural number (1, 2, 3 etc.), 16 [server-1] 17 18 # format: host[:port] 19 # host can be an IP address or a hostname 20 # IP address is recommended 21 # can occur more than once 22 host = 192.168.126.101 // \u8282\u70b9101\u7684\u5730\u5740\uff0c\u4f7f\u7528\u9ed8\u8ba4\u7684\u7aef\u53e3\u53f7 23 24 [server-2] 25 # cluster-port = 11013 26 # service-port = 11014 27 host = 192.168.126.102 // \u8282\u70b9102\u7684\u5730\u5740\uff0c\u4f7f\u7528\u9ed8\u8ba4\u7684\u7aef\u53e3\u53f7 28 29 [server-3] 30 # cluster-port = 11015 31 # service-port = 11016 32 host = 192.168.126.103 // \u8282\u70b9103\u7684\u5730\u5740\uff0c\u4f7f\u7528\u9ed8\u8ba4\u7684\u7aef\u53e3\u53f7 \u670d\u52a1\u914d\u7f6e\u6587\u4ef6 \uff1a \u5728101\u8282\u70b9\u4e0a\uff0c/etc/fastcfs/fdir/server.conf, \u8be5\u6587\u4ef6\u914d\u7f6e\u9879\u8f83\u591a\uff0c\u4f46\u9ed8\u8ba4\u4e0d\u7528\u4efb\u4f55\u8c03\u6574\uff0c\u786e\u8ba4\u6587\u4ef6\u5e95\u90e8\u7684[service]\u533a\u5185\u5bb9\u5c31\u597d. 180 [cluster] 181 # bind an address of this host 182 # empty for bind all addresses of this host 183 bind_addr = 184 185 # the listen port 186 port = 11011 187 188 # the accept thread count 189 # default value is 1 which is recommended 190 accept_threads = 1 191 192 # the network thread count 193 # these threads deal network io 194 # dispatched by the incoming socket fd 195 # default value is 4 196 work_threads = 2 197 198 [service] 199 bind_addr = // \u4fdd\u6301\u4e3a\u7a7a\uff0cFastDIR \u4f1a\u81ea\u52a8\u4f7f\u7528\u672c\u673a\u7684IP\u5730\u5740 200 port = 11012 // \u786e\u4fdd\u4e0ecluster.conf \u4e2d group-service \u7684\u8bbe\u5b9a\u503c\u76f8\u540c 201 accept_threads = 1 202 work_threads = 4 \u628acluster.conf\u6587\u4ef6\u590d\u5236\u5230102-103,201-202 \u8fd95\u53f0\u670d\u52a1\u5668\u4e0a,\u4fdd\u8bc1\u6240\u6709\u8282\u70b9\u90fd\u80fd\u77e5\u9053\u96c6\u7fa4\u914d\u7f6e scp /etc/fastcfs/fdir/cluster.conf 192.168.126.102:/etc/fastcfs/fdir/ scp /etc/fastcfs/fdir/cluster.conf 192.168.126.103:/etc/fastcfs/fdir/ scp /etc/fastcfs/fdir/cluster.conf 192.168.126.201:/etc/fastcfs/fdir/ scp /etc/fastcfs/fdir/cluster.conf 192.168.126.202:/etc/fastcfs/fdir/ FastStore \u914d\u7f6e \u00b6 \u914d\u7f6e\u6587\u4ef6\u8bf4\u660e $ ll /etc/fastcfs/fstore -rw-r--r--. 1 root root 1577 May 9 13:52 client.conf // \u6682\u65f6\u4e0d\u4f7f\u7528\uff0c\u4e0d\u7528\u5173\u6ce8 -rw-r--r--. 1 root root 3253 May 14 13:08 cluster.conf // \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6 -rw-r--r--. 1 root root 4965 May 9 13:52 server.conf // \u670d\u52a1\u914d\u7f6e\u6587\u4ef6 -rw-r--r--. 1 root root 2609 May 9 13:52 storage.conf // \u670d\u52a1\u914d\u7f6e\u6587\u4ef6 \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6 \uff1a\u5728101\u8282\u70b9\u4e0a\uff0c\u4fee\u6539/etc/fastcfs/fstore/cluster.conf \u6587\u4ef6\uff0c\u4ec5\u9700\u8981\u4fee\u6539server_ids\u7684\u503c\u548c[group-cluster]\u90e8\u5206\uff0c\u5176\u5b83\u53c2\u6570\u4e0d\u9700\u8981\u8c03\u6574\u3002\u4fee\u6539\u540e\u7684\u5185\u5bb9\u5982\u4e0b. 57 [server-group-1] 58 59 # config one or more server id(s) from servers.conf 60 ## multiple server ids separated by comma(s). 61 ## [start, end] for range, including start and end. 62 # this parameter can occurs more than once. 63 # server_ids = [1, 3] 64 server_ids = [1,3] // \u4f7f\u7528\u4e863\u526f\u672c\u7684\u7b56\u7565\uff0c\u67093\u4e2a\u670d\u52a1\u8282\u70b9101/102/103\uff0c\u6240\u4ee5\u8bbe\u5b9a\u4e3a[1,3] 65 66 # the data group id based 1. the formats as: 67 ## * multiple data group ids separated by comma(s). 68 ## * [start, end] for range, including start and end. 69 # this parameter can occurs more than once. 70 data_group_ids = [1, 32] 71 data_group_ids = [33, 64] 72 73 74 [group-cluster] 75 # the default cluster port 76 port = 21014 // \u96c6\u7fa4\u4e4b\u95f4\u7684\u901a\u4fe1\u4f7f\u7528\u7684\u9ed8\u8ba4\u7aef\u53e3\u53f7\uff0c\u4e0d\u7528\u4fee\u6539 77 78 [group-replica] 79 # the default replica port 80 port = 21015 // Master-Slave \u4e4b\u95f4\u540c\u6b65\u6570\u636e\u4f7f\u7528\u7684\u9ed8\u8ba4\u7aef\u53e3\u53f7\uff0c\u4e0d\u7528\u4fee\u6539 81 82 [group-service] 83 # the default service port 84 port = 21016 // \u5bf9Client\u63d0\u4f9b\u670d\u52a1\uff0c\u4f7f\u7528\u7684\u9ed8\u8ba4\u7aef\u53e3\u53f7\uff0c\u4e0d\u7528\u4fee\u6539 85 86 # config a server 87 # section format: [server-$id] 88 # server id is a 32 bits natural number (1, 2, 3 etc.), 89 [server-1] 90 91 # format: host[:port] 92 # host can be an IP address or a hostname 93 # IP address is recommended 94 # can occur more than once 95 host = 192.168.126.101 // \u8282\u70b9101\u7684\u5730\u5740\uff0c\u4f7f\u7528\u9ed8\u8ba4\u7684\u7aef\u53e3\u53f7 96 97 [server-2] 99 host = 192.168.126.102 // \u8282\u70b9102\u7684\u5730\u5740\uff0c\u4f7f\u7528\u9ed8\u8ba4\u7684\u7aef\u53e3\u53f7 100 101 [server-3] 103 host = 192.168.126.103 // \u8282\u70b9103\u7684\u5730\u5740\uff0c\u4f7f\u7528\u9ed8\u8ba4\u7684\u7aef\u53e3\u53f7 \u670d\u52a1\u914d\u7f6e\u6587\u4ef6 \u5728101\u8282\u70b9\u4e0a\uff0c/etc/fastcfs/fstore/server.conf \u548c /etc/fastcfs/fstore/storage.conf. \u9ed8\u8ba4\u5747\u9700\u8981\u4fee\u6539\uff0c\u53ea\u9700\u786e\u8ba4\u4e0bserver.conf\u7684\u914d\u7f6e\u662f\u5426\u6b63\u786e 190 [replica] 191 bind_addr = 192 port = 21015 // \u4fdd\u6301\u4e0efstore/server.conf \u4e2d [group-replica]\u8bbe\u5b9a\u7684port\u503c\u76f8\u540c 193 accept_threads = 1 194 work_threads = 4 195 196 [service] 197 bind_addr = 198 port = 21016 // \u4fdd\u6301\u4e0efstore/server.conf \u4e2d [group-service]\u8bbe\u5b9a\u7684port\u503c\u76f8\u540c 199 accept_threads = 1 200 work_threads = 4 \u628acluster.conf\u6587\u4ef6\u590d\u5236\u5230102-103,201-202 \u8fd95\u53f0\u670d\u52a1\u5668\u4e0a\uff0c\u4fdd\u8bc1\u6240\u6709\u8282\u70b9\u90fd\u80fd\u77e5\u9053\u96c6\u7fa4\u914d\u7f6e scp /etc/fastcfs/fstore/cluster.conf 192.168.126.102:/etc/fastcfs/fstore/ scp /etc/fastcfs/fstore/cluster.conf 192.168.126.103:/etc/fastcfs/fstore/ scp /etc/fastcfs/fstore/cluster.conf 192.168.126.201:/etc/fastcfs/fstore/ scp /etc/fastcfs/fstore/cluster.conf 192.168.126.202:/etc/fastcfs/fstore/ FastClient \u914d\u7f6e \u00b6 Client \u9700\u8981\u77e5\u9053FastDIR\u548cFastStore\u7684\u96c6\u7fa4\u914d\u7f6e\u6570\u636e\uff0c\u5728\u4e0a\u8ff0scp\u8fc7\u7a0b\u4e2d\uff0c\u5df2\u7ecf\u5206\u522bscp\u5230\u4e86\u5bf9\u5e94\u7684\u76ee\u5f55\u4e0b\uff0c\u4e0d\u9700\u8981\u4fee\u6539. Client \u81ea\u8eab\u7684\u914d\u7f6e\u6587\u4ef6\u4e3a /etc/fastcfs/fcfs/fuse.conf \u5c5e\u4e8e\u670d\u52a1\u914d\u7f6e\u6587\u4ef6\uff0c\u4e5f\u4e0d\u9700\u8981\u4fee\u6539. \u542f\u52a8\u670d\u52a1 \u00b6 \u5b89\u88c5\u5e76\u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u53ef\u4ee5\u542f\u52a8\u670d\u52a1\u5e76\u9a8c\u8bc1. \u5173\u95ed\u9632\u706b\u5899\uff1a CentOS 8 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5f00\u542f\u9632\u706b\u5899\uff0c\u4f1a\u5bfc\u81f4\u5404\u8282\u70b9\u4e4b\u95f4\u65e0\u6cd5\u8bbf\u95ee\uff0c\u53ef\u6682\u5173\u95ed\u9632\u706b\u5899\u3002 sudo systemctl stop firewalld.service \u542f\u52a8FastDir\uff1a * \u5728101/102/103 \u4e09\u4e2a\u8282\u70b9\u4e0a\uff0c\u6267\u884c\u4e0b\u5217\u547d\u4ee4\u542f\u52a8. \u6ce8\u610f\u5fc5\u987b\u662f3\u4e2a\u8282\u70b9\u90fd\u542f\u52a8\u3002 sudo systemctl restart fastdir \u6216\u8005 sudo /usr/bin/fdir_serverd /etc/fastcfs/fdir/server.conf restart \u67e5\u770b\u65e5\u5fd7\uff0c\u786e\u8ba4\u542f\u52a8\u6210\u529f. $ tail /opt/fastcfs/fdir/logs/fdir_serverd.log [2021-05-14 15:39:36] ERROR - file: connection_pool.c, line: 140, connect to server 192.168.126.102:11011 fail, errno: 113, error info: No route to host [2021-05-14 15:39:36] ERROR - file: connection_pool.c, line: 140, connect to server 192.168.126.103:11011 fail, errno: 113, error info: No route to host [2021-05-14 15:39:36] INFO - file: cluster_relationship.c, line: 668, round 19th select master, alive server count: 1 < server count: 3, the candidate server status: 0 (INIT) does not match the selection rule. you must start ALL servers in the first time, or remove the deprecated server(s) from the config file. try again after 32 seconds. [2021-05-14 15:40:01] INFO - file: cluster_relationship.c, line: 474, the master server id: 3, ip 192.168.126.103:11011 \u65e5\u5fd7\u4e2d\u6709error\u63d0\u793a\uff0c\u662f\u56e0\u4e3a\u9632\u706b\u5899\u5bfc\u81f4\u76843\u4e2a\u8282\u70b9\u65e0\u6cd5\u4e92\u76f8\u901a\u4fe1\u4ea7\u751f\u7684\uff0c\u5173\u95ed\u9632\u706b\u5899\u540eFastDIR\u4f1a\u81ea\u52a8\u8fdb\u884c\u5c1d\u8bd5\u94fe\u63a5\u3002\u4ece\u6700\u540e\u4e00\u884cINFO\u65e5\u5fd7\u53ef\u770b\u5230\uff0c\u670d\u52a1\u5df2\u7ecf\u542f\u52a8\u6210\u529f\u4e86\uff0c\u5e76\u4e14\u9009\u62e9\u4e86103\u8282\u70b9\u4f5c\u4e3aMaster. \u542f\u52a8FastStore: \u4e0eFastDir\u7684\u542f\u52a8\u65b9\u5f0f\u7c7b\u4f3c\uff0c\u5728101/102/103 \u4e09\u4e2a\u8282\u70b9\u4e0a\uff0c\u6267\u884c\u4e0b\u5217\u547d\u4ee4\u542f\u52a8. \u6ce8\u610f\u5fc5\u987b\u662f3\u4e2a\u8282\u70b9\u90fd\u542f\u52a8\u3002 sudo systemctl restart faststore \u6216\u8005 sudo /usr/bin/fs_serverd /etc/fastcfs/fstore/server.conf restart \u67e5\u770b\u65e5\u5fd7\uff0c\u786e\u8ba4\u542f\u52a8\u6210\u529f. [2021-05-14 16:06:08.326966] INFO - file: replication/replication_processor.c, line: 419, connect to replication peer id: 3, 192.168.126.103:21015 successfully [2021-05-14 16:06:08.344415] INFO - file: replication/replication_processor.c, line: 419, connect to replication peer id: 3, 192.168.126.103:21015 successfully [2021-05-14 16:06:08.368437] INFO - file: replica_handler.c, line: 598, replication peer id: 1, 192.168.126.101:21014 join in [2021-05-14 16:06:09.942673] INFO - file: replica_handler.c, line: 598, replication peer id: 1, 192.168.126.101:21014 join in [2021-05-14 16:06:10.374344] INFO - file: recovery/binlog_fetch.c, line: 589, data group id: 1, wait replica channel of master id 1 ready success, waiting count: 2 [2021-05-14 16:06:10.415848] INFO - file: recovery/binlog_fetch.c, line: 589, data group id: 6, wait replica channel of master id 1 ready success, waiting count: 2 \u770b\u5230\u4ee5\u4e0a\u7c7b\u4f3c\u7684\u65e5\u5fd7\uff0c\u5373\u662f\u542f\u52a8\u6210\u529f\u4e86\u3002 \u542f\u52a8FastClient\uff1a \u5728201\u3001202 \u8282\u70b9\u4e0a\u542f\u52a8Client. sudo systemctl restart fastcfs \u6216\u8005 sudo /usr/bin/fcfs_fused /etc/fastcfs/fcfs/fuse.conf restart \u67e5\u770b\u65e5\u5fd7\uff0c\u786e\u8ba4\u542f\u52a8\u6210\u529f $ tail /opt/fastcfs/fcfs/logs/fcfs_fused.log [2021-05-14 16:14:15] INFO - file: sf_nio.c, line: 205, connect to server 192.168.126.101:11012 successfully [2021-05-14 16:14:15] INFO - file: sf_nio.c, line: 205, connect to server 192.168.126.103:11012 successfully [2021-05-14 16:14:15] INFO - file: sf_connection_manager.c, line: 827, [FastDIR] connection manager thread start [2021-05-14 16:14:15] INFO - file: sf_connection_manager.c, line: 827, [FastStore] connection manager thread start [2021-05-14 16:14:55] INFO - file: sf_nio.c, line: 205, connect to server 192.168.126.101:21016 successfully \u67e5\u770b\u6587\u4ef6\u76ee\u5f55\u662f\u5426\u6210\u529f\u6302\u8f7d $ df -h Filesystem Size Used Avail Use% Mounted on devtmpfs 189M 0 189M 0% /dev tmpfs 219M 0 219M 0% /dev/shm tmpfs 219M 6.6M 212M 4% /run tmpfs 219M 0 219M 0% /sys/fs/cgroup /dev/mapper/cs-root 47G 4.9G 43G 11% / /dev/sda1 1014M 242M 773M 24% /boot tmpfs 44M 4.0K 44M 1% /run/user/1000 /dev/fuse 38G 0 38G 0% /opt/fastcfs/fuse // \u8fd9\u662f\u5373\u662fFastCFS\u6302\u8f7d\u7684\u6839\u76ee\u5f55 \u9a8c\u8bc1 \uff1a\u5728201\u8282\u70b9\u4e0a\u521b\u5efa\u6587\u4ef6 [first@192.168.126.201 /opt/fastcfs/fuse] $ mkdir -p abc/123 [first@192.168.126.201 /opt/fastcfs/fuse] $ touch abc/123/demo.txt [first@192.168.126.201 /opt/fastcfs/fuse] $ vim abc/123/demo.txt [first@192.168.126.201 /opt/fastcfs/fuse] $ ll abc/123 total 1 -rw-rw-r--+ 1 first first 13 May 14 16:22 demo.txt \u5728202\u8282\u70b9\u4e0a\u67e5\u770b\u8be5\u6587\u4ef6\uff0c\u53ef\u89c1\u6587\u4ef6\u5df2\u7ecf\u521b\u5efa\u6210\u529f\u4e86 [first@192.168.126.202 /opt/fastcfs/fuse] $ tail abc/123/demo.txt hello world [first@192.168.126.202 /opt/fastcfs/fuse] \u670d\u52a1\u76d1\u63a7 \u00b6 \u67e5\u770bFastDir\u96c6\u7fa4\u72b6\u6001 $ fdir_cluster_stat server_id: 1, host: 192.168.126.101:11012, status: 23 (ACTIVE), is_master: 0 server_id: 2, host: 192.168.126.102:11012, status: 23 (ACTIVE), is_master: 0 server_id: 3, host: 192.168.126.103:11012, status: 23 (ACTIVE), is_master: 1 server count: 3 \u67e5\u770b\u5355\u4e2aFastDir\u8282\u70b9\u72b6\u6001 [first@192.168.126.201 /etc/fastcfs/fcfs] $ fdir_service_stat 192.168.126.101:11012 server_id: 1 status: 23 (ACTIVE) is_master: false connection : {current: 4, max: 4} binlog : {current_version: 24} dentry : {current_inode_sn: 1000009, ns_count: 1, dir_count: 3, file_count: 1} \u67e5\u770bFastStore\u96c6\u7fa4\u72b6\u6001 $ fs_cluster_stat | more data_group_id: 1 server_id: 1, host: 192.168.126.101:21016, status: 5 (ACTIVE), is_preseted: 1, is_master: 1, data_version: 0 server_id: 2, host: 192.168.126.102:21016, status: 5 (ACTIVE), is_preseted: 0, is_master: 0, data_version: 0 server_id: 3, host: 192.168.126.103:21016, status: 5 (ACTIVE), is_preseted: 0, is_master: 0, data_version: 0 data_group_id: 2 server_id: 1, host: 192.168.126.101:21016, status: 5 (ACTIVE), is_preseted: 0, is_master: 0, data_version: 0 server_id: 2, host: 192.168.126.102:21016, status: 5 (ACTIVE), is_preseted: 1, is_master: 1, data_version: 0 ..................... \u67e5\u770b\u78c1\u76d8\u4f7f\u7528\u60c5\u51b5 df -h","title":"YUMINSTALL Diy 5nodes zh CN"},{"location":"YUMINSTALL-Diy-5nodes-zh_CN/#_1","text":"FastCFS\u652f\u6301\u5927\u89c4\u6a21\u7684\u96c6\u7fa4\uff0c\u4e0b\u9762\u4ee5\u6700\u4e3a\u5178\u578b\u7684\u6700\u5c0f\u5316\u96c6\u7fa4\u7684\u90e8\u7f72\u65b9\u5f0f\uff0c\u8bf4\u660e\u4e0b\u81ea\u5b9a\u4e49\u5b89\u88c5\u7684\u8fc7\u7a0b\u3002\u66f4\u5927\u89c4\u6a21\u7684\u5b89\u88c5\u65b9\u5f0f\u53ef\u53c2\u7167\u6b64\u8fc7\u7a0b\u6269\u5c55\u5b89\u88c5\u3002 1. \u8282\u70b9\u7c7b\u578b\u548c\u6570\u91cf\uff1a\u5171\u8ba15\u4e2a\u8282\u70b9\uff0c3\u4e2a\u670d\u52a1\u7aef\u8282\u70b9\uff083\u526f\u672c\u7b56\u7565\uff09\uff0c2\u5ba2\u6237\u7aef\u8282\u70b9 2. \u670d\u52a1\u7aef\u96c6\u7fa4\uff1aFastStore\u548cFastDir\u516c\u7528\uff0c\u4e5f\u53ef\u4ee5\u5206\u5f00\u72ec\u7acb\u90e8\u7f72\uff0c\u751f\u4ea7\u73af\u5883\u5efa\u8bae\u5206\u5f00\u3002\u672c\u8bf4\u660e\u4e3a\u4e86\u964d\u4f4e\u8282\u70b9\u6570\u91cf\uff0c\u91c7\u7528\u4e86\u516c\u7528\u90e8\u7f72\u7684\u65b9\u5f0f\u3002 3. \u5ba2\u6237\u7aef\uff1a\u4e3a\u4e86\u8bf4\u660e\u652f\u6301\u591a\u5ba2\u6237\u7aef\uff0c\u4f7f\u7528\u4e862\u4e2a\u5ba2\u6237\u7aef\u8282\u70b9\u3002\u751f\u4ea7\u73af\u5883\u4e2d\u5982\u679c\u53ea\u9700\u89811\u4e2a\u5ba2\u6237\u7aef\uff0c\u4e5f\u662f\u6ca1\u95ee\u9898\u7684\u3002","title":"\u5b89\u88c5\u7684\u96c6\u7fa4\u67b6\u6784"},{"location":"YUMINSTALL-Diy-5nodes-zh_CN/#_2","text":"\u5148\u5b89\u88c5FastOS.repo yum\u6e90\uff0cFastCFS\u6240\u9700\u8981\u7684pkg\u90fd\u5728\u6b64\u6e90\u4e2d\uff0c\u5b89\u88c5\u6210\u529f\u540e\u5c31\u53ef\u4ee5\u5b89\u88c5FastCFS\u76f8\u5173\u8f6f\u4ef6\u5305\u4e86\u3002 CentOS 7 rpm -ivh http://www.fastken.com/yumrepo/el7/x86_64/FastOSrepo-1.0.0-1.el7.centos.x86_64.rpm CentOS 8 rpm -ivh http://www.fastken.com/yumrepo/el8/x86_64/FastOSrepo-1.0.0-1.el8.x86_64.rpm","title":"\u524d\u7f6e\u4f9d\u8d56"},{"location":"YUMINSTALL-Diy-5nodes-zh_CN/#_3","text":"\u5728192.168.126.[101,102,103]\u4e0a\u5206\u522b\u5b89\u88c5FastStore\u3001FastDIR \u4e24\u4e2a\u670d\u52a1.","title":"\u670d\u52a1\u7aef\u96c6\u7fa4\u5b89\u88c5"},{"location":"YUMINSTALL-Diy-5nodes-zh_CN/#fastdir","text":"yum install fastDIR-server \u5b89\u88c5\u8fc7\u7a0b\u4e2d\u4f1a\u5b89\u88c5\u6240\u4f9d\u8d56\u7684\u5305\uff0c\u9009y\u5c31\u53ef\u4ee5\u4e86. ================================================================================================================== Package Architecture Version Repository Size ================================================================================================================== Installing: fastDIR-server x86_64 2.0.1-1.el8 FastOS 71 k Installing dependencies: FastCFS-auth-client x86_64 2.0.1-1.el8 FastOS 36 k FastCFS-auth-config x86_64 2.0.1-1.el8 FastOS 10 k fastDIR-config x86_64 2.0.1-1.el8 FastOS 9.5 k libfastcommon x86_64 1.0.50-1.el8 FastOS 140 k libserverframe x86_64 1.1.7-1.el8 FastOS 47 k Transaction Summary ================================================================================================================== Install 6 Packages Total download size: 313 k Installed size: 711 k Is this ok [y/N]: y // \u5b89\u88c5\u8fc7\u7a0b\u4e2d\u4f1a\u5b89\u88c5\u6240\u4f9d\u8d56\u7684\u5305\uff0c\u9009y\u5c31\u53ef\u4ee5\u4e86. \u5b89\u88c5\u5b8c\u6bd5\u540e\uff0c\u5728/etc/fastcfs \u4e0b\u53ef\u770b\u5230fdir\u7684\u76ee\u5f55\uff0c\u5b58\u50a8\u7684\u662fFastDIR\u7684\u914d\u7f6e\u6587\u4ef6. \u914d\u7f6e\u9879\u7684\u5185\u5bb9\uff0c\u540e\u7eed\u4f1a\u8bf4\u660e\u3002 $ ll /etc/fastcfs/fdir/ total 16 -rw-r--r--. 1 root root 1565 May 9 13:49 client.conf -rw-r--r--. 1 root root 753 May 9 13:49 cluster.conf -rw-r--r--. 1 root root 5242 May 9 13:49 server.conf","title":"\u5b89\u88c5FastDIR"},{"location":"YUMINSTALL-Diy-5nodes-zh_CN/#faststore","text":"yum install faststore-server \u518d\u8bf4\u660e\u4e0b\uff1a\u5b9e\u9645\u751f\u4ea7\u73af\u5883\u90e8\u7f72\u4e2d\uff0cFastDIR\u662f\u548cFastStore\u4e24\u4e2a\u670d\u52a1\u53ef\u4ee5\u5206\u5f00\u90e8\u7f72\u7684\uff0c\u4e0d\u9700\u8981\u518d\u540c\u4e00\u53f0\u670d\u52a1\u5668\u4e0a\u3002 ================================================================================================================== Package Architecture Version Repository Size ================================================================================================================== Installing: faststore-server x86_64 2.0.1-1.el8 FastOS 134 k Installing dependencies: faststore-config x86_64 2.0.1-1.el8 FastOS 11 k Transaction Summary ================================================================================================================== Install 2 Packages Total download size: 145 k Installed size: 422 k Is this ok [y/N]: y // \u5b89\u88c5\u8fc7\u7a0b\u4e2d\u4f1a\u5b89\u88c5\u6240\u4f9d\u8d56\u7684\u5305\uff0c\u9009y\u5c31\u53ef\u4ee5\u4e86. \u5b89\u88c5\u5b8c\u6bd5\u540e\uff0c\u5728/etc/fastcfs \u4e0b\u53ef\u770b\u5230fstore\u76ee\u5f55\uff0c\u5b58\u50a8\u7684\u662fFastStore\u7684\u914d\u7f6e\u6587\u4ef6\u3002\u914d\u7f6e\u9879\u7684\u5185\u5bb9\uff0c\u540e\u7eed\u4f1a\u8bf4\u660e\u3002 $ ll /etc/fastcfs/fstore/ total 20 -rw-r--r--. 1 root root 1577 May 9 13:52 client.conf -rw-r--r--. 1 root root 3256 May 9 13:52 cluster.conf -rw-r--r--. 1 root root 4965 May 9 13:52 server.conf -rw-r--r--. 1 root root 2609 May 9 13:52 storage.conf","title":"\u5b89\u88c5FastStore"},{"location":"YUMINSTALL-Diy-5nodes-zh_CN/#_4","text":"\u5728192.168.126.[201,202]\u4e0a\u5b89\u88c5Client\u5305, \u5305\u540d\u4e3aFastCFS-fused. yum remove fuse -y // \u4ec5\u7b2c\u4e00\u6b21\u5b89\u88c5\u65f6\u6267\u884c yum install FastCFS-fused -y \u539fCentOS\u4e2dfuse\u4e3a\u8001\u7248\u672c\u7684\u5305\uff08fuse2.x\uff09\uff0c\u9700\u8981\u5378\u8f7d\u624d\u53ef\u4ee5\u6210\u529f\u5b89\u88c5FastCFS-fused\u4f9d\u8d56\u7684fuse3\u3002\u7b2c\u4e00\u6b21\u5b89\u88c5\u624d\u9700\u8981\u5378\u8f7dfuse\u5305\uff0c\u4ee5\u540e\u5c31\u4e0d\u7528\u6267\u884c\u4e86\u3002 \u5b89\u88c5\u5b8c\u6bd5\u540e\uff0c\u5728/etc/fastcfs \u4e0b\u53ef\u770b\u5230\u4ee5\u4e0b\u76ee\u5f55\uff0c\u5b58\u50a8\u662f\u5bf9\u5e94\u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6. $ ll /etc/fastcfs/ drwxr-xr-x. 3 root root 113 May 14 15:20 auth drwxr-xr-x. 2 root root 23 May 14 15:20 fcfs drwxr-xr-x. 2 root root 64 May 14 15:20 fdir drwxr-xr-x. 2 root root 84 May 14 15:20 fstore \u4e3a\u4ec0\u4e48\u5728Client\u7684\u8282\u70b9\u4e0a\uff0c\u9700\u8981\u6709fdir\u548cfstore\u7684\u76ee\u5f55\u5462\uff1f\u56e0\u4e3aFastCFS\u662f\u65e0\u4e2d\u5fc3\u914d\u7f6e\u7684\uff0cClient\u9700\u8981\u77e5\u9053fdir\u548cfstore\u7684\u96c6\u7fa4\u60c5\u51b5\uff0c\u6240\u4ee5\u5c31\u9700\u8981fdir\u548cfstore\u7684\u914d\u7f6e\u6587\u4ef6\u3002","title":"\u5b89\u88c5\u5ba2\u6237\u7aef"},{"location":"YUMINSTALL-Diy-5nodes-zh_CN/#_5","text":"","title":"\u81ea\u5b9a\u4e49\u5b89\u88c5\u914d\u7f6e"},{"location":"YUMINSTALL-Diy-5nodes-zh_CN/#_6","text":"FastCFS\u5e76\u6ca1\u6709\u7edf\u4e00\u7684\u914d\u7f6e\u4e2d\u5fc3\uff0c\u9700\u8981\u5728\u5404\u4e2a\u8282\u70b9\u4e0a\u5355\u72ec\u90e8\u7f72\u914d\u7f6e\u6587\u4ef6\u3002\u914d\u7f6e\u6587\u4ef6\u5206\u4e3a\u4e24\u5927\u7c7b\uff1a\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u548c\u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u3002 \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\uff1a \u6307\u7684\u662f\u63cf\u8ff0 FastDir \u548c FastStore \u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5165\u53e3\u6587\u4ef6\u540d\u79f0\u4e3acluster.conf . \u8be5\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u5b9a\u662f\u96c6\u7fa4\u7684\u53c2\u6570\uff0c\u5982\u670d\u52a1\u8282\u70b9\u7684IP\u548c\u7aef\u53e3\u53f7\uff0c\u670d\u52a1\u8282\u70b9\u7684\u6570\u91cf\u7b49\u3002 cluster.conf \u6587\u4ef6\u5168\u5c40\u7edf\u4e00\uff0c\u5404\u4e2a\u8282\u70b9\u4e0a\u7684\u5185\u5bb9\u662f\u76f8\u540c\u7684, FastDir \u548c FastStore \u6709\u5404\u81ea\u7684cluster.conf\u6587\u4ef6\u3002 \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\uff1a \u6307\u7684\u662f\u670d\u52a1\u672c\u8eab\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5165\u53e3\u6587\u4ef6\u540d\u79f0server.conf \u5982\u7ebf\u7a0b\u6570\u91cf\u3001\u94fe\u63a5\u6570\u91cf\u3001\u7f13\u51b2\u533a\u5927\u5c0f\u3001\u65e5\u5fd7\u914d\u7f6e\u7b49\u3002 \u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u5168\u5c40\u4e0d\u7edf\u4e00\u3002\u4e0d\u8fc7\u4ece\u96c6\u7fa4\u7684\u89d2\u5ea6\u8003\u8651\uff0c\u5982\u679c\u5404\u670d\u52a1\u5668\u914d\u7f6e\u76f8\u540c\uff0c\u6700\u597d\u662f\u7edf\u4e00\u7684\u3002","title":"\u8bf4\u660e"},{"location":"YUMINSTALL-Diy-5nodes-zh_CN/#fastdir_1","text":"\u914d\u7f6e\u6587\u4ef6\u8bf4\u660e $ ll /etc/fastcfs/fdir/ -rw-r--r--. 1 root root 1565 May 9 13:49 client.conf // \u6682\u65f6\u4e0d\u4f7f\u7528\uff0c\u4e0d\u7528\u5173\u6ce8 -rw-r--r--. 1 root root 753 May 9 13:49 cluster.conf // \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6 -rw-r--r--. 1 root root 5242 May 9 13:49 server.conf // \u670d\u52a1\u914d\u7f6e\u6587\u4ef6 \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6 \uff1a\u5728101\u8282\u70b9\u4e0a\uff0c\u4fee\u6539/etc/fastcfs/fdir/cluster.conf \u6587\u4ef6\uff0c\u4fee\u6539\u4e3a\u6b63\u786e\u7684IP\u5730\u5740\uff0c\u4fee\u6539\u540e\u7684\u5185\u5bb9\u5982\u4e0b 1 # config the auth config filename 2 auth_config_filename = /etc/fastcfs/auth/auth.conf 3 4 5 [group-cluster] 6 # the default cluster port 7 port = 11011 // \u96c6\u7fa4\u4e4b\u95f4\u7684\u901a\u4fe1\u4f7f\u7528\u7684\u9ed8\u8ba4\u7aef\u53e3\u53f7\uff0c\u4e0d\u7528\u4fee\u6539 8 9 [group-service] 10 # the default service port 11 port = 11012 // \u5bf9client\u63d0\u4f9b\u670d\u52a1\uff0c\u4f7f\u7528\u7684\u9ed8\u8ba4\u7aef\u53e3\u53f7\uff0c\u4e0d\u7528\u4fee\u6539 12 13 # config a server instance 14 # section format: [server-$id] 15 # server id is a 32 bits natural number (1, 2, 3 etc.), 16 [server-1] 17 18 # format: host[:port] 19 # host can be an IP address or a hostname 20 # IP address is recommended 21 # can occur more than once 22 host = 192.168.126.101 // \u8282\u70b9101\u7684\u5730\u5740\uff0c\u4f7f\u7528\u9ed8\u8ba4\u7684\u7aef\u53e3\u53f7 23 24 [server-2] 25 # cluster-port = 11013 26 # service-port = 11014 27 host = 192.168.126.102 // \u8282\u70b9102\u7684\u5730\u5740\uff0c\u4f7f\u7528\u9ed8\u8ba4\u7684\u7aef\u53e3\u53f7 28 29 [server-3] 30 # cluster-port = 11015 31 # service-port = 11016 32 host = 192.168.126.103 // \u8282\u70b9103\u7684\u5730\u5740\uff0c\u4f7f\u7528\u9ed8\u8ba4\u7684\u7aef\u53e3\u53f7 \u670d\u52a1\u914d\u7f6e\u6587\u4ef6 \uff1a \u5728101\u8282\u70b9\u4e0a\uff0c/etc/fastcfs/fdir/server.conf, \u8be5\u6587\u4ef6\u914d\u7f6e\u9879\u8f83\u591a\uff0c\u4f46\u9ed8\u8ba4\u4e0d\u7528\u4efb\u4f55\u8c03\u6574\uff0c\u786e\u8ba4\u6587\u4ef6\u5e95\u90e8\u7684[service]\u533a\u5185\u5bb9\u5c31\u597d. 180 [cluster] 181 # bind an address of this host 182 # empty for bind all addresses of this host 183 bind_addr = 184 185 # the listen port 186 port = 11011 187 188 # the accept thread count 189 # default value is 1 which is recommended 190 accept_threads = 1 191 192 # the network thread count 193 # these threads deal network io 194 # dispatched by the incoming socket fd 195 # default value is 4 196 work_threads = 2 197 198 [service] 199 bind_addr = // \u4fdd\u6301\u4e3a\u7a7a\uff0cFastDIR \u4f1a\u81ea\u52a8\u4f7f\u7528\u672c\u673a\u7684IP\u5730\u5740 200 port = 11012 // \u786e\u4fdd\u4e0ecluster.conf \u4e2d group-service \u7684\u8bbe\u5b9a\u503c\u76f8\u540c 201 accept_threads = 1 202 work_threads = 4 \u628acluster.conf\u6587\u4ef6\u590d\u5236\u5230102-103,201-202 \u8fd95\u53f0\u670d\u52a1\u5668\u4e0a,\u4fdd\u8bc1\u6240\u6709\u8282\u70b9\u90fd\u80fd\u77e5\u9053\u96c6\u7fa4\u914d\u7f6e scp /etc/fastcfs/fdir/cluster.conf 192.168.126.102:/etc/fastcfs/fdir/ scp /etc/fastcfs/fdir/cluster.conf 192.168.126.103:/etc/fastcfs/fdir/ scp /etc/fastcfs/fdir/cluster.conf 192.168.126.201:/etc/fastcfs/fdir/ scp /etc/fastcfs/fdir/cluster.conf 192.168.126.202:/etc/fastcfs/fdir/","title":"FastDIR \u914d\u7f6e"},{"location":"YUMINSTALL-Diy-5nodes-zh_CN/#faststore_1","text":"\u914d\u7f6e\u6587\u4ef6\u8bf4\u660e $ ll /etc/fastcfs/fstore -rw-r--r--. 1 root root 1577 May 9 13:52 client.conf // \u6682\u65f6\u4e0d\u4f7f\u7528\uff0c\u4e0d\u7528\u5173\u6ce8 -rw-r--r--. 1 root root 3253 May 14 13:08 cluster.conf // \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6 -rw-r--r--. 1 root root 4965 May 9 13:52 server.conf // \u670d\u52a1\u914d\u7f6e\u6587\u4ef6 -rw-r--r--. 1 root root 2609 May 9 13:52 storage.conf // \u670d\u52a1\u914d\u7f6e\u6587\u4ef6 \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6 \uff1a\u5728101\u8282\u70b9\u4e0a\uff0c\u4fee\u6539/etc/fastcfs/fstore/cluster.conf \u6587\u4ef6\uff0c\u4ec5\u9700\u8981\u4fee\u6539server_ids\u7684\u503c\u548c[group-cluster]\u90e8\u5206\uff0c\u5176\u5b83\u53c2\u6570\u4e0d\u9700\u8981\u8c03\u6574\u3002\u4fee\u6539\u540e\u7684\u5185\u5bb9\u5982\u4e0b. 57 [server-group-1] 58 59 # config one or more server id(s) from servers.conf 60 ## multiple server ids separated by comma(s). 61 ## [start, end] for range, including start and end. 62 # this parameter can occurs more than once. 63 # server_ids = [1, 3] 64 server_ids = [1,3] // \u4f7f\u7528\u4e863\u526f\u672c\u7684\u7b56\u7565\uff0c\u67093\u4e2a\u670d\u52a1\u8282\u70b9101/102/103\uff0c\u6240\u4ee5\u8bbe\u5b9a\u4e3a[1,3] 65 66 # the data group id based 1. the formats as: 67 ## * multiple data group ids separated by comma(s). 68 ## * [start, end] for range, including start and end. 69 # this parameter can occurs more than once. 70 data_group_ids = [1, 32] 71 data_group_ids = [33, 64] 72 73 74 [group-cluster] 75 # the default cluster port 76 port = 21014 // \u96c6\u7fa4\u4e4b\u95f4\u7684\u901a\u4fe1\u4f7f\u7528\u7684\u9ed8\u8ba4\u7aef\u53e3\u53f7\uff0c\u4e0d\u7528\u4fee\u6539 77 78 [group-replica] 79 # the default replica port 80 port = 21015 // Master-Slave \u4e4b\u95f4\u540c\u6b65\u6570\u636e\u4f7f\u7528\u7684\u9ed8\u8ba4\u7aef\u53e3\u53f7\uff0c\u4e0d\u7528\u4fee\u6539 81 82 [group-service] 83 # the default service port 84 port = 21016 // \u5bf9Client\u63d0\u4f9b\u670d\u52a1\uff0c\u4f7f\u7528\u7684\u9ed8\u8ba4\u7aef\u53e3\u53f7\uff0c\u4e0d\u7528\u4fee\u6539 85 86 # config a server 87 # section format: [server-$id] 88 # server id is a 32 bits natural number (1, 2, 3 etc.), 89 [server-1] 90 91 # format: host[:port] 92 # host can be an IP address or a hostname 93 # IP address is recommended 94 # can occur more than once 95 host = 192.168.126.101 // \u8282\u70b9101\u7684\u5730\u5740\uff0c\u4f7f\u7528\u9ed8\u8ba4\u7684\u7aef\u53e3\u53f7 96 97 [server-2] 99 host = 192.168.126.102 // \u8282\u70b9102\u7684\u5730\u5740\uff0c\u4f7f\u7528\u9ed8\u8ba4\u7684\u7aef\u53e3\u53f7 100 101 [server-3] 103 host = 192.168.126.103 // \u8282\u70b9103\u7684\u5730\u5740\uff0c\u4f7f\u7528\u9ed8\u8ba4\u7684\u7aef\u53e3\u53f7 \u670d\u52a1\u914d\u7f6e\u6587\u4ef6 \u5728101\u8282\u70b9\u4e0a\uff0c/etc/fastcfs/fstore/server.conf \u548c /etc/fastcfs/fstore/storage.conf. \u9ed8\u8ba4\u5747\u9700\u8981\u4fee\u6539\uff0c\u53ea\u9700\u786e\u8ba4\u4e0bserver.conf\u7684\u914d\u7f6e\u662f\u5426\u6b63\u786e 190 [replica] 191 bind_addr = 192 port = 21015 // \u4fdd\u6301\u4e0efstore/server.conf \u4e2d [group-replica]\u8bbe\u5b9a\u7684port\u503c\u76f8\u540c 193 accept_threads = 1 194 work_threads = 4 195 196 [service] 197 bind_addr = 198 port = 21016 // \u4fdd\u6301\u4e0efstore/server.conf \u4e2d [group-service]\u8bbe\u5b9a\u7684port\u503c\u76f8\u540c 199 accept_threads = 1 200 work_threads = 4 \u628acluster.conf\u6587\u4ef6\u590d\u5236\u5230102-103,201-202 \u8fd95\u53f0\u670d\u52a1\u5668\u4e0a\uff0c\u4fdd\u8bc1\u6240\u6709\u8282\u70b9\u90fd\u80fd\u77e5\u9053\u96c6\u7fa4\u914d\u7f6e scp /etc/fastcfs/fstore/cluster.conf 192.168.126.102:/etc/fastcfs/fstore/ scp /etc/fastcfs/fstore/cluster.conf 192.168.126.103:/etc/fastcfs/fstore/ scp /etc/fastcfs/fstore/cluster.conf 192.168.126.201:/etc/fastcfs/fstore/ scp /etc/fastcfs/fstore/cluster.conf 192.168.126.202:/etc/fastcfs/fstore/","title":"FastStore \u914d\u7f6e"},{"location":"YUMINSTALL-Diy-5nodes-zh_CN/#fastclient","text":"Client \u9700\u8981\u77e5\u9053FastDIR\u548cFastStore\u7684\u96c6\u7fa4\u914d\u7f6e\u6570\u636e\uff0c\u5728\u4e0a\u8ff0scp\u8fc7\u7a0b\u4e2d\uff0c\u5df2\u7ecf\u5206\u522bscp\u5230\u4e86\u5bf9\u5e94\u7684\u76ee\u5f55\u4e0b\uff0c\u4e0d\u9700\u8981\u4fee\u6539. Client \u81ea\u8eab\u7684\u914d\u7f6e\u6587\u4ef6\u4e3a /etc/fastcfs/fcfs/fuse.conf \u5c5e\u4e8e\u670d\u52a1\u914d\u7f6e\u6587\u4ef6\uff0c\u4e5f\u4e0d\u9700\u8981\u4fee\u6539.","title":"FastClient \u914d\u7f6e"},{"location":"YUMINSTALL-Diy-5nodes-zh_CN/#_7","text":"\u5b89\u88c5\u5e76\u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u53ef\u4ee5\u542f\u52a8\u670d\u52a1\u5e76\u9a8c\u8bc1. \u5173\u95ed\u9632\u706b\u5899\uff1a CentOS 8 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5f00\u542f\u9632\u706b\u5899\uff0c\u4f1a\u5bfc\u81f4\u5404\u8282\u70b9\u4e4b\u95f4\u65e0\u6cd5\u8bbf\u95ee\uff0c\u53ef\u6682\u5173\u95ed\u9632\u706b\u5899\u3002 sudo systemctl stop firewalld.service \u542f\u52a8FastDir\uff1a * \u5728101/102/103 \u4e09\u4e2a\u8282\u70b9\u4e0a\uff0c\u6267\u884c\u4e0b\u5217\u547d\u4ee4\u542f\u52a8. \u6ce8\u610f\u5fc5\u987b\u662f3\u4e2a\u8282\u70b9\u90fd\u542f\u52a8\u3002 sudo systemctl restart fastdir \u6216\u8005 sudo /usr/bin/fdir_serverd /etc/fastcfs/fdir/server.conf restart \u67e5\u770b\u65e5\u5fd7\uff0c\u786e\u8ba4\u542f\u52a8\u6210\u529f. $ tail /opt/fastcfs/fdir/logs/fdir_serverd.log [2021-05-14 15:39:36] ERROR - file: connection_pool.c, line: 140, connect to server 192.168.126.102:11011 fail, errno: 113, error info: No route to host [2021-05-14 15:39:36] ERROR - file: connection_pool.c, line: 140, connect to server 192.168.126.103:11011 fail, errno: 113, error info: No route to host [2021-05-14 15:39:36] INFO - file: cluster_relationship.c, line: 668, round 19th select master, alive server count: 1 < server count: 3, the candidate server status: 0 (INIT) does not match the selection rule. you must start ALL servers in the first time, or remove the deprecated server(s) from the config file. try again after 32 seconds. [2021-05-14 15:40:01] INFO - file: cluster_relationship.c, line: 474, the master server id: 3, ip 192.168.126.103:11011 \u65e5\u5fd7\u4e2d\u6709error\u63d0\u793a\uff0c\u662f\u56e0\u4e3a\u9632\u706b\u5899\u5bfc\u81f4\u76843\u4e2a\u8282\u70b9\u65e0\u6cd5\u4e92\u76f8\u901a\u4fe1\u4ea7\u751f\u7684\uff0c\u5173\u95ed\u9632\u706b\u5899\u540eFastDIR\u4f1a\u81ea\u52a8\u8fdb\u884c\u5c1d\u8bd5\u94fe\u63a5\u3002\u4ece\u6700\u540e\u4e00\u884cINFO\u65e5\u5fd7\u53ef\u770b\u5230\uff0c\u670d\u52a1\u5df2\u7ecf\u542f\u52a8\u6210\u529f\u4e86\uff0c\u5e76\u4e14\u9009\u62e9\u4e86103\u8282\u70b9\u4f5c\u4e3aMaster. \u542f\u52a8FastStore: \u4e0eFastDir\u7684\u542f\u52a8\u65b9\u5f0f\u7c7b\u4f3c\uff0c\u5728101/102/103 \u4e09\u4e2a\u8282\u70b9\u4e0a\uff0c\u6267\u884c\u4e0b\u5217\u547d\u4ee4\u542f\u52a8. \u6ce8\u610f\u5fc5\u987b\u662f3\u4e2a\u8282\u70b9\u90fd\u542f\u52a8\u3002 sudo systemctl restart faststore \u6216\u8005 sudo /usr/bin/fs_serverd /etc/fastcfs/fstore/server.conf restart \u67e5\u770b\u65e5\u5fd7\uff0c\u786e\u8ba4\u542f\u52a8\u6210\u529f. [2021-05-14 16:06:08.326966] INFO - file: replication/replication_processor.c, line: 419, connect to replication peer id: 3, 192.168.126.103:21015 successfully [2021-05-14 16:06:08.344415] INFO - file: replication/replication_processor.c, line: 419, connect to replication peer id: 3, 192.168.126.103:21015 successfully [2021-05-14 16:06:08.368437] INFO - file: replica_handler.c, line: 598, replication peer id: 1, 192.168.126.101:21014 join in [2021-05-14 16:06:09.942673] INFO - file: replica_handler.c, line: 598, replication peer id: 1, 192.168.126.101:21014 join in [2021-05-14 16:06:10.374344] INFO - file: recovery/binlog_fetch.c, line: 589, data group id: 1, wait replica channel of master id 1 ready success, waiting count: 2 [2021-05-14 16:06:10.415848] INFO - file: recovery/binlog_fetch.c, line: 589, data group id: 6, wait replica channel of master id 1 ready success, waiting count: 2 \u770b\u5230\u4ee5\u4e0a\u7c7b\u4f3c\u7684\u65e5\u5fd7\uff0c\u5373\u662f\u542f\u52a8\u6210\u529f\u4e86\u3002 \u542f\u52a8FastClient\uff1a \u5728201\u3001202 \u8282\u70b9\u4e0a\u542f\u52a8Client. sudo systemctl restart fastcfs \u6216\u8005 sudo /usr/bin/fcfs_fused /etc/fastcfs/fcfs/fuse.conf restart \u67e5\u770b\u65e5\u5fd7\uff0c\u786e\u8ba4\u542f\u52a8\u6210\u529f $ tail /opt/fastcfs/fcfs/logs/fcfs_fused.log [2021-05-14 16:14:15] INFO - file: sf_nio.c, line: 205, connect to server 192.168.126.101:11012 successfully [2021-05-14 16:14:15] INFO - file: sf_nio.c, line: 205, connect to server 192.168.126.103:11012 successfully [2021-05-14 16:14:15] INFO - file: sf_connection_manager.c, line: 827, [FastDIR] connection manager thread start [2021-05-14 16:14:15] INFO - file: sf_connection_manager.c, line: 827, [FastStore] connection manager thread start [2021-05-14 16:14:55] INFO - file: sf_nio.c, line: 205, connect to server 192.168.126.101:21016 successfully \u67e5\u770b\u6587\u4ef6\u76ee\u5f55\u662f\u5426\u6210\u529f\u6302\u8f7d $ df -h Filesystem Size Used Avail Use% Mounted on devtmpfs 189M 0 189M 0% /dev tmpfs 219M 0 219M 0% /dev/shm tmpfs 219M 6.6M 212M 4% /run tmpfs 219M 0 219M 0% /sys/fs/cgroup /dev/mapper/cs-root 47G 4.9G 43G 11% / /dev/sda1 1014M 242M 773M 24% /boot tmpfs 44M 4.0K 44M 1% /run/user/1000 /dev/fuse 38G 0 38G 0% /opt/fastcfs/fuse // \u8fd9\u662f\u5373\u662fFastCFS\u6302\u8f7d\u7684\u6839\u76ee\u5f55 \u9a8c\u8bc1 \uff1a\u5728201\u8282\u70b9\u4e0a\u521b\u5efa\u6587\u4ef6 [first@192.168.126.201 /opt/fastcfs/fuse] $ mkdir -p abc/123 [first@192.168.126.201 /opt/fastcfs/fuse] $ touch abc/123/demo.txt [first@192.168.126.201 /opt/fastcfs/fuse] $ vim abc/123/demo.txt [first@192.168.126.201 /opt/fastcfs/fuse] $ ll abc/123 total 1 -rw-rw-r--+ 1 first first 13 May 14 16:22 demo.txt \u5728202\u8282\u70b9\u4e0a\u67e5\u770b\u8be5\u6587\u4ef6\uff0c\u53ef\u89c1\u6587\u4ef6\u5df2\u7ecf\u521b\u5efa\u6210\u529f\u4e86 [first@192.168.126.202 /opt/fastcfs/fuse] $ tail abc/123/demo.txt hello world [first@192.168.126.202 /opt/fastcfs/fuse]","title":"\u542f\u52a8\u670d\u52a1"},{"location":"YUMINSTALL-Diy-5nodes-zh_CN/#_8","text":"\u67e5\u770bFastDir\u96c6\u7fa4\u72b6\u6001 $ fdir_cluster_stat server_id: 1, host: 192.168.126.101:11012, status: 23 (ACTIVE), is_master: 0 server_id: 2, host: 192.168.126.102:11012, status: 23 (ACTIVE), is_master: 0 server_id: 3, host: 192.168.126.103:11012, status: 23 (ACTIVE), is_master: 1 server count: 3 \u67e5\u770b\u5355\u4e2aFastDir\u8282\u70b9\u72b6\u6001 [first@192.168.126.201 /etc/fastcfs/fcfs] $ fdir_service_stat 192.168.126.101:11012 server_id: 1 status: 23 (ACTIVE) is_master: false connection : {current: 4, max: 4} binlog : {current_version: 24} dentry : {current_inode_sn: 1000009, ns_count: 1, dir_count: 3, file_count: 1} \u67e5\u770bFastStore\u96c6\u7fa4\u72b6\u6001 $ fs_cluster_stat | more data_group_id: 1 server_id: 1, host: 192.168.126.101:21016, status: 5 (ACTIVE), is_preseted: 1, is_master: 1, data_version: 0 server_id: 2, host: 192.168.126.102:21016, status: 5 (ACTIVE), is_preseted: 0, is_master: 0, data_version: 0 server_id: 3, host: 192.168.126.103:21016, status: 5 (ACTIVE), is_preseted: 0, is_master: 0, data_version: 0 data_group_id: 2 server_id: 1, host: 192.168.126.101:21016, status: 5 (ACTIVE), is_preseted: 0, is_master: 0, data_version: 0 server_id: 2, host: 192.168.126.102:21016, status: 5 (ACTIVE), is_preseted: 1, is_master: 1, data_version: 0 ..................... \u67e5\u770b\u78c1\u76d8\u4f7f\u7528\u60c5\u51b5 df -h","title":"\u670d\u52a1\u76d1\u63a7"},{"location":"YUMINSTALL-zh_CN/","text":"yum\u5b89\u88c5\u65b9\u5f0f \u00b6 yum \u5b89\u88c5\u65b9\u5f0f\u4e3b\u8981\u7528\u4e8e\u6d4b\u8bd5\u548c\u751f\u4ea7\u73af\u5883\u642d\u5efa\u3002 1. \u5b89\u88c5FastOS.repo \u00b6 \u5148\u5b89\u88c5FastOS.repo yum\u6e90\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u5b89\u88c5FastCFS\u76f8\u5173\u8f6f\u4ef6\u5305\u4e86\u3002 CentOS 7 rpm -ivh http://www.fastken.com/yumrepo/el7/x86_64/FastOSrepo-1.0.0-1.el7.centos.x86_64.rpm CentOS 8 rpm -ivh http://www.fastken.com/yumrepo/el8/x86_64/FastOSrepo-1.0.0-1.el8.x86_64.rpm 2. fastDIR server\u5b89\u88c5 \u00b6 \u5728\u9700\u8981\u8fd0\u884c fastDIR server\u7684\u670d\u52a1\u5668\u4e0a\u6267\u884c\uff1a yum install fastDIR-server -y 3. faststore server\u5b89\u88c5 \u00b6 \u5728\u9700\u8981\u8fd0\u884c faststore server\u7684\u670d\u52a1\u5668\u4e0a\u6267\u884c\uff1a yum install faststore-server -y 4. FastCFS\u5ba2\u6237\u7aef\u5b89\u88c5 \u00b6 \u5728\u9700\u8981\u4f7f\u7528FastCFS\u5b58\u50a8\u670d\u52a1\u7684\u673a\u5668\uff08\u5373FastCFS\u5ba2\u6237\u7aef\uff09\u4e0a\u6267\u884c\uff1a yum remove fuse -y yum install FastCFS-fused -y \u6ce8\uff1a * fuse\u4e3a\u8001\u7248\u672c\u7684\u5305\uff08fuse2.x\uff09\uff0c\u9700\u8981\u5378\u8f7d\u624d\u53ef\u4ee5\u6210\u529f\u5b89\u88c5FastCFS-fused\u4f9d\u8d56\u7684fuse3\uff1b * \u7b2c\u4e00\u6b21\u5b89\u88c5\u624d\u9700\u8981\u5378\u8f7dfuse\u5305\uff0c\u4ee5\u540e\u5c31\u4e0d\u7528\u6267\u884c\u4e86\u3002 5. Auth server\u5b89\u88c5\uff08\u53ef\u9009\uff09 \u00b6 \u5982\u679c\u9700\u8981\u5b58\u50a8\u6c60\u6216\u8bbf\u95ee\u63a7\u5236\uff0c\u5219\u9700\u8981\u5b89\u88c5\u672c\u6a21\u5757\u3002 \u5728\u9700\u8981\u8fd0\u884c Auth server\u7684\u670d\u52a1\u5668\u4e0a\u6267\u884c\uff1a yum install FastCFS-auth-server -y \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u9700\u8981\u4fee\u6539\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u670d\u52a1\u624d\u53ef\u4ee5\u6b63\u5e38\u542f\u52a8\u3002\u8bf7\u53c2\u9605 \u914d\u7f6e\u6307\u5357 FastCFS\u540e\u53f0\u7a0b\u5e8f\u53ef\u901a\u8fc7systemd\u7ba1\u7406\u3002systemd\u670d\u52a1\u540d\u79f0\u5982\u4e0b\uff1a * fastdir\uff1a \u76ee\u5f55\u670d\u52a1\uff0c\u5bf9\u5e94\u7a0b\u5e8f\u4e3a fdir_serverd * faststore\uff1a\u5b58\u50a8\u670d\u52a1\uff0c\u5bf9\u5e94\u7a0b\u5e8f\u4e3a fs_serverd * fastcfs\uff1a FUSE\u540e\u53f0\u670d\u52a1\uff0c\u5bf9\u5e94\u7a0b\u5e8f\u4e3a fcfs_fused * fastauth\uff1a \u8ba4\u8bc1\u670d\u52a1\uff0c\u5bf9\u5e94\u7a0b\u5e8f\u4e3a fcfs_authd \u53ef\u4ee5\u4f7f\u7528\u6807\u51c6\u7684systemd\u547d\u4ee4\u5bf9\u4e0a\u8ff04\u4e2a\u670d\u52a1\u8fdb\u884c\u7ba1\u7406\uff0c\u4f8b\u5982\uff1a systemctl restart fastdir systemctl restart faststore systemctl restart fastcfs systemctl restart fastauth 6. \u4e00\u4e2a\u5305\u542b5\u4e2a\u8282\u70b9\u7684\u5b89\u88c5\u8fc7\u7a0b\u7684\u8be6\u7ec6\u6587\u6863 \u00b6 \u8bf7\u53c2\u4e0e 5\u8282\u70b9\u5b89\u88c5\u6587\u6863","title":"YUMINSTALL zh CN"},{"location":"YUMINSTALL-zh_CN/#yum","text":"yum \u5b89\u88c5\u65b9\u5f0f\u4e3b\u8981\u7528\u4e8e\u6d4b\u8bd5\u548c\u751f\u4ea7\u73af\u5883\u642d\u5efa\u3002","title":"yum\u5b89\u88c5\u65b9\u5f0f"},{"location":"YUMINSTALL-zh_CN/#1-fastosrepo","text":"\u5148\u5b89\u88c5FastOS.repo yum\u6e90\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u5b89\u88c5FastCFS\u76f8\u5173\u8f6f\u4ef6\u5305\u4e86\u3002 CentOS 7 rpm -ivh http://www.fastken.com/yumrepo/el7/x86_64/FastOSrepo-1.0.0-1.el7.centos.x86_64.rpm CentOS 8 rpm -ivh http://www.fastken.com/yumrepo/el8/x86_64/FastOSrepo-1.0.0-1.el8.x86_64.rpm","title":"1. \u5b89\u88c5FastOS.repo"},{"location":"YUMINSTALL-zh_CN/#2-fastdir-server","text":"\u5728\u9700\u8981\u8fd0\u884c fastDIR server\u7684\u670d\u52a1\u5668\u4e0a\u6267\u884c\uff1a yum install fastDIR-server -y","title":"2. fastDIR server\u5b89\u88c5"},{"location":"YUMINSTALL-zh_CN/#3-faststore-server","text":"\u5728\u9700\u8981\u8fd0\u884c faststore server\u7684\u670d\u52a1\u5668\u4e0a\u6267\u884c\uff1a yum install faststore-server -y","title":"3. faststore server\u5b89\u88c5"},{"location":"YUMINSTALL-zh_CN/#4-fastcfs","text":"\u5728\u9700\u8981\u4f7f\u7528FastCFS\u5b58\u50a8\u670d\u52a1\u7684\u673a\u5668\uff08\u5373FastCFS\u5ba2\u6237\u7aef\uff09\u4e0a\u6267\u884c\uff1a yum remove fuse -y yum install FastCFS-fused -y \u6ce8\uff1a * fuse\u4e3a\u8001\u7248\u672c\u7684\u5305\uff08fuse2.x\uff09\uff0c\u9700\u8981\u5378\u8f7d\u624d\u53ef\u4ee5\u6210\u529f\u5b89\u88c5FastCFS-fused\u4f9d\u8d56\u7684fuse3\uff1b * \u7b2c\u4e00\u6b21\u5b89\u88c5\u624d\u9700\u8981\u5378\u8f7dfuse\u5305\uff0c\u4ee5\u540e\u5c31\u4e0d\u7528\u6267\u884c\u4e86\u3002","title":"4. FastCFS\u5ba2\u6237\u7aef\u5b89\u88c5"},{"location":"YUMINSTALL-zh_CN/#5-auth-server","text":"\u5982\u679c\u9700\u8981\u5b58\u50a8\u6c60\u6216\u8bbf\u95ee\u63a7\u5236\uff0c\u5219\u9700\u8981\u5b89\u88c5\u672c\u6a21\u5757\u3002 \u5728\u9700\u8981\u8fd0\u884c Auth server\u7684\u670d\u52a1\u5668\u4e0a\u6267\u884c\uff1a yum install FastCFS-auth-server -y \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u9700\u8981\u4fee\u6539\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u670d\u52a1\u624d\u53ef\u4ee5\u6b63\u5e38\u542f\u52a8\u3002\u8bf7\u53c2\u9605 \u914d\u7f6e\u6307\u5357 FastCFS\u540e\u53f0\u7a0b\u5e8f\u53ef\u901a\u8fc7systemd\u7ba1\u7406\u3002systemd\u670d\u52a1\u540d\u79f0\u5982\u4e0b\uff1a * fastdir\uff1a \u76ee\u5f55\u670d\u52a1\uff0c\u5bf9\u5e94\u7a0b\u5e8f\u4e3a fdir_serverd * faststore\uff1a\u5b58\u50a8\u670d\u52a1\uff0c\u5bf9\u5e94\u7a0b\u5e8f\u4e3a fs_serverd * fastcfs\uff1a FUSE\u540e\u53f0\u670d\u52a1\uff0c\u5bf9\u5e94\u7a0b\u5e8f\u4e3a fcfs_fused * fastauth\uff1a \u8ba4\u8bc1\u670d\u52a1\uff0c\u5bf9\u5e94\u7a0b\u5e8f\u4e3a fcfs_authd \u53ef\u4ee5\u4f7f\u7528\u6807\u51c6\u7684systemd\u547d\u4ee4\u5bf9\u4e0a\u8ff04\u4e2a\u670d\u52a1\u8fdb\u884c\u7ba1\u7406\uff0c\u4f8b\u5982\uff1a systemctl restart fastdir systemctl restart faststore systemctl restart fastcfs systemctl restart fastauth","title":"5. Auth server\u5b89\u88c5\uff08\u53ef\u9009\uff09"},{"location":"YUMINSTALL-zh_CN/#6-5","text":"\u8bf7\u53c2\u4e0e 5\u8282\u70b9\u5b89\u88c5\u6587\u6863","title":"6. \u4e00\u4e2a\u5305\u542b5\u4e2a\u8282\u70b9\u7684\u5b89\u88c5\u8fc7\u7a0b\u7684\u8be6\u7ec6\u6587\u6863"},{"location":"benchmark/","text":"FastCFS vs. Ceph benchmark under 3 nodes cluster (three copies of data) \u00b6 read/write type fio jobs IOPS\uff084KB Block\uff09 ratio FastCFS Ceph sequential write 4 32,256 5,120 630% 8 55,296 8,371 661% 16 76,800 11,571 664% rand write 4 6,374 4,454 143% 8 11,264 6,400 176% 16 16,870 7,091 238% sequential read 4 34,880 14,848 235% 8 62,751 24,883 252% 16 86,508 38,912 222% rand read 4 12,527 12,160 103% 8 23,610 22,220 106% 16 41,790 36,608 114% more info see Chinese doc: FastCFS vs. Ceph benchmark detail","title":"Benchmarks"},{"location":"benchmark/#fastcfs-vs-ceph-benchmark-under-3-nodes-cluster-three-copies-of-data","text":"read/write type fio jobs IOPS\uff084KB Block\uff09 ratio FastCFS Ceph sequential write 4 32,256 5,120 630% 8 55,296 8,371 661% 16 76,800 11,571 664% rand write 4 6,374 4,454 143% 8 11,264 6,400 176% 16 16,870 7,091 238% sequential read 4 34,880 14,848 235% 8 62,751 24,883 252% 16 86,508 38,912 222% rand read 4 12,527 12,160 103% 8 23,610 22,220 106% 16 41,790 36,608 114% more info see Chinese doc: FastCFS vs. Ceph benchmark detail","title":"FastCFS vs. Ceph benchmark under 3 nodes cluster (three copies of data)"},{"location":"cluster-expansion-zh_CN/","text":"FastCFS\u96c6\u7fa4\u6269\u5bb9\u624b\u518c \u00b6 FastCFS\u96c6\u7fa4\u4e09\u4e2a\u670d\u52a1\u7ec4\u4ef6\uff1afauth\u3001fdir \u548cfstore\uff0c\u4e0b\u9762\u5c06\u5206\u522b\u4ecb\u7ecd\u8fd9\u4e09\u4e2a\u670d\u52a1\u7ec4\u4ef6\u7684\u6269\u5bb9\u65b9\u6cd5\u548c\u6b65\u9aa4\u3002 1. fauth\uff08\u8ba4\u8bc1\u670d\u52a1\uff09 \u00b6 \u8ba4\u8bc1\u670d\u52a1\u7684\u7528\u6237\u548c\u6743\u9650\u7b49\u6570\u636e\u4fdd\u5b58\u5728fdir\u4e2d\uff0c\u670d\u52a1\u91c7\u7528\u70ed\u5907\u6a21\u5f0f\uff0c\u5efa\u8bae\u90e8\u7f722 ~ 3\u4e2a\u670d\u52a1\u5668\uff08\u8282\u70b9\uff09\uff0c\u4e3b\u8282\u70b9\u5931\u6548\u540e\u4f1a\u81ea\u52a8\u5207\u6362\u5230\u5907\u7528\u8282\u70b9\u3002 \u56e0\u8ba4\u8bc1\u670d\u52a1\u5668\u81ea\u8eab\u4e0d\u4fdd\u5b58\u6570\u636e\uff0c\u56e0\u6b64\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u8981\u968f\u65f6\u589e\u52a0\u6216\u51cf\u5c11\u8ba4\u8bc1\u670d\u52a1\u5668\u3002 2. fdir\uff08\u76ee\u5f55\u670d\u52a1\uff09 \u00b6 FastCFS\u76ee\u5f55\u670d\u52a1\u7528\u4e8e\u6587\u4ef6\u5143\u6570\u636e\u7ba1\u7406\uff0c\u76ee\u524d\u53ea\u652f\u6301\u4e00\u7ec4\u670d\u52a1\u5668\uff0c\u4f7f\u7528\u5e38\u89c4\u670d\u52a1\u5668\uff08\u598264GB\u5185\u5b58 + SSD\uff09\u53ef\u4ee5\u652f\u6301\u767e\u4ebf\u7ea7\u6587\u4ef6\u3002 \u8be6\u60c5\u53c2\u89c1 \u9ad8\u6027\u80fd\u5927\u5bb9\u91cf\u5206\u5e03\u5f0f\u76ee\u5f55\u670d\u52a1FastDIR\u7b80\u4ecb \u5efa\u8bae\u5c06fdir\u90e8\u7f72\u57283\u53f0\u670d\u52a1\u5668\u4e0a\uff0c\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u8981\u968f\u65f6\u589e\u52a0\u6216\u51cf\u5c11fdir\u670d\u52a1\u5668\uff0cfdir\u5c06\u57fa\u4e8ebinlog\u81ea\u52a8\u5b8c\u6210\u6570\u636e\u540c\u6b65\u3002 3. fstore\uff08\u6570\u636e\u5b58\u50a8\uff09 \u00b6 fstore \u91c7\u7528\u5206\u7ec4\u65b9\u5f0f\u4fdd\u5b58\u6587\u4ef6\u5185\u5bb9\u3002\u4e3a\u4e86\u4fbf\u4e8e\u6269\u5bb9\uff0cFastCFS\u5f15\u5165\u4e86\u6570\u636e\u5206\u7ec4\uff08DG\uff09\u7684\u6982\u5ff5\u3002 \u63094MB\u5206\u5757\u7684\u6587\u4ef6\u5185\u5bb9\uff08\u6587\u4ef6\u5757\uff09\uff0c\u6839\u636e\u5176hash code\uff08\u6587\u4ef6ID + \u6587\u4ef6\u5757\u504f\u79fb\u91cf\uff09\uff0c\u8def\u7531\u5230\u5bf9\u5e94\u7684\u6570\u636e\u5206\u7ec4\u3002\u8ba1\u7b97\u516c\u5f0f\u5982\u4e0b\uff1a DGI = HashCode % DGC DGI\uff1a\u6570\u636e\u5206\u7ec4\u7d22\u5f15\u53f7 HashCode\uff1a\u6587\u4ef6\u5206\u5757\u54c8\u5e0c\u503c DGC\uff1a\u6570\u636e\u5206\u7ec4\u603b\u6570 \u6570\u636e\u5206\u7ec4\u662f\u903b\u8f91\u6216\u865a\u62df\u6982\u5ff5\uff0c\u6620\u5c04\u5230\u7684\u7269\u7406\u6216\u5b9e\u4f53\u6982\u5ff5\u662f\u670d\u52a1\u5668\u5206\u7ec4\uff08SG\uff09\uff0c\u4e8c\u8005\u662f\u591a\u5bf9\u4e00\u5173\u7cfb\uff0c\u5373\uff1a\u4e00\u4e2a\u670d\u52a1\u5668\u5206\u7ec4\uff08SG\uff09\u53ef\u4ee5\u5bb9\u7eb3\u591a\u4e2a\u6570\u636e\u5206\u7ec4\uff08DG\uff09\u3002 fstore\u96c6\u7fa4\u7684\u670d\u52a1\u5668\u5206\u7ec4\u603b\u6570\uff0c\u82f1\u6587\u7f29\u5199\u4e3aSGC\u3002 DG \u548cSG\u6620\u5c04\u5173\u7cfb\u914d\u7f6e\u5728fstore\u7684cluster.conf\u4e2d\uff0c\u914d\u7f6e\u793a\u4f8b\u7247\u6bb5\uff08\u7b80\u6d01\u8d77\u89c1\uff0c\u53ea\u914d\u7f6e\u4e86\u4e00\u4e2a3\u526f\u672c\u7684SG\uff09\uff1a # SGC server_group_count = 1 # DGC data_group_count = 256 # \u914d\u7f6eSG1 [server-group-1] server_ids = [1-3] data_group_ids = [1, 256] fstore\u96c6\u7fa4\u6269\u5bb9\uff0c\u53ef\u4ee5\u4e00\u6b21\u589e\u52a0\u4e00\u4e2aSG\u3002\u5f53\u96c6\u7fa4\u89c4\u6a21\u8f83\u5c0f\uff08\u6bd4\u5982SGC\u5c0f\u4e8e\u7b49\u4e8e4\uff09\u65f6\uff0c\u5efa\u8bae\u4e00\u6b21\u6269\u5bb9\u4e00\u500d\uff08SGC\u7ffb\u756a\uff09\u3002 DGC\u4e00\u65e6\u786e\u5b9a\u5c31\u4e0d\u53ef\u66f4\u6539\uff0c\u9664\u975e\u5efa\u7acb\u65b0\u96c6\u7fa4\u3002\u56e0\u6b64\u5728\u521d\u59cb\u5316\u96c6\u7fa4\u65f6\uff0c\u9700\u8981\u786e\u5b9a\u597d\u6570\u636e\u5206\u7ec4\u603b\u6570\uff08DGC\uff09\uff0c\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u53d1\u5c55\u89c4\u5212\uff0c\u5145\u5206\u9884\u4f30\u51faDGC\u3002 \u6bd4\u5982\u6839\u636e\u5b58\u50a8\u91cf\u9884\u4f305\u5e74\u540e\u9700\u8981\u7684\u670d\u52a1\u5668\u5206\u7ec4\u6570\uff08SGC\uff09\u4e3a20\uff0c\u4e3a\u4e86\u5145\u5206\u53d1\u6325\u591a\u6838\u6027\u80fd\uff0c\u6bcf\u53f0\u670d\u52a1\u5668\u4e0a\u8dd132\u4e2a\u6570\u636e\u5206\u7ec4\uff08DG\uff09\uff0cDGC\u4e3a20 * 32 = 640\uff0c\u63092\u6b21\u5e42\u5411\u4e0a\u5bf9\u9f50\uff0c\u6700\u7ec8\u914d\u7f6e\u4e3a1024\u3002 \u53cb\u60c5\u63d0\u793a\uff1a\u5efa\u8bae\u751f\u4ea7\u73af\u5883DGC\u81f3\u5c11\u914d\u7f6e\u4e3a256\u3002 fstore\u5728\u7ebf\u6269\u5bb9\u5206\u4e3a\u4e24\u4e2a\u6b65\u9aa4\u4fee\u6539cluster.conf\uff1a 1. \u589e\u52a0\u6269\u5bb9\u7684SG \u548c\u8fc1\u79fb\u8fc7\u53bb\u7684DG\u6620\u5c04\uff1b 2. \u65b0\u589e\u7684SG\u81ea\u52a8\u540c\u6b65\u5b8c\u6210\u540e\uff0c\u5c06\u539f\u6709SG\u8fc1\u79fb\u51fa\u53bb\u7684DG\u6620\u5c04\u5220\u9664\u3002 \u4e0a\u8ff0\u4e24\u4e2a\u6b65\u9aa4\u5c06cluster.conf\u4fee\u6539\u5b8c\u6210\u540e\uff0c\u90fd\u9700\u8981\u5c06cluster.conf\u5206\u53d1\u5230fstore\u96c6\u7fa4\u548cfuseclient\uff0c\u7136\u540e\u91cd\u542ffstore\u96c6\u7fa4\u548cfuseclient\u3002\u63a8\u8350\u91cd\u542f\u6b65\u9aa4\u5982\u4e0b\uff1a 1. \u505c\u6b62fuseclient 2. \u91cd\u542ffstore\u96c6\u7fa4 3. \u542f\u52a8fuseclient \u5c06\u4e0a\u8ff0\u914d\u7f6e\u793a\u4f8b\u76841\u4e2aSG\u6269\u5bb9\u4e3a2\u4e2aSG\uff08\u5747\u91c7\u75283\u526f\u672c\uff09\uff0c\u6211\u4eec\u5982\u4f55\u8c03\u6574cluster.conf\uff1a \u6b65\u9aa41 \u00b6 \u4fee\u6539\u540e\u7684cluster.conf\u5185\u5bb9\u7247\u6bb5\u5982\u4e0b\uff1a # SGC\uff0c\u75311\u6269\u5bb9\u4e3a2 server_group_count = 2 # DGC data_group_count = 256 # \u4fee\u6539DG\u6620\u5c04\uff0c\u5c06 [129, 256]\u8fc1\u79fb\u81f3SG2 [server-group-1] server_ids = [1-3] data_group_ids = [1, 128] # \u914d\u7f6eSG2 # \u5fc5\u987b\u52a0\u4e0aserver [1-3]\u7528\u4e8e\u540c\u6b65\u5df2\u6709\u6570\u636e [server-group-2] server_ids = [1-6] data_group_ids = [129, 256] \u5c06cluster.conf\u5206\u53d1\u5230fstore\u96c6\u7fa4\u6240\u6709\u670d\u52a1\u5668\u4ee5\u53ca\u6240\u6709fuseclient\u540e\uff0c\u91cd\u542ffstore\u96c6\u7fa4\u548cfuseclient\u3002 \u7b49\u5f85\u65b0\u589e\u7684SG\u540c\u6b65\u5b8c\u6210\uff0c\u7136\u540e\u8fdb\u5165\u6b65\u9aa42\u3002 \u53cb\u60c5\u63d0\u793a\uff1a \u6570\u636e\u540c\u6b65\u8fc7\u7a0b\u4e2dfstore\u96c6\u7fa4\u6b63\u5e38\u63d0\u4f9b\u670d\u52a1\uff1b \u53ef\u4ee5\u4f7f\u7528\u5de5\u5177 fs_cluster_stat \u67e5\u770bfstore\u96c6\u7fa4\u72b6\u6001\uff0c\u6bd4\u5982\uff1a # \u67e5\u770bACTIVE\u5217\u8868\uff0c\u786e\u4fdd\u6240\u6709\u670d\u52a1\u5668\u72b6\u6001\u4e3aACTIVE\uff0c\u786e\u8ba4\u4e00\u4e0b\u6700\u540e\u4e00\u884c\u8f93\u51fa\u7684\u603b\u6570 fs_cluster_stat -A # \u67e5\u770b\u975eACTIVE\u5217\u8868\uff0c\u786e\u4fdd\u8f93\u51fa\u4e3a\u7a7a fs_cluster_stat -N # \u62bd\u67e5\u67d0\u4e2a\u6570\u636e\u5206\u7ec4\uff08\u5982ID\u4e3a256\uff09\u7684ACTIVE\u72b6\u6001\uff0c\u786e\u4fdd\u5168\u90e8\u4e3aACTIVE fs_cluster_stat -g 256 # \u67e5\u770b\u5e2e\u52a9 fs_cluster_stat -h \u6b65\u9aa42 \u00b6 \u4fee\u6539\u540e\u7684cluster.conf\u5185\u5bb9\u7247\u6bb5\u5982\u4e0b\uff1a # SGC server_group_count = 2 # DGC data_group_count = 256 [server-group-1] server_ids = [1-3] data_group_ids = [1, 128] # \u53bb\u6389server [1-3] [server-group-2] server_ids = [4-6] data_group_ids = [129, 256] \u5c06cluster.conf\u5206\u53d1\u5230fstore\u96c6\u7fa4\u6240\u6709\u670d\u52a1\u5668\u4ee5\u53ca\u6240\u6709fuseclient\u540e\uff0c\u91cd\u542ffstore\u96c6\u7fa4\u548cfuseclient \u4e3a\u4e86\u6e05\u9664\u8fc1\u79fb\u51fa\u53bb\u7684\u6570\u636e\u5360\u7528\u7a7a\u95f4\uff0cV3.2\u652f\u6301\u6e05\u9664\u8fc1\u79fb\u51fa\u53bb\u7684replica\u548cslice binlog\uff0c\u542f\u52a8 fs_serverd\u65f6\u5e26\u4e0a\u53c2\u6570 --migrate-clean \u5373\u53ef\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a /usr/bin/fs_serverd /etc/fastcfs/fstore/server.conf restart --migrate-clean \u53cb\u60c5\u63d0\u793a\uff1a \u914d\u7f6e\u6587\u4ef6\u5206\u53d1\u548c\u7a0b\u5e8f\u542f\u505c\u53ef\u4ee5\u4f7f\u7528fcfs.sh\uff0c\u4f7f\u7528\u8bf4\u660e\u53c2\u89c1 FastCFS\u96c6\u7fa4\u8fd0\u7ef4\u5de5\u5177 \u6b65\u9aa41\u548c2\u91cd\u542ffstore\u96c6\u7fa4\u548cfuseclient\u7684\u8fc7\u7a0b\uff0c\u4f1a\u5bfc\u81f4\u670d\u52a1\u4e0d\u53ef\u7528\uff0c\u5efa\u8bae\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\u8fdb\u884c","title":"FastCFS\u96c6\u7fa4\u6269\u5bb9\u624b\u518c"},{"location":"cluster-expansion-zh_CN/#fastcfs","text":"FastCFS\u96c6\u7fa4\u4e09\u4e2a\u670d\u52a1\u7ec4\u4ef6\uff1afauth\u3001fdir \u548cfstore\uff0c\u4e0b\u9762\u5c06\u5206\u522b\u4ecb\u7ecd\u8fd9\u4e09\u4e2a\u670d\u52a1\u7ec4\u4ef6\u7684\u6269\u5bb9\u65b9\u6cd5\u548c\u6b65\u9aa4\u3002","title":"FastCFS\u96c6\u7fa4\u6269\u5bb9\u624b\u518c"},{"location":"cluster-expansion-zh_CN/#1-fauth","text":"\u8ba4\u8bc1\u670d\u52a1\u7684\u7528\u6237\u548c\u6743\u9650\u7b49\u6570\u636e\u4fdd\u5b58\u5728fdir\u4e2d\uff0c\u670d\u52a1\u91c7\u7528\u70ed\u5907\u6a21\u5f0f\uff0c\u5efa\u8bae\u90e8\u7f722 ~ 3\u4e2a\u670d\u52a1\u5668\uff08\u8282\u70b9\uff09\uff0c\u4e3b\u8282\u70b9\u5931\u6548\u540e\u4f1a\u81ea\u52a8\u5207\u6362\u5230\u5907\u7528\u8282\u70b9\u3002 \u56e0\u8ba4\u8bc1\u670d\u52a1\u5668\u81ea\u8eab\u4e0d\u4fdd\u5b58\u6570\u636e\uff0c\u56e0\u6b64\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u8981\u968f\u65f6\u589e\u52a0\u6216\u51cf\u5c11\u8ba4\u8bc1\u670d\u52a1\u5668\u3002","title":"1. fauth\uff08\u8ba4\u8bc1\u670d\u52a1\uff09"},{"location":"cluster-expansion-zh_CN/#2-fdir","text":"FastCFS\u76ee\u5f55\u670d\u52a1\u7528\u4e8e\u6587\u4ef6\u5143\u6570\u636e\u7ba1\u7406\uff0c\u76ee\u524d\u53ea\u652f\u6301\u4e00\u7ec4\u670d\u52a1\u5668\uff0c\u4f7f\u7528\u5e38\u89c4\u670d\u52a1\u5668\uff08\u598264GB\u5185\u5b58 + SSD\uff09\u53ef\u4ee5\u652f\u6301\u767e\u4ebf\u7ea7\u6587\u4ef6\u3002 \u8be6\u60c5\u53c2\u89c1 \u9ad8\u6027\u80fd\u5927\u5bb9\u91cf\u5206\u5e03\u5f0f\u76ee\u5f55\u670d\u52a1FastDIR\u7b80\u4ecb \u5efa\u8bae\u5c06fdir\u90e8\u7f72\u57283\u53f0\u670d\u52a1\u5668\u4e0a\uff0c\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u8981\u968f\u65f6\u589e\u52a0\u6216\u51cf\u5c11fdir\u670d\u52a1\u5668\uff0cfdir\u5c06\u57fa\u4e8ebinlog\u81ea\u52a8\u5b8c\u6210\u6570\u636e\u540c\u6b65\u3002","title":"2. fdir\uff08\u76ee\u5f55\u670d\u52a1\uff09"},{"location":"cluster-expansion-zh_CN/#3-fstore","text":"fstore \u91c7\u7528\u5206\u7ec4\u65b9\u5f0f\u4fdd\u5b58\u6587\u4ef6\u5185\u5bb9\u3002\u4e3a\u4e86\u4fbf\u4e8e\u6269\u5bb9\uff0cFastCFS\u5f15\u5165\u4e86\u6570\u636e\u5206\u7ec4\uff08DG\uff09\u7684\u6982\u5ff5\u3002 \u63094MB\u5206\u5757\u7684\u6587\u4ef6\u5185\u5bb9\uff08\u6587\u4ef6\u5757\uff09\uff0c\u6839\u636e\u5176hash code\uff08\u6587\u4ef6ID + \u6587\u4ef6\u5757\u504f\u79fb\u91cf\uff09\uff0c\u8def\u7531\u5230\u5bf9\u5e94\u7684\u6570\u636e\u5206\u7ec4\u3002\u8ba1\u7b97\u516c\u5f0f\u5982\u4e0b\uff1a DGI = HashCode % DGC DGI\uff1a\u6570\u636e\u5206\u7ec4\u7d22\u5f15\u53f7 HashCode\uff1a\u6587\u4ef6\u5206\u5757\u54c8\u5e0c\u503c DGC\uff1a\u6570\u636e\u5206\u7ec4\u603b\u6570 \u6570\u636e\u5206\u7ec4\u662f\u903b\u8f91\u6216\u865a\u62df\u6982\u5ff5\uff0c\u6620\u5c04\u5230\u7684\u7269\u7406\u6216\u5b9e\u4f53\u6982\u5ff5\u662f\u670d\u52a1\u5668\u5206\u7ec4\uff08SG\uff09\uff0c\u4e8c\u8005\u662f\u591a\u5bf9\u4e00\u5173\u7cfb\uff0c\u5373\uff1a\u4e00\u4e2a\u670d\u52a1\u5668\u5206\u7ec4\uff08SG\uff09\u53ef\u4ee5\u5bb9\u7eb3\u591a\u4e2a\u6570\u636e\u5206\u7ec4\uff08DG\uff09\u3002 fstore\u96c6\u7fa4\u7684\u670d\u52a1\u5668\u5206\u7ec4\u603b\u6570\uff0c\u82f1\u6587\u7f29\u5199\u4e3aSGC\u3002 DG \u548cSG\u6620\u5c04\u5173\u7cfb\u914d\u7f6e\u5728fstore\u7684cluster.conf\u4e2d\uff0c\u914d\u7f6e\u793a\u4f8b\u7247\u6bb5\uff08\u7b80\u6d01\u8d77\u89c1\uff0c\u53ea\u914d\u7f6e\u4e86\u4e00\u4e2a3\u526f\u672c\u7684SG\uff09\uff1a # SGC server_group_count = 1 # DGC data_group_count = 256 # \u914d\u7f6eSG1 [server-group-1] server_ids = [1-3] data_group_ids = [1, 256] fstore\u96c6\u7fa4\u6269\u5bb9\uff0c\u53ef\u4ee5\u4e00\u6b21\u589e\u52a0\u4e00\u4e2aSG\u3002\u5f53\u96c6\u7fa4\u89c4\u6a21\u8f83\u5c0f\uff08\u6bd4\u5982SGC\u5c0f\u4e8e\u7b49\u4e8e4\uff09\u65f6\uff0c\u5efa\u8bae\u4e00\u6b21\u6269\u5bb9\u4e00\u500d\uff08SGC\u7ffb\u756a\uff09\u3002 DGC\u4e00\u65e6\u786e\u5b9a\u5c31\u4e0d\u53ef\u66f4\u6539\uff0c\u9664\u975e\u5efa\u7acb\u65b0\u96c6\u7fa4\u3002\u56e0\u6b64\u5728\u521d\u59cb\u5316\u96c6\u7fa4\u65f6\uff0c\u9700\u8981\u786e\u5b9a\u597d\u6570\u636e\u5206\u7ec4\u603b\u6570\uff08DGC\uff09\uff0c\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u53d1\u5c55\u89c4\u5212\uff0c\u5145\u5206\u9884\u4f30\u51faDGC\u3002 \u6bd4\u5982\u6839\u636e\u5b58\u50a8\u91cf\u9884\u4f305\u5e74\u540e\u9700\u8981\u7684\u670d\u52a1\u5668\u5206\u7ec4\u6570\uff08SGC\uff09\u4e3a20\uff0c\u4e3a\u4e86\u5145\u5206\u53d1\u6325\u591a\u6838\u6027\u80fd\uff0c\u6bcf\u53f0\u670d\u52a1\u5668\u4e0a\u8dd132\u4e2a\u6570\u636e\u5206\u7ec4\uff08DG\uff09\uff0cDGC\u4e3a20 * 32 = 640\uff0c\u63092\u6b21\u5e42\u5411\u4e0a\u5bf9\u9f50\uff0c\u6700\u7ec8\u914d\u7f6e\u4e3a1024\u3002 \u53cb\u60c5\u63d0\u793a\uff1a\u5efa\u8bae\u751f\u4ea7\u73af\u5883DGC\u81f3\u5c11\u914d\u7f6e\u4e3a256\u3002 fstore\u5728\u7ebf\u6269\u5bb9\u5206\u4e3a\u4e24\u4e2a\u6b65\u9aa4\u4fee\u6539cluster.conf\uff1a 1. \u589e\u52a0\u6269\u5bb9\u7684SG \u548c\u8fc1\u79fb\u8fc7\u53bb\u7684DG\u6620\u5c04\uff1b 2. \u65b0\u589e\u7684SG\u81ea\u52a8\u540c\u6b65\u5b8c\u6210\u540e\uff0c\u5c06\u539f\u6709SG\u8fc1\u79fb\u51fa\u53bb\u7684DG\u6620\u5c04\u5220\u9664\u3002 \u4e0a\u8ff0\u4e24\u4e2a\u6b65\u9aa4\u5c06cluster.conf\u4fee\u6539\u5b8c\u6210\u540e\uff0c\u90fd\u9700\u8981\u5c06cluster.conf\u5206\u53d1\u5230fstore\u96c6\u7fa4\u548cfuseclient\uff0c\u7136\u540e\u91cd\u542ffstore\u96c6\u7fa4\u548cfuseclient\u3002\u63a8\u8350\u91cd\u542f\u6b65\u9aa4\u5982\u4e0b\uff1a 1. \u505c\u6b62fuseclient 2. \u91cd\u542ffstore\u96c6\u7fa4 3. \u542f\u52a8fuseclient \u5c06\u4e0a\u8ff0\u914d\u7f6e\u793a\u4f8b\u76841\u4e2aSG\u6269\u5bb9\u4e3a2\u4e2aSG\uff08\u5747\u91c7\u75283\u526f\u672c\uff09\uff0c\u6211\u4eec\u5982\u4f55\u8c03\u6574cluster.conf\uff1a","title":"3. fstore\uff08\u6570\u636e\u5b58\u50a8\uff09"},{"location":"cluster-expansion-zh_CN/#1","text":"\u4fee\u6539\u540e\u7684cluster.conf\u5185\u5bb9\u7247\u6bb5\u5982\u4e0b\uff1a # SGC\uff0c\u75311\u6269\u5bb9\u4e3a2 server_group_count = 2 # DGC data_group_count = 256 # \u4fee\u6539DG\u6620\u5c04\uff0c\u5c06 [129, 256]\u8fc1\u79fb\u81f3SG2 [server-group-1] server_ids = [1-3] data_group_ids = [1, 128] # \u914d\u7f6eSG2 # \u5fc5\u987b\u52a0\u4e0aserver [1-3]\u7528\u4e8e\u540c\u6b65\u5df2\u6709\u6570\u636e [server-group-2] server_ids = [1-6] data_group_ids = [129, 256] \u5c06cluster.conf\u5206\u53d1\u5230fstore\u96c6\u7fa4\u6240\u6709\u670d\u52a1\u5668\u4ee5\u53ca\u6240\u6709fuseclient\u540e\uff0c\u91cd\u542ffstore\u96c6\u7fa4\u548cfuseclient\u3002 \u7b49\u5f85\u65b0\u589e\u7684SG\u540c\u6b65\u5b8c\u6210\uff0c\u7136\u540e\u8fdb\u5165\u6b65\u9aa42\u3002 \u53cb\u60c5\u63d0\u793a\uff1a \u6570\u636e\u540c\u6b65\u8fc7\u7a0b\u4e2dfstore\u96c6\u7fa4\u6b63\u5e38\u63d0\u4f9b\u670d\u52a1\uff1b \u53ef\u4ee5\u4f7f\u7528\u5de5\u5177 fs_cluster_stat \u67e5\u770bfstore\u96c6\u7fa4\u72b6\u6001\uff0c\u6bd4\u5982\uff1a # \u67e5\u770bACTIVE\u5217\u8868\uff0c\u786e\u4fdd\u6240\u6709\u670d\u52a1\u5668\u72b6\u6001\u4e3aACTIVE\uff0c\u786e\u8ba4\u4e00\u4e0b\u6700\u540e\u4e00\u884c\u8f93\u51fa\u7684\u603b\u6570 fs_cluster_stat -A # \u67e5\u770b\u975eACTIVE\u5217\u8868\uff0c\u786e\u4fdd\u8f93\u51fa\u4e3a\u7a7a fs_cluster_stat -N # \u62bd\u67e5\u67d0\u4e2a\u6570\u636e\u5206\u7ec4\uff08\u5982ID\u4e3a256\uff09\u7684ACTIVE\u72b6\u6001\uff0c\u786e\u4fdd\u5168\u90e8\u4e3aACTIVE fs_cluster_stat -g 256 # \u67e5\u770b\u5e2e\u52a9 fs_cluster_stat -h","title":"\u6b65\u9aa41"},{"location":"cluster-expansion-zh_CN/#2","text":"\u4fee\u6539\u540e\u7684cluster.conf\u5185\u5bb9\u7247\u6bb5\u5982\u4e0b\uff1a # SGC server_group_count = 2 # DGC data_group_count = 256 [server-group-1] server_ids = [1-3] data_group_ids = [1, 128] # \u53bb\u6389server [1-3] [server-group-2] server_ids = [4-6] data_group_ids = [129, 256] \u5c06cluster.conf\u5206\u53d1\u5230fstore\u96c6\u7fa4\u6240\u6709\u670d\u52a1\u5668\u4ee5\u53ca\u6240\u6709fuseclient\u540e\uff0c\u91cd\u542ffstore\u96c6\u7fa4\u548cfuseclient \u4e3a\u4e86\u6e05\u9664\u8fc1\u79fb\u51fa\u53bb\u7684\u6570\u636e\u5360\u7528\u7a7a\u95f4\uff0cV3.2\u652f\u6301\u6e05\u9664\u8fc1\u79fb\u51fa\u53bb\u7684replica\u548cslice binlog\uff0c\u542f\u52a8 fs_serverd\u65f6\u5e26\u4e0a\u53c2\u6570 --migrate-clean \u5373\u53ef\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a /usr/bin/fs_serverd /etc/fastcfs/fstore/server.conf restart --migrate-clean \u53cb\u60c5\u63d0\u793a\uff1a \u914d\u7f6e\u6587\u4ef6\u5206\u53d1\u548c\u7a0b\u5e8f\u542f\u505c\u53ef\u4ee5\u4f7f\u7528fcfs.sh\uff0c\u4f7f\u7528\u8bf4\u660e\u53c2\u89c1 FastCFS\u96c6\u7fa4\u8fd0\u7ef4\u5de5\u5177 \u6b65\u9aa41\u548c2\u91cd\u542ffstore\u96c6\u7fa4\u548cfuseclient\u7684\u8fc7\u7a0b\uff0c\u4f1a\u5bfc\u81f4\u670d\u52a1\u4e0d\u53ef\u7528\uff0c\u5efa\u8bae\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\u8fdb\u884c","title":"\u6b65\u9aa42"},{"location":"fcfs-ops-tool-zh_CN/","text":"FastCFS \u8fd0\u7ef4\u5de5\u5177\u4ecb\u7ecd \u00b6 fcfs.sh -- \u7528\u4e8e\u7ba1\u7406 FastCFS \u96c6\u7fa4\u7684\u5feb\u6377\u8fd0\u7ef4\u5de5\u5177 fcfs_conf.sh -- \u7528\u4e8e\u5feb\u901f\u521b\u5efa\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u7684\u5de5\u5177 1. fcfs.sh \u4ecb\u7ecd \u00b6 fcfs.sh \u662f\u4e00\u4e2a\u7528\u4e8e\u5feb\u901f\u90e8\u7f72\u548c\u7ba1\u7406 FastCFS \u96c6\u7fa4\u7684\u811a\u672c\u5de5\u5177\u3002\u5b83\u57fa\u4e8e SSH \u8bbf\u95ee\u534f\u8bae\u8fde\u63a5\u8fdc\u7a0b\u8282\u70b9\u670d\u52a1\u5668\uff0c\u5e76\u4f7f\u7528\u670d\u52a1\u5668\u4e0a\u5e26\u6709 sudo \u529f\u80fd\u7684\u8d26\u53f7\uff08\u4e5f\u53ef\u4ee5\u4f7f\u7528root\uff09\u8fdb\u884c\u76f8\u5173\u547d\u4ee4\u7684\u6267\u884c\u3002\u5b83\u53ea\u9700\u5728\u4f60\u7684\u5de5\u4f5c\u7ad9\u673a\u5668\u4e0a\u8fd0\u884c\uff0c\u4e0d\u9700\u8981\u670d\u52a1\u5668\u3001\u6570\u636e\u5e93\u6216\u8005\u5176\u4ed6\u989d\u5916\u8d44\u6e90\u3002 \u5982\u679c\u4f60\u9700\u8981\u7ecf\u5e38\u642d\u5efa\u3001\u5378\u8f7d\u6216\u914d\u7f6e FastCFS\u96c6\u7fa4\uff0c\u53c8\u60f3\u8282\u7701\u5927\u91cf\u7684\u91cd\u590d\u5de5\u4f5c\uff0c\u90a3\u4e48\u5b83\u5f88\u9002\u5408\u4f60\u3002 \u6ce8\uff1a \u8be5\u811a\u672c\u5de5\u5177\u76ee\u524d\u4ec5\u9002\u7528\u4e8e Centos 7, Centos 8\u3002 1.1. \u8fd9\u4e2a\u5de5\u5177\u80fd\u505a\u4ec0\u4e48\uff1f \u00b6 \u5b83\u80fd\u5feb\u901f\u6784\u5efa FastCFS \u96c6\u7fa4\uff0c\u5305\u62ec\u5b89\u88c5\u8f6f\u4ef6\u3001\u5206\u53d1\u914d\u7f6e\u6587\u4ef6\uff0c\u4ee5\u53ca\u7ba1\u7406\u96c6\u7fa4\u670d\u52a1\u548c\u67e5\u770b\u96c6\u7fa4\u65e5\u5fd7\u3002 \u5b83\u4e5f\u80fd\u5bf9 FastCFS \u5355\u8282\u70b9\u6216\u6574\u4e2a\u96c6\u7fa4\u7684\u76f8\u5173\u8f6f\u4ef6\u8fdb\u884c\u5347\u7ea7\u6216\u964d\u7ea7\u3002 \u5b83\u80fd\u91cd\u65b0\u5b89\u88c5\u8f6f\u4ef6\u6216\u8005\u91cd\u65b0\u5206\u53d1\u914d\u7f6e\u6587\u4ef6\u3002 1.2. \u8fd9\u4e2a\u5de5\u5177\u4e0d\u80fd\u505a\u4ec0\u4e48\uff1f \u00b6 \u5b83\u4e0d\u662f\u4e00\u4e2a\u901a\u7528\u7684\u90e8\u7f72\u5de5\u5177\uff0c \u4ec5\u9002\u7528\u4e8e FastCFS \u96c6\u7fa4\u3002\u9664\u4e86\u5c06\u914d\u7f6e\u6587\u4ef6\u5206\u53d1\u5230\u96c6\u7fa4\u7684\u5404\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u4ee5\u5916\uff0c\u5b83\u4e0d\u5bf9\u96c6\u7fa4\u914d\u7f6e\u505a\u4efb\u4f55\u5904\u7406\u3002\u4f60\u5fc5\u987b\u4e3a\u5b83\u63d0\u4f9b\u53ef\u7528\u7684\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u3002 1.3. \u83b7\u53d6 fcfs.sh \u00b6 \u4ece\u4ee5\u4e0b\u5730\u5740\u4e0b\u8f7d fcfs.sh\uff0c\u5e76\u5c06\u5176\u653e\u7f6e\u5728\u5de5\u4f5c\u7ad9\u673a\u5668\u7684bin\u76ee\u5f55\u4e0b\uff0c\u4ee5\u4fbf\u547d\u4ee4\u884c\u80fd\u591f\u627e\u5230\uff1a http://fastcfs.net/fastcfs/ops/fcfs.sh \u83b7\u53d6\u547d\u4ee4\uff1a sudo curl -o /usr/bin/fcfs.sh http://fastcfs.net/fastcfs/ops/fcfs.sh && sudo chmod +x /usr/bin/fcfs.sh \u4e0b\u8f7d\u5b8c\u6210\u540e\u53ef\u901a\u8fc7\u547d\u4ee4 which fcfs.sh \u6d4b\u8bd5\u5de5\u5177\u662f\u5426\u751f\u6548\u3002 1.4. \u4f7f\u7528\u5de5\u5177\u7684\u524d\u7f6e\u6761\u4ef6 \u00b6 fcfs.settings -- \u96c6\u7fa4\u8fd0\u7ef4\u914d\u7f6e\uff0c\u653e\u7f6e\u5728\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u4e2d conf -- \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\uff0c\u653e\u7f6e\u5728\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u4e2d \u8fdc\u7a0b\u670d\u52a1\u5668 SSH \u514d\u5bc6\u767b\u5f55\uff0c\u53c2\u89c1 5. SSH \u514d\u5bc6\u767b\u5f55 \u4f60\u5fc5\u987b\u4e3a\u6bcf\u4e2a\u96c6\u7fa4\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684\u5de5\u4f5c\u76ee\u5f55\uff08\u4f8b\u5982\uff1a fastcfs-ops \uff09\uff0c\u5c06 fcfs.settings \u548c conf \u653e\u5165\u5176\u4e2d\u3002\u7136\u540e\u6240\u6709\u9488\u5bf9\u8be5\u96c6\u7fa4\u7684\u540e\u7eed\u547d\u4ee4\u64cd\u4f5c\uff0c\u90fd\u5fc5\u987b\u5728\u8be5\u5de5\u4f5c\u76ee\u5f55\u4e2d\u6267\u884c\u3002 1.4.1. fcfs.settings \u00b6 fcfs.settings \u5305\u62ec\u4e24\u4e2a\u5b57\u6bb5 fastcfs_version \u548c fuseclient_ips \uff0cfastcfs_version \u7528\u4e8e\u6307\u5b9a FastCFS \u4e3b\u7248\u672c\u53f7\uff0cfuseclient_ips \u7528\u4e8e\u6307\u5b9a\u8981\u90e8\u7f72 fuse client \u7684\u670d\u52a1\u5668\u4e3b\u673a\u3002\u5f53\u9700\u8981\u5bf9 FastCFS \u96c6\u7fa4\u8f6f\u4ef6\u8fdb\u884c\u5347\u7ea7\u6216\u964d\u7ea7\u64cd\u4f5c\u65f6\uff0c\u4f60\u9700\u8981\u5148\u4fee\u6539 fastcfs_version \u5bf9\u5e94\u7684\u7248\u672c\u53f7\u4e3a\u4f60\u671f\u671b\u7684\u7248\u672c\u3002 fcfs.settings \u914d\u7f6e\u6587\u4ef6\u5185\u5bb9\u4e3e\u4f8b: # \u8981\u5b89\u88c5\u7684\u96c6\u7fa4\u7248\u672c\u53f7\uff08\u4f8b\u5982\uff1a2.2.0\uff09 fastcfs_version=2.2.0 # \u8981\u5b89\u88c5 fuseclient \u5ba2\u6237\u7aef\u7684IP\u5217\u8868\uff0c\u591a\u4e2aip\u4ee5\u82f1\u6587\u9017\u53f7\u5206\u9694 fuseclient_ips=10.0.1.14 \u6ce8\uff1a\u63a8\u8350\u4f7f\u7528 2.2.0 \u53ca\u4ee5\u540e\u7684\u7248\u672c\u7528\u4e8e\u96c6\u7fa4\u90e8\u7f72\u3002 1.4.2. conf \u00b6 FastCFS\u96c6\u7fa4\u7684\u6240\u6709\u914d\u7f6e\u6587\u4ef6\u5fc5\u987b\u63d0\u524d\u653e\u7f6e\u5728\u5de5\u4f5c\u76ee\u5f55\u4e2d\u7684 conf \u76ee\u5f55\uff0cconf \u5305\u542b\u4ee5\u4e0b\u56db\u4e2a\u5b50\u76ee\u5f55\uff1a fdir -- fdir \u670d\u52a1\u5668\u7684\u914d\u7f6e\u6587\u4ef6 fstore -- fstore \u670d\u52a1\u5668\u7684\u914d\u7f6e\u6587\u4ef6 auth -- fauth \u670d\u52a1\u5668\u7684\u914d\u7f6e\u6587\u4ef6 fcfs -- fuseclient \u5ba2\u6237\u7aef\u7684\u914d\u7f6e\u6587\u4ef6 \u83b7\u53d6\u914d\u7f6e\u6587\u4ef6\u6837\u4f8b mkdir fastcfs-ops cd fastcfs-ops/ curl -o fcfs-config-sample.tar.gz http://fastcfs.net/fastcfs/ops/fcfs-config-sample.tar.gz tar -xzvf fcfs-config-sample.tar.gz \u4f7f\u7528fcfs_conf.sh\u521b\u5efa\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6 \u4e5f\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\uff0c\u4f7f\u7528\u811a\u672c\u5de5\u5177 fcfs_conf.sh \u521b\u5efa FastCFS\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u3002\u53c2\u89c1\uff1a fcfs_conf.sh 1.5. SSH \u514d\u5bc6\u767b\u5f55 \u00b6 fcfs.sh \u5c06\u901a\u8fc7 SSH \u8fde\u63a5\u6240\u6709\u96c6\u7fa4\u4e3b\u673a\u3002\u5b83\u9700\u8981\u5de5\u4f5c\u7ad9\u673a\u5668\u53ef\u4ee5\u901a\u8fc7 SSH \u5728\u8fdc\u7a0b\u4e3b\u673a\u4e0a\u6267\u884c\u811a\u672c\uff0c\u6267\u884c\u547d\u4ee4\u7684\u7528\u6237\u8eab\u4efd\u53ef\u4ee5\u662f root \u6216\u5e26 sudo\u7684\u7528\u6237\uff0c\u5e76\u4e14\u5fc5\u987b\u652f\u6301\u514d\u5bc6\u767b\u5f55\u3002 \u4e3a\u4e86\u5f00\u542f\u514d\u5bc6\u767b\u5f55\uff0c\u4f60\u9700\u8981\u5148\u4e3a SSH \u751f\u6210 rsa \u516c\u94a5/\u79c1\u94a5\u5bf9\uff1a ssh-keygen -t rsa -C cfs -f cfs-ssh-key \u5c06\u751f\u6210\u5bc6\u94a5\u6587\u4ef6\uff1a cfs-ssh-key -- \u79c1\u94a5\u6587\u4ef6 cfs-ssh-key.pub -- \u516c\u94a5\u6587\u4ef6 1.5.1. \u90e8\u7f72\u79c1\u94a5 \u00b6 \u5c06\u79c1\u94a5\u6587\u4ef6 cfs-ssh-key \u62f7\u8d1d\u5230\u5de5\u4f5c\u7ad9\u673a\u5668\u7684\u5f53\u524d\u7528\u6237home\u76ee\u5f55 \"~/.ssh/\" \uff0c\u7136\u540e\u5c06\u4e0b\u9762\u7684\u914d\u7f6e\u7247\u6bb5\u52a0\u5165\u914d\u7f6e\u6587\u4ef6 ~/.ssh/config\uff08\u6bcf\u4e2a\u96c6\u7fa4\u4e3b\u673a\u4e00\u4efd\uff09\uff1a Host [node ip] HostName [node host name] User [ssh user] Port 22 PubkeyAuthentication yes IdentityFile ~/.ssh/cfs-ssh-key 1.5.2. \u90e8\u7f72\u516c\u94a5 \u00b6 \u5c06\u516c\u94a5\u6587\u4ef6\u5185\u5bb9\u52a0\u5165\u5230\u6bcf\u4e2a\u8282\u70b9\u670d\u52a1\u5668sudo \u7528\u6237\u7684home\u76ee\u5f55\u4e0b .ssh/authorized_keys \u6587\u4ef6\u4e2d\uff1a ssh-copy-id -i cfs-ssh-key.pub [user name]@[node server ip] \u5e76\u786e\u4fdd\u670d\u52a1\u5668\u4e0asshd\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u5f00\u542f\u4e86\u4ee5\u4e0b\u914d\u7f6e\u53c2\u6570\uff1a RSAAuthentication yes PubkeyAuthentication yes AuthorizedKeysFile .ssh/authorized_keys 1.6. \u5de5\u5177\u547d\u4ee4\u4ecb\u7ecd \u00b6 fcfs.sh\u5de5\u5177\u7684\u547d\u4ee4\u5305\u62ec\u4e09\u90e8\u5206\uff1acommand\uff0cmodule \u548c node\u3002Command \u662f\u5fc5\u987b\u7684\uff0cmodule \u548c node \u662f\u53ef\u9009\u7684\u3002 \u7528\u6cd5: fcfs.sh command [module] [node] Commands : setup -- \u5b89\u88c5\u5e76\u8fd0\u884c FastCFS \u8f6f\u4ef6\u7684\u5feb\u6377\u547d\u4ee4\uff0c\u7ec4\u5408\u4e86 install\u3001config \u548c restart\u4e09\u4e2a\u547d\u4ee4 install -- \u5b89\u88c5 FastCFS \u8f6f\u4ef6 reinstall -- \u91cd\u65b0\u5b89\u88c5 FastCFS \u8f6f\u4ef6 remove -- \u79fb\u9664 FastCFS \u8f6f\u4ef6\uff0c\u529f\u80fd\u4e0e erase \u547d\u4ee4\u76f8\u540c erase -- \u79fb\u9664 FastCFS \u8f6f\u4ef6 config -- \u5c06\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u62f7\u8d1d\u5230\u76ee\u6807\u4e3b\u673a\u76ee\u5f55 start -- \u542f\u52a8\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u6216\u5355\u4e2a\u6a21\u5757\u670d\u52a1 restart -- \u91cd\u542f\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u6216\u5355\u4e2a\u6a21\u5757\u670d\u52a1 stop -- \u505c\u6b62\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u6216\u5355\u4e2a\u6a21\u5757\u670d\u52a1 tail -- \u67e5\u770b\u6307\u5b9a\u6a21\u5757\u65e5\u5fd7\u7684\u6700\u540e\u4e00\u90e8\u5206\u5185\u5bb9\uff08\u7b49\u540c\u4e8e\u8fdc\u7a0b\u670d\u52a1\u5668\u7684tail\u547d\u4ee4\uff09 status -- \u67e5\u770b\u6307\u5b9a\u6a21\u5757\u670d\u52a1\u8fdb\u7a0b\u72b6\u6001 help -- \u67e5\u770b\u547d\u4ee4\u7684\u8be6\u7ec6\u8bf4\u660e\u548c\u6837\u4f8b Modules : fdir -- fastDIR \u670d\u52a1\u5668 fstore -- faststore \u670d\u52a1\u5668 fauth -- FastCFS auth \u670d\u52a1\u5668 fuseclient -- FastCFS fuse \u5ba2\u6237\u7aef Node : \u53ef\u4ee5\u7528\u4e8e\u6307\u5b9a\u8981\u6267\u884c\u547d\u4ee4\u7684\u5355\u4e2a\u96c6\u7fa4\u8282\u70b9\u4e3b\u673a\u540d\u6216IP\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\uff0c\u547d\u4ee4\u5c06\u5728\u6240\u6709\u8282\u70b9\u4e0a\u6267\u884c\u3002node \u53c2\u6570\u5fc5\u987b\u5728\u4f7f\u7528\u4e86 module \u53c2\u6570\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\uff0c\u4e0d\u80fd\u5355\u72ec\u76f4\u63a5\u4f7f\u7528\u3002 1.6.1. FastCFS \u4e00\u952e\u5b89\u88c5 \u00b6 \u4f60\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 setup \u5728\u96c6\u7fa4\u8282\u70b9\u4e0a\u5feb\u901f\u5b89\u88c5 FastCFS \u8f6f\u4ef6\uff0c\u5e76\u81ea\u52a8\u914d\u7f6e\u548c\u542f\u52a8\u6a21\u5757\u670d\u52a1. \u6837\u4f8b \u5b89\u88c5\u5e76\u542f\u52a8\u6574\u4e2a FastCFS \u96c6\u7fa4: fcfs.sh setup \u5728\u6240\u6709 fdir \u8282\u70b9\u4e0a\u5b89\u88c5\u5e76\u542f\u52a8 fdir \u670d\u52a1\u5668: fcfs.sh setup fdir \u5728\u8282\u70b9 10.0.1.11 \u4e0a\u5b89\u88c5 fdir \u670d\u52a1\u5668\uff1a fcfs.sh setup fdir 10.0.1.11 \u8282\u70b9 10.0.1.11 \u5fc5\u987b\u5c5e\u4e8e fdir \u96c6\u7fa4\uff0c\u5426\u5219\u547d\u4ee4\u5c06\u5931\u8d25\u3002 1.6.2. FastCFS \u8f6f\u4ef6\u5b89\u88c5 \u00b6 \u4f60\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 install \u53ea\u5b89\u88c5 FastCFS \u8f6f\u4ef6\u3002\u8fd9\u4e2a\u547d\u4ee4\u662f setup \u547d\u4ee4\u7684\u4e00\u90e8\u5206\u3002 \u7b2c\u4e00\u6b21\u6267\u884c\u8be5\u547d\u4ee4\u65f6\uff0c\u5fc5\u987b\u5728\u6240\u6709\u8282\u70b9\u4e0a\u5b89\u88c5\u6240\u6709\u8f6f\u4ef6\uff08\u4e5f\u5c31\u662f\u8bf4\uff0c\u6b64\u65f6\u4e0d\u80fd\u6307\u5b9amodule\u548cnode\uff09\u3002\u4e4b\u540e\uff0c\u5f53\u9700\u8981\u589e\u52a0\u65b0\u8282\u70b9\u65f6\uff0c\u53ef\u4ee5\u643a\u5e26 module \u548c node \u53c2\u6570\u4f7f\u7528\u3002 \u6837\u4f8b \u5728\u6240\u6709\u8282\u70b9\u5b89\u88c5\u6240\u9700\u7684 FastCFS \u8f6f\u4ef6: fcfs.sh install \u5728\u6240\u6709 fdir \u8282\u70b9\u4e0a\u5b89\u88c5 fdir \u670d\u52a1\u5668\uff1a fcfs.sh install fdir \u5728 10.0.1.11 \u8282\u70b9\u4e0a\u5b89\u88c5 fdir \u670d\u52a1\u5668\uff1a fcfs.sh install fdir 10.0.1.11 1.6.3. FastCFS \u8f6f\u4ef6\u5347\u7ea7 \u00b6 \u5f53\u4f60\u60f3\u5347\u7ea7 FastCFS \u8f6f\u4ef6\u65f6\uff0c\u4f60\u9700\u8981\u5148\u5c06\u914d\u7f6e\u6587\u4ef6 fcfs.settings \u4e2d\u7684 fastcfs_version \u5b57\u6bb5\u7684\u503c\u4fee\u6539\u4e3a\u65b0\u7684\u7248\u672c\u53f7\uff0c\u7136\u540e\u6267\u884c install \u547d\u4ee4\uff1a fcfs.sh install 1.6.4. FastCFS \u8f6f\u4ef6\u964d\u7ea7 \u00b6 \u5982\u679c\u4f60\u786e\u5b9e\u9700\u8981\u5c06 FastCFS \u8f6f\u4ef6\u964d\u7ea7\u4e3a\u65e7\u7684\u7248\u672c\uff0c\u4f60\u5fc5\u987b\u5148\u6267\u884c remove \u547d\u4ee4\uff1a fcfs.sh remove \u6216: fcfs.sh erase \u5e76\u5c06\u5b57\u6bb5 fastcfs_version \u7684\u503c\u4fee\u6539\u4e3a\u65e7\u7684\u7248\u672c\u53f7\uff0c\u7136\u540e\u6267\u884c install \u547d\u4ee4\uff1a fcfs.sh install 1.6.5. FastCFS \u8f6f\u4ef6\u5378\u8f7d \u00b6 \u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 remove \u6216 erase \u5378\u8f7d FastCFS \u8f6f\u4ef6\u3002 \u6837\u4f8b \u79fb\u9664\u6240\u6709\u8282\u70b9\u4e0a\u7684\u6240\u6709\u8f6f\u4ef6\uff1a fcfs.sh remove \u79fb\u9664\u6240\u6709 fdir \u8282\u70b9\u4e0a\u7684 fdir \u670d\u52a1\u5668\uff1a fcfs.sh remove fdir \u79fb\u9664\u8282\u70b910.0.1.11\u4e0a\u7684 fdir \u670d\u52a1\u5668\uff1a fcfs.sh remove fdir 10.0.1.11 1.6.6. FastCFS \u914d\u7f6e\u6587\u4ef6\u5206\u53d1 \u00b6 \u6210\u529f\u5b89\u88c5 FastCFS \u8f6f\u4ef6\u4e4b\u540e\uff0c\u4f60\u5fc5\u987b\u901a\u8fc7\u6267\u884c\u547d\u4ee4 config \u6765\u5c06\u914d\u7f6e\u6587\u4ef6\u5206\u53d1\u5230\u5404\u4e2a\u96c6\u7fa4\u8282\u70b9\u3002\u5982\u679c\u8282\u70b9\u4e0a\u7684\u76ee\u6807\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u5b83\u5c06\u4f1a\u81ea\u52a8\u521b\u5efa\u5b83\u4eec\u3002 \u6837\u4f8b \u5c06\u6240\u6709\u6a21\u5757\u7684\u914d\u7f6e\u6587\u4ef6\u5206\u53d1\u5230\u6240\u6709\u76f8\u5e94\u7684\u8282\u70b9\u4e0a\uff1a fcfs.sh config \u5c06 fdir \u670d\u52a1\u5668\u7684\u914d\u7f6e\u6587\u4ef6\u5206\u53d1\u5230\u6240\u6709 fdir \u8282\u70b9\u4e0a\uff1a fcfs.sh config fdir \u5c06 fdir \u670d\u52a1\u5668\u7684\u914d\u7f6e\u6587\u4ef6\u5206\u53d1\u5230 fdir \u8282\u70b9 10.0.1.11 \u4e0a\uff1a fcfs.sh config fdir 10.0.1.11 1.6.7. \u96c6\u7fa4\u7ba1\u7406 \u00b6 \u7ba1\u7406\u96c6\u7fa4\u7684\u547d\u4ee4\u5305\u62ec start , stop , restart \u3002\u4f60\u53ef\u4ee5\u540c\u65f6\u64cd\u4f5c\u6240\u6709\u6a21\u5757\u7684\u6240\u6709\u8282\u70b9\uff0c\u4e5f\u53ef\u4ee5\u540c\u65f6\u64cd\u4f5c\u67d0\u4e00\u6a21\u5757\u7684\u6240\u6709\u8282\u70b9\uff0c\u4e5f\u53ef\u4ee5\u5355\u72ec\u64cd\u4f5c\u67d0\u4e00\u6a21\u5757\u7684\u67d0\u4e00\u4e2a\u8282\u70b9\u3002 \u5982\u679c\u60f3\u64cd\u4f5c\u5355\u4e2a\u8282\u70b9\uff0c\u4f60\u5fc5\u987b\u5728 module \u53c2\u6570\u540e\u6307\u5b9a node\uff08host\uff09\u53c2\u6570\uff08\u4e5f\u5c31\u662f\u8bf4\uff0c\u4f60\u4e0d\u80fd\u540c\u65f6\u64cd\u4f5c\u67d0\u4e00\u8282\u70b9\u4e0a\u7684\u6240\u6709\u6a21\u5757\uff09\u3002 \u6837\u4f8b \u542f\u52a8\u6240\u6709\u8282\u70b9\u4e0a\u7684\u6240\u6709\u670d\u52a1\uff1a fcfs.sh start \u91cd\u542f\u6240\u6709 fdir \u8282\u70b9\u4e0a\u7684 fdir \u670d\u52a1\uff1a fcfs.sh restart fdir \u505c\u6b62 \u8282\u70b910.0.1.11\u4e0a\u7684 fdir \u670d\u52a1\uff1a fcfs.sh stop fdir 10.0.1.11 1.6.8. \u67e5\u770b\u96c6\u7fa4\u65e5\u5fd7 \u00b6 \u5f53\u4f60\u60f3\u67e5\u770b FastCFS \u670d\u52a1\u7684\u6700\u65b0\u65e5\u5fd7\u65f6\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 tail \u6765\u663e\u793a\u6307\u5b9a\u6a21\u5757\u65e5\u5fd7\u6587\u4ef6\u7684\u6700\u540e\u4e00\u90e8\u5206\u3002 \u6837\u4f8b \u663e\u793a 10.0.1.11\u8282\u70b9\u4e0a fdir \u670d\u52a1\u65e5\u5fd7\u6587\u4ef6\u7684\u6700\u540e 100 \u884c\uff1a fcfs.sh tail fdir 10.0.1.11 -n 100 \u6216: fcfs.sh tail fdir 10.0.1.11 -100 \u663e\u793a\u6bcf\u4e2a fdir \u670d\u52a1\u5668\u65e5\u5fd7\u7684\u6700\u540e 10 \u884c\uff1a fcfs.sh tail fdir 1.6.9. \u67e5\u770b\u96c6\u7fa4\u670d\u52a1\u8fdb\u7a0b\u72b6\u6001 \u00b6 \u5f53\u4f60\u60f3\u67e5\u770b FastCFS \u670d\u52a1\u7684\u8fdb\u7a0b\u72b6\u6001\u65f6\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 status \u6765\u663e\u793a\u6307\u5b9a\u6a21\u5757\u7684\u670d\u52a1\u8fdb\u7a0b\u72b6\u6001\u3002 \u6837\u4f8b \u663e\u793a 10.0.1.11 \u8282\u70b9\u4e0a fdir \u670d\u52a1\u8fdb\u7a0b\u72b6\u6001\uff1a fcfs.sh status fdir 10.0.1.11 \u663e\u793a\u6bcf\u4e2a fdir \u670d\u52a1\u5668\u8fdb\u7a0b\u72b6\u6001\uff1a fcfs.sh status fdir \u663e\u793a\u6240\u6709\u670d\u52a1\u8fdb\u7a0b\u72b6\u6001\uff1a fcfs.sh status 2. fcfs_conf.sh \u4ecb\u7ecd \u00b6 fcfs_conf.sh \u662f\u4e00\u4e2a\u5feb\u901f\u521b\u5efa FastCFS\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u7684\u8fd0\u7ef4\u5de5\u5177\u3002\u5b83\u901a\u8fc7 bash shell \u8bbf\u95ee\u672c\u5730\u914d\u7f6e\u6587\u4ef6 fcfs_conf.settings\u3002\u5b83\u53ea\u9700\u5728\u4f60\u7684\u5de5\u4f5c\u7ad9\u673a\u5668\u4e0a\u8fd0\u884c\uff0c\u4e0d\u9700\u8981\u670d\u52a1\u5668\u3001\u6570\u636e\u5e93\u6216\u8005\u5176\u4ed6\u989d\u5916\u8d44\u6e90\u3002 \u5982\u679c\u4f60\u9700\u8981\u5728\u6307\u5b9a\u7684\u670d\u52a1\u5668IP\u5217\u8868\u4e0a\u5feb\u901f\u751f\u6210\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\uff0c\u90a3\u4e48\u5b83\u5f88\u9002\u5408\u4f60\u3002 2.1. \u83b7\u53d6 fcfs_conf.sh \u00b6 \u4ece\u4ee5\u4e0b\u5730\u5740\u4e0b\u8f7d fcfs_conf.sh\uff0c\u5e76\u5c06\u5176\u653e\u7f6e\u5728\u5de5\u4f5c\u7ad9\u673a\u5668\u7684bin\u76ee\u5f55\u4e0b\uff0c\u4ee5\u4fbf\u547d\u4ee4\u884c\u80fd\u591f\u627e\u5230\uff1a http://fastcfs.net/fastcfs/ops/fcfs_conf.sh \u83b7\u53d6\u547d\u4ee4\uff1a sudo curl -o /usr/bin/fcfs_conf.sh http://fastcfs.net/fastcfs/ops/fcfs_conf.sh && sudo chmod +x /usr/bin/fcfs_conf.sh \u4e0b\u8f7d\u5b8c\u6210\u540e\u53ef\u901a\u8fc7\u547d\u4ee4 which fcfs_conf.sh \u6d4b\u8bd5\u5de5\u5177\u662f\u5426\u751f\u6548\u3002 2.2. \u4f7f\u7528fcfs_conf.sh\u7684\u524d\u7f6e\u6761\u4ef6 \u00b6 fcfs_conf.settings -- \u751f\u6210\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u7684\u53c2\u6570\u914d\u7f6e\uff0c\u653e\u7f6e\u5728\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u4e2d \u4f60\u5fc5\u987b\u4e3a\u6bcf\u4e2a\u96c6\u7fa4\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684\u5de5\u4f5c\u76ee\u5f55\uff08\u4f8b\u5982\uff1a fastcfs-ops \uff09\uff0c\u5c06 fcfs_conf.settings \u653e\u5165\u5176\u4e2d\u3002\u7136\u540e\u5728\u8be5\u5de5\u4f5c\u76ee\u5f55\u4e2d\u6267\u884cfcfs_conf.sh\u547d\u4ee4\u3002 2.2.1. fcfs_conf.settings \u00b6 fcfs_conf.settings \u5305\u62ec\u4ee5\u4e0b\u516d\u79cd\u5b57\u6bb5\uff1a fastcfs_version -- \u8981\u751f\u6210\u54ea\u4e2a\u7248\u672c\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6 auth_ips -- FastCFS auth \u670d\u52a1\u5668IP\u5730\u5740\u5217\u8868\uff0c\u591a\u4e2aIP\u4ee5\u82f1\u6587\u534a\u89d2\u9017\u53f7\u5206\u9694 fdir_ips -- fastDIR\u670d\u52a1\u5668IP\u5730\u5740\u5217\u8868\uff0c\u591a\u4e2aIP\u4ee5\u82f1\u6587\u534a\u89d2\u9017\u53f7\u5206\u9694 fstore_group_count -- faststore\u670d\u52a1\u5668\u5206\u7ec4\u6570\u91cf fstore_group_[N] -- faststore\u670d\u52a1\u5668\u5206\u7ec4IP\u5730\u5740\u5217\u8868\uff0c\u591a\u4e2aIP\u4ee5\u82f1\u6587\u534a\u89d2\u9017\u53f7\u5206\u9694 data_group_count -- faststore\u670d\u52a1\u533a\u6570\u636e\u5206\u7ec4\u6570\uff08\u63a8\u835064\u7684\u6574\u6570\u500d\uff09 \u53c2\u6570 fstore_group_count \u8bbe\u7f6e\u7684\u6570\u91cf\u5fc5\u987b\u4e0e fstore_group_[N] \u6570\u91cf\u76f8\u5339\u914d\uff0c\u5e76\u4e14\u7f16\u53f7\u4ece1\u5f00\u59cb\u9012\u589e\u3002 fcfs_conf.settings \u914d\u7f6e\u6587\u4ef6\u5185\u5bb9\u4e3e\u4f8b: # \u8981\u751f\u6210\u914d\u7f6e\u7684\u96c6\u7fa4\u7248\u672c\u53f7\uff08\u4f8b\u5982\uff1a2.3.0\uff09 fastcfs_version=2.3.0 # \u96c6\u7fa4\u4e3b\u673a\u5217\u8868\u548c\u5206\u7ec4\u6570 auth_ips=10.0.1.11,10.0.1.12,10.0.1.13 fdir_ips=10.0.1.11,10.0.1.12,10.0.1.13 fstore_group_count=2 fstore_group_1=10.0.1.11,10.0.1.12,10.0.1.13 fstore_group_2=10.0.2.11,10.0.2.12,10.0.2.13 data_group_count=128 \u6ce8\uff1a\u63a8\u8350\u4f7f\u7528 2.3.0 \u53ca\u4ee5\u540e\u7684\u7248\u672c\u7528\u4e8e\u751f\u6210\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u3002 2.3. fcfs_conf.sh\u5de5\u5177\u547d\u4ee4\u4ecb\u7ecd \u00b6 fcfs_conf.sh\u5de5\u5177\u7684\u547d\u4ee4\u5305\u62ec\u4e24\u90e8\u5206\uff1acommand\uff0cmodule\u3002Command \u662f\u5fc5\u987b\u7684\uff0cmodule \u662f\u53ef\u9009\u7684\u3002 \u7528\u6cd5: fcfs.sh command [module] Commands : create -- \u521b\u5efa\u914d\u7f6e\u6587\u4ef6 help -- \u67e5\u770b\u547d\u4ee4\u7684\u8be6\u7ec6\u8bf4\u660e\u548c\u6837\u4f8b Modules : fdir -- fastDIR \u670d\u52a1\u5668 fstore -- faststore \u670d\u52a1\u5668 fauth -- FastCFS auth \u670d\u52a1\u5668 fuseclient -- FastCFS fuse \u5ba2\u6237\u7aef 3. conf_tpl_tar.sh \u4ecb\u7ecd \u00b6 \u4e00\u4e2a\u7b80\u5355\u7684\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u6a21\u7248\u6253\u5305\u5de5\u5177\uff0c\u4ec5\u4f9bFastCFS\u5f00\u53d1\u8005\u4f7f\u7528\u3002 \u5b83\u5c06\u4eceFastCFS, fastDIR, faststore\u7684\u6e90\u4ee3\u7801\u4ed3\u5e93\u5c06FastCFS \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u6a21\u7248\u6253\u5305\u6210tar\u5305\u3002 \u8fd9\u4e09\u4e2a\u4ed3\u5e93\u5fc5\u987b\u5728\u540c\u4e00\u4e2a\u76ee\u5f55\uff0c\u5e76\u4e14 conf_tpl_tar.sh \u5fc5\u987b\u5728\u5b50\u76ee\u5f55 FastCFS/shell/ \u4e2d\u6267\u884c\u3002 \u547d\u4ee4\u683c\u5f0f: conf_tpl_tar.sh <version> [update] version -- \u8981\u521b\u5efa\u6a21\u7248\u538b\u7f29\u5305\u7684\u96c6\u7fa4\u7248\u672c\u53f7. update -- \u5728\u521b\u5efa\u4e4b\u524d\u83b7\u53d6\u6700\u65b0\u7684\u6e90\u4ee3\u7801\uff0c\u53ef\u9009\u3002 \u4e3e\u4f8b: ./conf_tpl_tar.sh 2.3.0 update \u5c06\u5728\u5f53\u524d\u76ee\u5f55\u521b\u5efa\u914d\u7f6e\u6a21\u7248\u538b\u7f29\u5305\u6587\u4ef6 conf.2.3.0.tpl.tar.gz \u3002","title":"FastCFS \u8fd0\u7ef4\u5de5\u5177\u4ecb\u7ecd"},{"location":"fcfs-ops-tool-zh_CN/#fastcfs","text":"fcfs.sh -- \u7528\u4e8e\u7ba1\u7406 FastCFS \u96c6\u7fa4\u7684\u5feb\u6377\u8fd0\u7ef4\u5de5\u5177 fcfs_conf.sh -- \u7528\u4e8e\u5feb\u901f\u521b\u5efa\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u7684\u5de5\u5177","title":"FastCFS \u8fd0\u7ef4\u5de5\u5177\u4ecb\u7ecd"},{"location":"fcfs-ops-tool-zh_CN/#1-fcfssh","text":"fcfs.sh \u662f\u4e00\u4e2a\u7528\u4e8e\u5feb\u901f\u90e8\u7f72\u548c\u7ba1\u7406 FastCFS \u96c6\u7fa4\u7684\u811a\u672c\u5de5\u5177\u3002\u5b83\u57fa\u4e8e SSH \u8bbf\u95ee\u534f\u8bae\u8fde\u63a5\u8fdc\u7a0b\u8282\u70b9\u670d\u52a1\u5668\uff0c\u5e76\u4f7f\u7528\u670d\u52a1\u5668\u4e0a\u5e26\u6709 sudo \u529f\u80fd\u7684\u8d26\u53f7\uff08\u4e5f\u53ef\u4ee5\u4f7f\u7528root\uff09\u8fdb\u884c\u76f8\u5173\u547d\u4ee4\u7684\u6267\u884c\u3002\u5b83\u53ea\u9700\u5728\u4f60\u7684\u5de5\u4f5c\u7ad9\u673a\u5668\u4e0a\u8fd0\u884c\uff0c\u4e0d\u9700\u8981\u670d\u52a1\u5668\u3001\u6570\u636e\u5e93\u6216\u8005\u5176\u4ed6\u989d\u5916\u8d44\u6e90\u3002 \u5982\u679c\u4f60\u9700\u8981\u7ecf\u5e38\u642d\u5efa\u3001\u5378\u8f7d\u6216\u914d\u7f6e FastCFS\u96c6\u7fa4\uff0c\u53c8\u60f3\u8282\u7701\u5927\u91cf\u7684\u91cd\u590d\u5de5\u4f5c\uff0c\u90a3\u4e48\u5b83\u5f88\u9002\u5408\u4f60\u3002 \u6ce8\uff1a \u8be5\u811a\u672c\u5de5\u5177\u76ee\u524d\u4ec5\u9002\u7528\u4e8e Centos 7, Centos 8\u3002","title":"1. fcfs.sh \u4ecb\u7ecd"},{"location":"fcfs-ops-tool-zh_CN/#11","text":"\u5b83\u80fd\u5feb\u901f\u6784\u5efa FastCFS \u96c6\u7fa4\uff0c\u5305\u62ec\u5b89\u88c5\u8f6f\u4ef6\u3001\u5206\u53d1\u914d\u7f6e\u6587\u4ef6\uff0c\u4ee5\u53ca\u7ba1\u7406\u96c6\u7fa4\u670d\u52a1\u548c\u67e5\u770b\u96c6\u7fa4\u65e5\u5fd7\u3002 \u5b83\u4e5f\u80fd\u5bf9 FastCFS \u5355\u8282\u70b9\u6216\u6574\u4e2a\u96c6\u7fa4\u7684\u76f8\u5173\u8f6f\u4ef6\u8fdb\u884c\u5347\u7ea7\u6216\u964d\u7ea7\u3002 \u5b83\u80fd\u91cd\u65b0\u5b89\u88c5\u8f6f\u4ef6\u6216\u8005\u91cd\u65b0\u5206\u53d1\u914d\u7f6e\u6587\u4ef6\u3002","title":"1.1. \u8fd9\u4e2a\u5de5\u5177\u80fd\u505a\u4ec0\u4e48\uff1f"},{"location":"fcfs-ops-tool-zh_CN/#12","text":"\u5b83\u4e0d\u662f\u4e00\u4e2a\u901a\u7528\u7684\u90e8\u7f72\u5de5\u5177\uff0c \u4ec5\u9002\u7528\u4e8e FastCFS \u96c6\u7fa4\u3002\u9664\u4e86\u5c06\u914d\u7f6e\u6587\u4ef6\u5206\u53d1\u5230\u96c6\u7fa4\u7684\u5404\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u4ee5\u5916\uff0c\u5b83\u4e0d\u5bf9\u96c6\u7fa4\u914d\u7f6e\u505a\u4efb\u4f55\u5904\u7406\u3002\u4f60\u5fc5\u987b\u4e3a\u5b83\u63d0\u4f9b\u53ef\u7528\u7684\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u3002","title":"1.2. \u8fd9\u4e2a\u5de5\u5177\u4e0d\u80fd\u505a\u4ec0\u4e48\uff1f"},{"location":"fcfs-ops-tool-zh_CN/#13-fcfssh","text":"\u4ece\u4ee5\u4e0b\u5730\u5740\u4e0b\u8f7d fcfs.sh\uff0c\u5e76\u5c06\u5176\u653e\u7f6e\u5728\u5de5\u4f5c\u7ad9\u673a\u5668\u7684bin\u76ee\u5f55\u4e0b\uff0c\u4ee5\u4fbf\u547d\u4ee4\u884c\u80fd\u591f\u627e\u5230\uff1a http://fastcfs.net/fastcfs/ops/fcfs.sh \u83b7\u53d6\u547d\u4ee4\uff1a sudo curl -o /usr/bin/fcfs.sh http://fastcfs.net/fastcfs/ops/fcfs.sh && sudo chmod +x /usr/bin/fcfs.sh \u4e0b\u8f7d\u5b8c\u6210\u540e\u53ef\u901a\u8fc7\u547d\u4ee4 which fcfs.sh \u6d4b\u8bd5\u5de5\u5177\u662f\u5426\u751f\u6548\u3002","title":"1.3. \u83b7\u53d6 fcfs.sh"},{"location":"fcfs-ops-tool-zh_CN/#14","text":"fcfs.settings -- \u96c6\u7fa4\u8fd0\u7ef4\u914d\u7f6e\uff0c\u653e\u7f6e\u5728\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u4e2d conf -- \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\uff0c\u653e\u7f6e\u5728\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u4e2d \u8fdc\u7a0b\u670d\u52a1\u5668 SSH \u514d\u5bc6\u767b\u5f55\uff0c\u53c2\u89c1 5. SSH \u514d\u5bc6\u767b\u5f55 \u4f60\u5fc5\u987b\u4e3a\u6bcf\u4e2a\u96c6\u7fa4\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684\u5de5\u4f5c\u76ee\u5f55\uff08\u4f8b\u5982\uff1a fastcfs-ops \uff09\uff0c\u5c06 fcfs.settings \u548c conf \u653e\u5165\u5176\u4e2d\u3002\u7136\u540e\u6240\u6709\u9488\u5bf9\u8be5\u96c6\u7fa4\u7684\u540e\u7eed\u547d\u4ee4\u64cd\u4f5c\uff0c\u90fd\u5fc5\u987b\u5728\u8be5\u5de5\u4f5c\u76ee\u5f55\u4e2d\u6267\u884c\u3002","title":"1.4. \u4f7f\u7528\u5de5\u5177\u7684\u524d\u7f6e\u6761\u4ef6"},{"location":"fcfs-ops-tool-zh_CN/#141-fcfssettings","text":"fcfs.settings \u5305\u62ec\u4e24\u4e2a\u5b57\u6bb5 fastcfs_version \u548c fuseclient_ips \uff0cfastcfs_version \u7528\u4e8e\u6307\u5b9a FastCFS \u4e3b\u7248\u672c\u53f7\uff0cfuseclient_ips \u7528\u4e8e\u6307\u5b9a\u8981\u90e8\u7f72 fuse client \u7684\u670d\u52a1\u5668\u4e3b\u673a\u3002\u5f53\u9700\u8981\u5bf9 FastCFS \u96c6\u7fa4\u8f6f\u4ef6\u8fdb\u884c\u5347\u7ea7\u6216\u964d\u7ea7\u64cd\u4f5c\u65f6\uff0c\u4f60\u9700\u8981\u5148\u4fee\u6539 fastcfs_version \u5bf9\u5e94\u7684\u7248\u672c\u53f7\u4e3a\u4f60\u671f\u671b\u7684\u7248\u672c\u3002 fcfs.settings \u914d\u7f6e\u6587\u4ef6\u5185\u5bb9\u4e3e\u4f8b: # \u8981\u5b89\u88c5\u7684\u96c6\u7fa4\u7248\u672c\u53f7\uff08\u4f8b\u5982\uff1a2.2.0\uff09 fastcfs_version=2.2.0 # \u8981\u5b89\u88c5 fuseclient \u5ba2\u6237\u7aef\u7684IP\u5217\u8868\uff0c\u591a\u4e2aip\u4ee5\u82f1\u6587\u9017\u53f7\u5206\u9694 fuseclient_ips=10.0.1.14 \u6ce8\uff1a\u63a8\u8350\u4f7f\u7528 2.2.0 \u53ca\u4ee5\u540e\u7684\u7248\u672c\u7528\u4e8e\u96c6\u7fa4\u90e8\u7f72\u3002","title":"1.4.1. fcfs.settings"},{"location":"fcfs-ops-tool-zh_CN/#142-conf","text":"FastCFS\u96c6\u7fa4\u7684\u6240\u6709\u914d\u7f6e\u6587\u4ef6\u5fc5\u987b\u63d0\u524d\u653e\u7f6e\u5728\u5de5\u4f5c\u76ee\u5f55\u4e2d\u7684 conf \u76ee\u5f55\uff0cconf \u5305\u542b\u4ee5\u4e0b\u56db\u4e2a\u5b50\u76ee\u5f55\uff1a fdir -- fdir \u670d\u52a1\u5668\u7684\u914d\u7f6e\u6587\u4ef6 fstore -- fstore \u670d\u52a1\u5668\u7684\u914d\u7f6e\u6587\u4ef6 auth -- fauth \u670d\u52a1\u5668\u7684\u914d\u7f6e\u6587\u4ef6 fcfs -- fuseclient \u5ba2\u6237\u7aef\u7684\u914d\u7f6e\u6587\u4ef6 \u83b7\u53d6\u914d\u7f6e\u6587\u4ef6\u6837\u4f8b mkdir fastcfs-ops cd fastcfs-ops/ curl -o fcfs-config-sample.tar.gz http://fastcfs.net/fastcfs/ops/fcfs-config-sample.tar.gz tar -xzvf fcfs-config-sample.tar.gz \u4f7f\u7528fcfs_conf.sh\u521b\u5efa\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6 \u4e5f\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\uff0c\u4f7f\u7528\u811a\u672c\u5de5\u5177 fcfs_conf.sh \u521b\u5efa FastCFS\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u3002\u53c2\u89c1\uff1a fcfs_conf.sh","title":"1.4.2. conf"},{"location":"fcfs-ops-tool-zh_CN/#15-ssh","text":"fcfs.sh \u5c06\u901a\u8fc7 SSH \u8fde\u63a5\u6240\u6709\u96c6\u7fa4\u4e3b\u673a\u3002\u5b83\u9700\u8981\u5de5\u4f5c\u7ad9\u673a\u5668\u53ef\u4ee5\u901a\u8fc7 SSH \u5728\u8fdc\u7a0b\u4e3b\u673a\u4e0a\u6267\u884c\u811a\u672c\uff0c\u6267\u884c\u547d\u4ee4\u7684\u7528\u6237\u8eab\u4efd\u53ef\u4ee5\u662f root \u6216\u5e26 sudo\u7684\u7528\u6237\uff0c\u5e76\u4e14\u5fc5\u987b\u652f\u6301\u514d\u5bc6\u767b\u5f55\u3002 \u4e3a\u4e86\u5f00\u542f\u514d\u5bc6\u767b\u5f55\uff0c\u4f60\u9700\u8981\u5148\u4e3a SSH \u751f\u6210 rsa \u516c\u94a5/\u79c1\u94a5\u5bf9\uff1a ssh-keygen -t rsa -C cfs -f cfs-ssh-key \u5c06\u751f\u6210\u5bc6\u94a5\u6587\u4ef6\uff1a cfs-ssh-key -- \u79c1\u94a5\u6587\u4ef6 cfs-ssh-key.pub -- \u516c\u94a5\u6587\u4ef6","title":"1.5. SSH \u514d\u5bc6\u767b\u5f55"},{"location":"fcfs-ops-tool-zh_CN/#151","text":"\u5c06\u79c1\u94a5\u6587\u4ef6 cfs-ssh-key \u62f7\u8d1d\u5230\u5de5\u4f5c\u7ad9\u673a\u5668\u7684\u5f53\u524d\u7528\u6237home\u76ee\u5f55 \"~/.ssh/\" \uff0c\u7136\u540e\u5c06\u4e0b\u9762\u7684\u914d\u7f6e\u7247\u6bb5\u52a0\u5165\u914d\u7f6e\u6587\u4ef6 ~/.ssh/config\uff08\u6bcf\u4e2a\u96c6\u7fa4\u4e3b\u673a\u4e00\u4efd\uff09\uff1a Host [node ip] HostName [node host name] User [ssh user] Port 22 PubkeyAuthentication yes IdentityFile ~/.ssh/cfs-ssh-key","title":"1.5.1. \u90e8\u7f72\u79c1\u94a5"},{"location":"fcfs-ops-tool-zh_CN/#152","text":"\u5c06\u516c\u94a5\u6587\u4ef6\u5185\u5bb9\u52a0\u5165\u5230\u6bcf\u4e2a\u8282\u70b9\u670d\u52a1\u5668sudo \u7528\u6237\u7684home\u76ee\u5f55\u4e0b .ssh/authorized_keys \u6587\u4ef6\u4e2d\uff1a ssh-copy-id -i cfs-ssh-key.pub [user name]@[node server ip] \u5e76\u786e\u4fdd\u670d\u52a1\u5668\u4e0asshd\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u5f00\u542f\u4e86\u4ee5\u4e0b\u914d\u7f6e\u53c2\u6570\uff1a RSAAuthentication yes PubkeyAuthentication yes AuthorizedKeysFile .ssh/authorized_keys","title":"1.5.2. \u90e8\u7f72\u516c\u94a5"},{"location":"fcfs-ops-tool-zh_CN/#16","text":"fcfs.sh\u5de5\u5177\u7684\u547d\u4ee4\u5305\u62ec\u4e09\u90e8\u5206\uff1acommand\uff0cmodule \u548c node\u3002Command \u662f\u5fc5\u987b\u7684\uff0cmodule \u548c node \u662f\u53ef\u9009\u7684\u3002 \u7528\u6cd5: fcfs.sh command [module] [node] Commands : setup -- \u5b89\u88c5\u5e76\u8fd0\u884c FastCFS \u8f6f\u4ef6\u7684\u5feb\u6377\u547d\u4ee4\uff0c\u7ec4\u5408\u4e86 install\u3001config \u548c restart\u4e09\u4e2a\u547d\u4ee4 install -- \u5b89\u88c5 FastCFS \u8f6f\u4ef6 reinstall -- \u91cd\u65b0\u5b89\u88c5 FastCFS \u8f6f\u4ef6 remove -- \u79fb\u9664 FastCFS \u8f6f\u4ef6\uff0c\u529f\u80fd\u4e0e erase \u547d\u4ee4\u76f8\u540c erase -- \u79fb\u9664 FastCFS \u8f6f\u4ef6 config -- \u5c06\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u62f7\u8d1d\u5230\u76ee\u6807\u4e3b\u673a\u76ee\u5f55 start -- \u542f\u52a8\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u6216\u5355\u4e2a\u6a21\u5757\u670d\u52a1 restart -- \u91cd\u542f\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u6216\u5355\u4e2a\u6a21\u5757\u670d\u52a1 stop -- \u505c\u6b62\u96c6\u7fa4\u4e2d\u7684\u6240\u6709\u6216\u5355\u4e2a\u6a21\u5757\u670d\u52a1 tail -- \u67e5\u770b\u6307\u5b9a\u6a21\u5757\u65e5\u5fd7\u7684\u6700\u540e\u4e00\u90e8\u5206\u5185\u5bb9\uff08\u7b49\u540c\u4e8e\u8fdc\u7a0b\u670d\u52a1\u5668\u7684tail\u547d\u4ee4\uff09 status -- \u67e5\u770b\u6307\u5b9a\u6a21\u5757\u670d\u52a1\u8fdb\u7a0b\u72b6\u6001 help -- \u67e5\u770b\u547d\u4ee4\u7684\u8be6\u7ec6\u8bf4\u660e\u548c\u6837\u4f8b Modules : fdir -- fastDIR \u670d\u52a1\u5668 fstore -- faststore \u670d\u52a1\u5668 fauth -- FastCFS auth \u670d\u52a1\u5668 fuseclient -- FastCFS fuse \u5ba2\u6237\u7aef Node : \u53ef\u4ee5\u7528\u4e8e\u6307\u5b9a\u8981\u6267\u884c\u547d\u4ee4\u7684\u5355\u4e2a\u96c6\u7fa4\u8282\u70b9\u4e3b\u673a\u540d\u6216IP\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\uff0c\u547d\u4ee4\u5c06\u5728\u6240\u6709\u8282\u70b9\u4e0a\u6267\u884c\u3002node \u53c2\u6570\u5fc5\u987b\u5728\u4f7f\u7528\u4e86 module \u53c2\u6570\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\uff0c\u4e0d\u80fd\u5355\u72ec\u76f4\u63a5\u4f7f\u7528\u3002","title":"1.6. \u5de5\u5177\u547d\u4ee4\u4ecb\u7ecd"},{"location":"fcfs-ops-tool-zh_CN/#161-fastcfs","text":"\u4f60\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 setup \u5728\u96c6\u7fa4\u8282\u70b9\u4e0a\u5feb\u901f\u5b89\u88c5 FastCFS \u8f6f\u4ef6\uff0c\u5e76\u81ea\u52a8\u914d\u7f6e\u548c\u542f\u52a8\u6a21\u5757\u670d\u52a1. \u6837\u4f8b \u5b89\u88c5\u5e76\u542f\u52a8\u6574\u4e2a FastCFS \u96c6\u7fa4: fcfs.sh setup \u5728\u6240\u6709 fdir \u8282\u70b9\u4e0a\u5b89\u88c5\u5e76\u542f\u52a8 fdir \u670d\u52a1\u5668: fcfs.sh setup fdir \u5728\u8282\u70b9 10.0.1.11 \u4e0a\u5b89\u88c5 fdir \u670d\u52a1\u5668\uff1a fcfs.sh setup fdir 10.0.1.11 \u8282\u70b9 10.0.1.11 \u5fc5\u987b\u5c5e\u4e8e fdir \u96c6\u7fa4\uff0c\u5426\u5219\u547d\u4ee4\u5c06\u5931\u8d25\u3002","title":"1.6.1. FastCFS \u4e00\u952e\u5b89\u88c5"},{"location":"fcfs-ops-tool-zh_CN/#162-fastcfs","text":"\u4f60\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 install \u53ea\u5b89\u88c5 FastCFS \u8f6f\u4ef6\u3002\u8fd9\u4e2a\u547d\u4ee4\u662f setup \u547d\u4ee4\u7684\u4e00\u90e8\u5206\u3002 \u7b2c\u4e00\u6b21\u6267\u884c\u8be5\u547d\u4ee4\u65f6\uff0c\u5fc5\u987b\u5728\u6240\u6709\u8282\u70b9\u4e0a\u5b89\u88c5\u6240\u6709\u8f6f\u4ef6\uff08\u4e5f\u5c31\u662f\u8bf4\uff0c\u6b64\u65f6\u4e0d\u80fd\u6307\u5b9amodule\u548cnode\uff09\u3002\u4e4b\u540e\uff0c\u5f53\u9700\u8981\u589e\u52a0\u65b0\u8282\u70b9\u65f6\uff0c\u53ef\u4ee5\u643a\u5e26 module \u548c node \u53c2\u6570\u4f7f\u7528\u3002 \u6837\u4f8b \u5728\u6240\u6709\u8282\u70b9\u5b89\u88c5\u6240\u9700\u7684 FastCFS \u8f6f\u4ef6: fcfs.sh install \u5728\u6240\u6709 fdir \u8282\u70b9\u4e0a\u5b89\u88c5 fdir \u670d\u52a1\u5668\uff1a fcfs.sh install fdir \u5728 10.0.1.11 \u8282\u70b9\u4e0a\u5b89\u88c5 fdir \u670d\u52a1\u5668\uff1a fcfs.sh install fdir 10.0.1.11","title":"1.6.2. FastCFS \u8f6f\u4ef6\u5b89\u88c5"},{"location":"fcfs-ops-tool-zh_CN/#163-fastcfs","text":"\u5f53\u4f60\u60f3\u5347\u7ea7 FastCFS \u8f6f\u4ef6\u65f6\uff0c\u4f60\u9700\u8981\u5148\u5c06\u914d\u7f6e\u6587\u4ef6 fcfs.settings \u4e2d\u7684 fastcfs_version \u5b57\u6bb5\u7684\u503c\u4fee\u6539\u4e3a\u65b0\u7684\u7248\u672c\u53f7\uff0c\u7136\u540e\u6267\u884c install \u547d\u4ee4\uff1a fcfs.sh install","title":"1.6.3. FastCFS \u8f6f\u4ef6\u5347\u7ea7"},{"location":"fcfs-ops-tool-zh_CN/#164-fastcfs","text":"\u5982\u679c\u4f60\u786e\u5b9e\u9700\u8981\u5c06 FastCFS \u8f6f\u4ef6\u964d\u7ea7\u4e3a\u65e7\u7684\u7248\u672c\uff0c\u4f60\u5fc5\u987b\u5148\u6267\u884c remove \u547d\u4ee4\uff1a fcfs.sh remove \u6216: fcfs.sh erase \u5e76\u5c06\u5b57\u6bb5 fastcfs_version \u7684\u503c\u4fee\u6539\u4e3a\u65e7\u7684\u7248\u672c\u53f7\uff0c\u7136\u540e\u6267\u884c install \u547d\u4ee4\uff1a fcfs.sh install","title":"1.6.4. FastCFS \u8f6f\u4ef6\u964d\u7ea7"},{"location":"fcfs-ops-tool-zh_CN/#165-fastcfs","text":"\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 remove \u6216 erase \u5378\u8f7d FastCFS \u8f6f\u4ef6\u3002 \u6837\u4f8b \u79fb\u9664\u6240\u6709\u8282\u70b9\u4e0a\u7684\u6240\u6709\u8f6f\u4ef6\uff1a fcfs.sh remove \u79fb\u9664\u6240\u6709 fdir \u8282\u70b9\u4e0a\u7684 fdir \u670d\u52a1\u5668\uff1a fcfs.sh remove fdir \u79fb\u9664\u8282\u70b910.0.1.11\u4e0a\u7684 fdir \u670d\u52a1\u5668\uff1a fcfs.sh remove fdir 10.0.1.11","title":"1.6.5. FastCFS \u8f6f\u4ef6\u5378\u8f7d"},{"location":"fcfs-ops-tool-zh_CN/#166-fastcfs","text":"\u6210\u529f\u5b89\u88c5 FastCFS \u8f6f\u4ef6\u4e4b\u540e\uff0c\u4f60\u5fc5\u987b\u901a\u8fc7\u6267\u884c\u547d\u4ee4 config \u6765\u5c06\u914d\u7f6e\u6587\u4ef6\u5206\u53d1\u5230\u5404\u4e2a\u96c6\u7fa4\u8282\u70b9\u3002\u5982\u679c\u8282\u70b9\u4e0a\u7684\u76ee\u6807\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u5b83\u5c06\u4f1a\u81ea\u52a8\u521b\u5efa\u5b83\u4eec\u3002 \u6837\u4f8b \u5c06\u6240\u6709\u6a21\u5757\u7684\u914d\u7f6e\u6587\u4ef6\u5206\u53d1\u5230\u6240\u6709\u76f8\u5e94\u7684\u8282\u70b9\u4e0a\uff1a fcfs.sh config \u5c06 fdir \u670d\u52a1\u5668\u7684\u914d\u7f6e\u6587\u4ef6\u5206\u53d1\u5230\u6240\u6709 fdir \u8282\u70b9\u4e0a\uff1a fcfs.sh config fdir \u5c06 fdir \u670d\u52a1\u5668\u7684\u914d\u7f6e\u6587\u4ef6\u5206\u53d1\u5230 fdir \u8282\u70b9 10.0.1.11 \u4e0a\uff1a fcfs.sh config fdir 10.0.1.11","title":"1.6.6. FastCFS \u914d\u7f6e\u6587\u4ef6\u5206\u53d1"},{"location":"fcfs-ops-tool-zh_CN/#167","text":"\u7ba1\u7406\u96c6\u7fa4\u7684\u547d\u4ee4\u5305\u62ec start , stop , restart \u3002\u4f60\u53ef\u4ee5\u540c\u65f6\u64cd\u4f5c\u6240\u6709\u6a21\u5757\u7684\u6240\u6709\u8282\u70b9\uff0c\u4e5f\u53ef\u4ee5\u540c\u65f6\u64cd\u4f5c\u67d0\u4e00\u6a21\u5757\u7684\u6240\u6709\u8282\u70b9\uff0c\u4e5f\u53ef\u4ee5\u5355\u72ec\u64cd\u4f5c\u67d0\u4e00\u6a21\u5757\u7684\u67d0\u4e00\u4e2a\u8282\u70b9\u3002 \u5982\u679c\u60f3\u64cd\u4f5c\u5355\u4e2a\u8282\u70b9\uff0c\u4f60\u5fc5\u987b\u5728 module \u53c2\u6570\u540e\u6307\u5b9a node\uff08host\uff09\u53c2\u6570\uff08\u4e5f\u5c31\u662f\u8bf4\uff0c\u4f60\u4e0d\u80fd\u540c\u65f6\u64cd\u4f5c\u67d0\u4e00\u8282\u70b9\u4e0a\u7684\u6240\u6709\u6a21\u5757\uff09\u3002 \u6837\u4f8b \u542f\u52a8\u6240\u6709\u8282\u70b9\u4e0a\u7684\u6240\u6709\u670d\u52a1\uff1a fcfs.sh start \u91cd\u542f\u6240\u6709 fdir \u8282\u70b9\u4e0a\u7684 fdir \u670d\u52a1\uff1a fcfs.sh restart fdir \u505c\u6b62 \u8282\u70b910.0.1.11\u4e0a\u7684 fdir \u670d\u52a1\uff1a fcfs.sh stop fdir 10.0.1.11","title":"1.6.7. \u96c6\u7fa4\u7ba1\u7406"},{"location":"fcfs-ops-tool-zh_CN/#168","text":"\u5f53\u4f60\u60f3\u67e5\u770b FastCFS \u670d\u52a1\u7684\u6700\u65b0\u65e5\u5fd7\u65f6\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 tail \u6765\u663e\u793a\u6307\u5b9a\u6a21\u5757\u65e5\u5fd7\u6587\u4ef6\u7684\u6700\u540e\u4e00\u90e8\u5206\u3002 \u6837\u4f8b \u663e\u793a 10.0.1.11\u8282\u70b9\u4e0a fdir \u670d\u52a1\u65e5\u5fd7\u6587\u4ef6\u7684\u6700\u540e 100 \u884c\uff1a fcfs.sh tail fdir 10.0.1.11 -n 100 \u6216: fcfs.sh tail fdir 10.0.1.11 -100 \u663e\u793a\u6bcf\u4e2a fdir \u670d\u52a1\u5668\u65e5\u5fd7\u7684\u6700\u540e 10 \u884c\uff1a fcfs.sh tail fdir","title":"1.6.8. \u67e5\u770b\u96c6\u7fa4\u65e5\u5fd7"},{"location":"fcfs-ops-tool-zh_CN/#169","text":"\u5f53\u4f60\u60f3\u67e5\u770b FastCFS \u670d\u52a1\u7684\u8fdb\u7a0b\u72b6\u6001\u65f6\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 status \u6765\u663e\u793a\u6307\u5b9a\u6a21\u5757\u7684\u670d\u52a1\u8fdb\u7a0b\u72b6\u6001\u3002 \u6837\u4f8b \u663e\u793a 10.0.1.11 \u8282\u70b9\u4e0a fdir \u670d\u52a1\u8fdb\u7a0b\u72b6\u6001\uff1a fcfs.sh status fdir 10.0.1.11 \u663e\u793a\u6bcf\u4e2a fdir \u670d\u52a1\u5668\u8fdb\u7a0b\u72b6\u6001\uff1a fcfs.sh status fdir \u663e\u793a\u6240\u6709\u670d\u52a1\u8fdb\u7a0b\u72b6\u6001\uff1a fcfs.sh status","title":"1.6.9. \u67e5\u770b\u96c6\u7fa4\u670d\u52a1\u8fdb\u7a0b\u72b6\u6001"},{"location":"fcfs-ops-tool-zh_CN/#2-fcfs_confsh","text":"fcfs_conf.sh \u662f\u4e00\u4e2a\u5feb\u901f\u521b\u5efa FastCFS\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u7684\u8fd0\u7ef4\u5de5\u5177\u3002\u5b83\u901a\u8fc7 bash shell \u8bbf\u95ee\u672c\u5730\u914d\u7f6e\u6587\u4ef6 fcfs_conf.settings\u3002\u5b83\u53ea\u9700\u5728\u4f60\u7684\u5de5\u4f5c\u7ad9\u673a\u5668\u4e0a\u8fd0\u884c\uff0c\u4e0d\u9700\u8981\u670d\u52a1\u5668\u3001\u6570\u636e\u5e93\u6216\u8005\u5176\u4ed6\u989d\u5916\u8d44\u6e90\u3002 \u5982\u679c\u4f60\u9700\u8981\u5728\u6307\u5b9a\u7684\u670d\u52a1\u5668IP\u5217\u8868\u4e0a\u5feb\u901f\u751f\u6210\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\uff0c\u90a3\u4e48\u5b83\u5f88\u9002\u5408\u4f60\u3002","title":"2. fcfs_conf.sh \u4ecb\u7ecd"},{"location":"fcfs-ops-tool-zh_CN/#21-fcfs_confsh","text":"\u4ece\u4ee5\u4e0b\u5730\u5740\u4e0b\u8f7d fcfs_conf.sh\uff0c\u5e76\u5c06\u5176\u653e\u7f6e\u5728\u5de5\u4f5c\u7ad9\u673a\u5668\u7684bin\u76ee\u5f55\u4e0b\uff0c\u4ee5\u4fbf\u547d\u4ee4\u884c\u80fd\u591f\u627e\u5230\uff1a http://fastcfs.net/fastcfs/ops/fcfs_conf.sh \u83b7\u53d6\u547d\u4ee4\uff1a sudo curl -o /usr/bin/fcfs_conf.sh http://fastcfs.net/fastcfs/ops/fcfs_conf.sh && sudo chmod +x /usr/bin/fcfs_conf.sh \u4e0b\u8f7d\u5b8c\u6210\u540e\u53ef\u901a\u8fc7\u547d\u4ee4 which fcfs_conf.sh \u6d4b\u8bd5\u5de5\u5177\u662f\u5426\u751f\u6548\u3002","title":"2.1. \u83b7\u53d6 fcfs_conf.sh"},{"location":"fcfs-ops-tool-zh_CN/#22-fcfs_confsh","text":"fcfs_conf.settings -- \u751f\u6210\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u7684\u53c2\u6570\u914d\u7f6e\uff0c\u653e\u7f6e\u5728\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u4e2d \u4f60\u5fc5\u987b\u4e3a\u6bcf\u4e2a\u96c6\u7fa4\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684\u5de5\u4f5c\u76ee\u5f55\uff08\u4f8b\u5982\uff1a fastcfs-ops \uff09\uff0c\u5c06 fcfs_conf.settings \u653e\u5165\u5176\u4e2d\u3002\u7136\u540e\u5728\u8be5\u5de5\u4f5c\u76ee\u5f55\u4e2d\u6267\u884cfcfs_conf.sh\u547d\u4ee4\u3002","title":"2.2. \u4f7f\u7528fcfs_conf.sh\u7684\u524d\u7f6e\u6761\u4ef6"},{"location":"fcfs-ops-tool-zh_CN/#221-fcfs_confsettings","text":"fcfs_conf.settings \u5305\u62ec\u4ee5\u4e0b\u516d\u79cd\u5b57\u6bb5\uff1a fastcfs_version -- \u8981\u751f\u6210\u54ea\u4e2a\u7248\u672c\u96c6\u7fa4\u7684\u914d\u7f6e\u6587\u4ef6 auth_ips -- FastCFS auth \u670d\u52a1\u5668IP\u5730\u5740\u5217\u8868\uff0c\u591a\u4e2aIP\u4ee5\u82f1\u6587\u534a\u89d2\u9017\u53f7\u5206\u9694 fdir_ips -- fastDIR\u670d\u52a1\u5668IP\u5730\u5740\u5217\u8868\uff0c\u591a\u4e2aIP\u4ee5\u82f1\u6587\u534a\u89d2\u9017\u53f7\u5206\u9694 fstore_group_count -- faststore\u670d\u52a1\u5668\u5206\u7ec4\u6570\u91cf fstore_group_[N] -- faststore\u670d\u52a1\u5668\u5206\u7ec4IP\u5730\u5740\u5217\u8868\uff0c\u591a\u4e2aIP\u4ee5\u82f1\u6587\u534a\u89d2\u9017\u53f7\u5206\u9694 data_group_count -- faststore\u670d\u52a1\u533a\u6570\u636e\u5206\u7ec4\u6570\uff08\u63a8\u835064\u7684\u6574\u6570\u500d\uff09 \u53c2\u6570 fstore_group_count \u8bbe\u7f6e\u7684\u6570\u91cf\u5fc5\u987b\u4e0e fstore_group_[N] \u6570\u91cf\u76f8\u5339\u914d\uff0c\u5e76\u4e14\u7f16\u53f7\u4ece1\u5f00\u59cb\u9012\u589e\u3002 fcfs_conf.settings \u914d\u7f6e\u6587\u4ef6\u5185\u5bb9\u4e3e\u4f8b: # \u8981\u751f\u6210\u914d\u7f6e\u7684\u96c6\u7fa4\u7248\u672c\u53f7\uff08\u4f8b\u5982\uff1a2.3.0\uff09 fastcfs_version=2.3.0 # \u96c6\u7fa4\u4e3b\u673a\u5217\u8868\u548c\u5206\u7ec4\u6570 auth_ips=10.0.1.11,10.0.1.12,10.0.1.13 fdir_ips=10.0.1.11,10.0.1.12,10.0.1.13 fstore_group_count=2 fstore_group_1=10.0.1.11,10.0.1.12,10.0.1.13 fstore_group_2=10.0.2.11,10.0.2.12,10.0.2.13 data_group_count=128 \u6ce8\uff1a\u63a8\u8350\u4f7f\u7528 2.3.0 \u53ca\u4ee5\u540e\u7684\u7248\u672c\u7528\u4e8e\u751f\u6210\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u3002","title":"2.2.1. fcfs_conf.settings"},{"location":"fcfs-ops-tool-zh_CN/#23-fcfs_confsh","text":"fcfs_conf.sh\u5de5\u5177\u7684\u547d\u4ee4\u5305\u62ec\u4e24\u90e8\u5206\uff1acommand\uff0cmodule\u3002Command \u662f\u5fc5\u987b\u7684\uff0cmodule \u662f\u53ef\u9009\u7684\u3002 \u7528\u6cd5: fcfs.sh command [module] Commands : create -- \u521b\u5efa\u914d\u7f6e\u6587\u4ef6 help -- \u67e5\u770b\u547d\u4ee4\u7684\u8be6\u7ec6\u8bf4\u660e\u548c\u6837\u4f8b Modules : fdir -- fastDIR \u670d\u52a1\u5668 fstore -- faststore \u670d\u52a1\u5668 fauth -- FastCFS auth \u670d\u52a1\u5668 fuseclient -- FastCFS fuse \u5ba2\u6237\u7aef","title":"2.3. fcfs_conf.sh\u5de5\u5177\u547d\u4ee4\u4ecb\u7ecd"},{"location":"fcfs-ops-tool-zh_CN/#3-conf_tpl_tarsh","text":"\u4e00\u4e2a\u7b80\u5355\u7684\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u6a21\u7248\u6253\u5305\u5de5\u5177\uff0c\u4ec5\u4f9bFastCFS\u5f00\u53d1\u8005\u4f7f\u7528\u3002 \u5b83\u5c06\u4eceFastCFS, fastDIR, faststore\u7684\u6e90\u4ee3\u7801\u4ed3\u5e93\u5c06FastCFS \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\u6a21\u7248\u6253\u5305\u6210tar\u5305\u3002 \u8fd9\u4e09\u4e2a\u4ed3\u5e93\u5fc5\u987b\u5728\u540c\u4e00\u4e2a\u76ee\u5f55\uff0c\u5e76\u4e14 conf_tpl_tar.sh \u5fc5\u987b\u5728\u5b50\u76ee\u5f55 FastCFS/shell/ \u4e2d\u6267\u884c\u3002 \u547d\u4ee4\u683c\u5f0f: conf_tpl_tar.sh <version> [update] version -- \u8981\u521b\u5efa\u6a21\u7248\u538b\u7f29\u5305\u7684\u96c6\u7fa4\u7248\u672c\u53f7. update -- \u5728\u521b\u5efa\u4e4b\u524d\u83b7\u53d6\u6700\u65b0\u7684\u6e90\u4ee3\u7801\uff0c\u53ef\u9009\u3002 \u4e3e\u4f8b: ./conf_tpl_tar.sh 2.3.0 update \u5c06\u5728\u5f53\u524d\u76ee\u5f55\u521b\u5efa\u914d\u7f6e\u6a21\u7248\u538b\u7f29\u5305\u6587\u4ef6 conf.2.3.0.tpl.tar.gz \u3002","title":"3. conf_tpl_tar.sh \u4ecb\u7ecd"},{"location":"fcfs-ops-tool/","text":"FastCFS ops tools introduction \u00b6 fcfs.sh -- a ops tool for quickly manage FastCFS clusters fcfs_conf.sh -- a ops tool for quickly create FastCFS clusters config files 1. fcfs.sh introduction \u00b6 fcfs.sh is a ops tool for quickly deploy and manage FastCFS clusters. It only relying on SSH access to the servers and sudo. It runs fully on your workstation, requiring no servers, databases, or anything like that. If you set up and tear down FastCFS clusters a lot, and want minimal extra repeating works, this is for you. Tip\uff1a This shell only support for Centos 7, Centos 8. 1.1. What this tool can do? \u00b6 It can quickly setup FastCFS cluster, include install softwares, distribute config files, manage cluster services and query cluster logs. It can also upgrade or downgrade FastCFS softwares on single node or full cluster. It can reinstall software or redistribute config files. 1.2. What this tool cannot do? \u00b6 It is not a generic deployment tool, it is only for FastCFS. It does not handle cluster configuration beyond distribute config files to cluster servers. You must provide usable cluster config files for it. 1.3. Fetch fcfs.sh \u00b6 Get it from http://fastcfs.net/fastcfs/ops/fcfs.sh and put it in workstation's bin path. sudo curl -o /usr/bin/fcfs.sh http://fastcfs.net/fastcfs/ops/fcfs.sh && sudo chmod +x /usr/bin/fcfs.sh 1.4. Use preconditions \u00b6 fcfs.settings -- cluster ops settings, in current working directory conf -- cluster config files, in current working directory remote server SSH password-free login, see also SSH password-free login You must create a independent working directory(exp: fastcfs-ops ) for a cluster, put \"fcfs.settings\" and \"conf\" into it. And then, all subsequent commands for this cluster must be execute at the same working directory. 1.4.1. fcfs.settings \u00b6 fcfs.settings include two fields fastcfs_version and fuseclient_ips , fastcfs_version specify FastCFS main version number, fuseclient_ips specify host to deploy fuse client. When upgrade or downgrade FastCFS, you need change fastcfs_version to version you expect. fcfs.settings content Example: # Version of FastCFS cluster\uff08exp\uff1a2.2.0\uff09 fastcfs_version=2.2.0 # Hosts which fuseclient will install\uff0cmultiple hosts separated by comma fuseclient_ips=10.0.1.14 Tip\uff1aUse version 2.2.0 and later for deploy. 1.4.2. conf \u00b6 All config files of FastCFS cluster must be put into working directory beforehand, conf include four subdirectories\uff1a fdir -- config files for fdir server fstore -- config files for fstore server auth -- config files for fauth server fcfs -- config files for fuseclient Fetch config sample mkdir fastcfs-ops cd fastcfs-ops/ curl -o fcfs-config-sample.tar.gz http://fastcfs.net/fastcfs/ops/fcfs-config-sample.tar.gz tar -xzvf fcfs-config-sample.tar.gz Create config files use fcfs_conf.sh You can also create FastCFS cluster config files use fcfs_conf.sh according to your own needs. see also fcfs_conf.sh 1.5. SSH password-free login \u00b6 fcfs.sh will connect to cluster hosts via SSH. It requires that the workstation machine from which the shell is being run can connect via SSH as root(or sudo user) without password into cluster nodes. To enable password-free login, you need generate rsa key pair for ssh: ssh-keygen -t rsa -C cfs -f cfs-ssh-key it will generate key files\uff1a cfs-ssh-key -- private key file cfs-ssh-key.pub -- public key file 1.5.1. Deploy private key \u00b6 Copy private key file cfs-ssh-key to workstation machine's current user directory \"~/.ssh/\" , and add the following phrase to ~/.ssh/config(for each host): Host [node ip] HostName [node host name] User [ssh user] Port 22 PubkeyAuthentication yes IdentityFile ~/.ssh/cfs-ssh-key 1.5.2. Deploy public key \u00b6 Copy public key to file .ssh/authorized_keys in every node server's sudo user home: ssh-copy-id -i cfs-ssh-key.pub [user name]@[node server ip] and ensure that the following lines are in server's sshd config: RSAAuthentication yes PubkeyAuthentication yes AuthorizedKeysFile .ssh/authorized_keys 1.6. Tool commands introduction \u00b6 The tool's command include three parts: command, module and node. Command is required, module and node are optional. Usage: fcfs.sh command [module] [node] Commands : setup -- Setup FastCFS softwares, a shortcut command combines install, config, and restart install -- Install FastCFS softwares reinstall -- Reinstall FastCFS softwares remove -- Remove FastCFS softwares, same as erase erase -- Erase FastCFS softwares config -- Copy cluster config files to target host path start -- Start all or one module service in cluster restart -- Restart all or one module service in cluster stop -- Stop all or one module service in cluster tail -- Display the last part of the specified module's log status -- Display the service processes status help -- Show the detail of commands and examples Modules : fdir -- fastDIR server fstore -- faststore server fauth -- FastCFS auth server fuseclient -- FastCFS fuse client Node : You can specify a single cluster IP, or command will be executed on all nodes. 1.6.1. FastCFS setup \u00b6 You can use command setup to quickly setup FastCFS softwares on nodes, then config and start module services. Examples Setup the full FastCFS cluster: fcfs.sh setup Setup fdir server on all fdir nodes: fcfs.sh setup fdir Setup fdir server on node 10.0.1.11: fcfs.sh setup fdir 10.0.1.11 node 10.0.1.11 must belong to fdir cluster, or it will fail. 1.6.2. FastCFS softwares install \u00b6 You can use command install to install softwares only. This command is part of setup. First time, you must install all softwares on all nodes(that is to say you can't specify module and node). After that, you can install a new node with module and node params. Examples Install all FastCFS softwares on all nodes: fcfs.sh install Install fdir server on all fdir nodes: fcfs.sh install fdir Install fdir server on node 10.0.1.11: fcfs.sh install fdir 10.0.1.11 1.6.3. FastCFS softwares upgrade \u00b6 When you want to upgrade FastCFS's software, you can modify fcfs.settings, change field fastcfs_version to new version, then execute install command: fcfs.sh install 1.6.4. FastCFS softwares downgrade \u00b6 If you realy want to downgrade FastCFS softwares to an old version, you must execute command remove first: fcfs.sh remove or: fcfs.sh erase and change field fastcfs_version to old version, then execute install command: fcfs.sh install 1.6.5. FastCFS softwares remove \u00b6 You can use command remove or erase to remove FastCFS softwares. Examples Remove all softwares on all nodes: fcfs.sh remove Remove fdir server on all nodes: fcfs.sh remove fdir Remove fdir server on node 10.0.1.11: fcfs.sh remove fdir 10.0.1.11 1.6.6. FastCFS config files distribute \u00b6 After install FastCFS softwares, you must execute command config to distribute config files to cluster nodes. If target config file directory does't exist on node, it will create it automatically. Exmaples Distribute all module config files to all nodes respective\uff1a fcfs.sh config Distribute fdir server config files to all fdir nodes\uff1a fcfs.sh config fdir Distribute fdir server config files to fdir node 10.0.1.11\uff1a fcfs.sh config fdir 10.0.1.11 1.6.7. Cluster manage \u00b6 Manage commands include start , stop , restart . You can operate on all modules or one module's all nodes at same time, or a single node for one module. If you want to operate on a single node, you must specify node host after module, that is to say you can't operate on all modules on a single node at same time. Start all service on all nodes: fcfs.sh start Restart fdir service on all fdir nodes: fcfs.sh restart fdir Stop fdir service on fdir node 10.0.1.11: fcfs.sh stop fdir 10.0.1.11 1.6.8. Display cluster logs \u00b6 When you want to query FastCFS services last logs, you can use command tail to display the last part of the specified module's log. Example Display the last 100 lines of fdir server log: fcfs.sh tail fdir 10.0.1.11 -n 100 or: fcfs.sh tail fdir 10.0.1.11 -100 Display the last 10 lines of each fdir server log: fcfs.sh tail fdir 1.6.9. Display cluster service status \u00b6 When you want to query FastCFS services process status, you can use command status to display the status of the specified module's service process. Example Display the status of fdir service process: fcfs.sh status fdir 10.0.1.11 Display the status of each fdir service process: fcfs.sh status fdir Display the status of all service processes: fcfs.sh status 2. fcfs_conf.sh introduction \u00b6 fcfs_conf.sh is a ops tool for quickly generate FastCFS cluster config files.It only relying on bash shell access to the local fcfs_conf.settings file. It runs fully on your workstation, requiring no servers, databases, or anything like that. If you want to generate cluster config files with specify server ips quickly, this is for you. 2.1. Fetch fcfs_conf.sh \u00b6 Get it from http://fastcfs.net/fastcfs/ops/fcfs_conf.sh and put it in workstation's bin path. sudo curl -o /usr/bin/fcfs_conf.sh http://fastcfs.net/fastcfs/ops/fcfs_conf.sh && sudo chmod +x /usr/bin/fcfs_conf.sh 2.2. Use preconditions of fcfs_conf.sh \u00b6 fcfs_conf.settings -- cluster ops settings for create config files, in current working directory You must create a independent working directory(exp: fastcfs-ops ) for a cluster, put \"fcfs_conf.settings\" into it. And then, subsequent commands for fcfs_conf.sh must be execute at the same working directory. 2.2.1. fcfs_conf.settings \u00b6 fcfs.settings include six fields: fastcfs_version and fuseclient_ips , fastcfs_version specify FastCFS main version number, fuseclient_ips specify host to deploy fuse client. When upgrade or downgrade FastCFS, you need change fastcfs_version to version you expect. fastcfs_version -- The FastCFS version you expect to create config files for. auth_ips -- FastCFS auth server IP list, multiple hosts separated by comma fdir_ips -- fastDIR server IP list, multiple hosts separated by comma fstore_group_count -- faststore server group count fstore_group_[N] -- faststore server group IP list, multiple hosts separated by comma data_group_count - faststore data group count(multiples of 64 are recommended) Parameter fstore_group_count's value must match fstore_group_[N], and N increases from 1\u3002 fcfs_conf.settings content Example: # Version of FastCFS cluster\uff08exp\uff1a2.3.0\uff09 fastcfs_version=2.3.0 # Cluster hosts list and group count auth_ips=10.0.1.11,10.0.1.12,10.0.1.13 fdir_ips=10.0.1.11,10.0.1.12,10.0.1.13 fstore_group_count=2 fstore_group_1=10.0.1.11,10.0.1.12,10.0.1.13 fstore_group_2=10.0.2.11,10.0.2.12,10.0.2.13 data_group_count=128 Tip\uff1aUse version 2.3.0 and later for crearte config files. 3. conf_tpl_tar.sh introduction \u00b6 A simple cluster config file templates pack tool for developer of FastCFS. It will pack FastCFS cluster config file templates to a tar file from source code repository FastCFS, fastDIR, faststore. Three repository FastCFS, fastDIR, faststore must at same path, and execute conf_tpl_tar.sh in FastCFS/shell/ Command: conf_tpl_tar.sh <version> [update] version -- Cluster version number to create template tar file. update -- Pull the last source codes before create tar file. Optional Exmaple: ./conf_tpl_tar.sh 2.3.0 update It will create tar file conf.2.3.0.tpl.tar.gz in current dir.","title":"FastCFS ops tools introduction"},{"location":"fcfs-ops-tool/#fastcfs-ops-tools-introduction","text":"fcfs.sh -- a ops tool for quickly manage FastCFS clusters fcfs_conf.sh -- a ops tool for quickly create FastCFS clusters config files","title":"FastCFS ops tools introduction"},{"location":"fcfs-ops-tool/#1-fcfssh-introduction","text":"fcfs.sh is a ops tool for quickly deploy and manage FastCFS clusters. It only relying on SSH access to the servers and sudo. It runs fully on your workstation, requiring no servers, databases, or anything like that. If you set up and tear down FastCFS clusters a lot, and want minimal extra repeating works, this is for you. Tip\uff1a This shell only support for Centos 7, Centos 8.","title":"1. fcfs.sh introduction"},{"location":"fcfs-ops-tool/#11-what-this-tool-can-do","text":"It can quickly setup FastCFS cluster, include install softwares, distribute config files, manage cluster services and query cluster logs. It can also upgrade or downgrade FastCFS softwares on single node or full cluster. It can reinstall software or redistribute config files.","title":"1.1. What this tool can do?"},{"location":"fcfs-ops-tool/#12-what-this-tool-cannot-do","text":"It is not a generic deployment tool, it is only for FastCFS. It does not handle cluster configuration beyond distribute config files to cluster servers. You must provide usable cluster config files for it.","title":"1.2. What this tool cannot do?"},{"location":"fcfs-ops-tool/#13-fetch-fcfssh","text":"Get it from http://fastcfs.net/fastcfs/ops/fcfs.sh and put it in workstation's bin path. sudo curl -o /usr/bin/fcfs.sh http://fastcfs.net/fastcfs/ops/fcfs.sh && sudo chmod +x /usr/bin/fcfs.sh","title":"1.3. Fetch fcfs.sh"},{"location":"fcfs-ops-tool/#14-use-preconditions","text":"fcfs.settings -- cluster ops settings, in current working directory conf -- cluster config files, in current working directory remote server SSH password-free login, see also SSH password-free login You must create a independent working directory(exp: fastcfs-ops ) for a cluster, put \"fcfs.settings\" and \"conf\" into it. And then, all subsequent commands for this cluster must be execute at the same working directory.","title":"1.4. Use preconditions"},{"location":"fcfs-ops-tool/#141-fcfssettings","text":"fcfs.settings include two fields fastcfs_version and fuseclient_ips , fastcfs_version specify FastCFS main version number, fuseclient_ips specify host to deploy fuse client. When upgrade or downgrade FastCFS, you need change fastcfs_version to version you expect. fcfs.settings content Example: # Version of FastCFS cluster\uff08exp\uff1a2.2.0\uff09 fastcfs_version=2.2.0 # Hosts which fuseclient will install\uff0cmultiple hosts separated by comma fuseclient_ips=10.0.1.14 Tip\uff1aUse version 2.2.0 and later for deploy.","title":"1.4.1. fcfs.settings"},{"location":"fcfs-ops-tool/#142-conf","text":"All config files of FastCFS cluster must be put into working directory beforehand, conf include four subdirectories\uff1a fdir -- config files for fdir server fstore -- config files for fstore server auth -- config files for fauth server fcfs -- config files for fuseclient Fetch config sample mkdir fastcfs-ops cd fastcfs-ops/ curl -o fcfs-config-sample.tar.gz http://fastcfs.net/fastcfs/ops/fcfs-config-sample.tar.gz tar -xzvf fcfs-config-sample.tar.gz Create config files use fcfs_conf.sh You can also create FastCFS cluster config files use fcfs_conf.sh according to your own needs. see also fcfs_conf.sh","title":"1.4.2. conf"},{"location":"fcfs-ops-tool/#15-ssh-password-free-login","text":"fcfs.sh will connect to cluster hosts via SSH. It requires that the workstation machine from which the shell is being run can connect via SSH as root(or sudo user) without password into cluster nodes. To enable password-free login, you need generate rsa key pair for ssh: ssh-keygen -t rsa -C cfs -f cfs-ssh-key it will generate key files\uff1a cfs-ssh-key -- private key file cfs-ssh-key.pub -- public key file","title":"1.5. SSH password-free login"},{"location":"fcfs-ops-tool/#151-deploy-private-key","text":"Copy private key file cfs-ssh-key to workstation machine's current user directory \"~/.ssh/\" , and add the following phrase to ~/.ssh/config(for each host): Host [node ip] HostName [node host name] User [ssh user] Port 22 PubkeyAuthentication yes IdentityFile ~/.ssh/cfs-ssh-key","title":"1.5.1. Deploy private key"},{"location":"fcfs-ops-tool/#152-deploy-public-key","text":"Copy public key to file .ssh/authorized_keys in every node server's sudo user home: ssh-copy-id -i cfs-ssh-key.pub [user name]@[node server ip] and ensure that the following lines are in server's sshd config: RSAAuthentication yes PubkeyAuthentication yes AuthorizedKeysFile .ssh/authorized_keys","title":"1.5.2. Deploy public key"},{"location":"fcfs-ops-tool/#16-tool-commands-introduction","text":"The tool's command include three parts: command, module and node. Command is required, module and node are optional. Usage: fcfs.sh command [module] [node] Commands : setup -- Setup FastCFS softwares, a shortcut command combines install, config, and restart install -- Install FastCFS softwares reinstall -- Reinstall FastCFS softwares remove -- Remove FastCFS softwares, same as erase erase -- Erase FastCFS softwares config -- Copy cluster config files to target host path start -- Start all or one module service in cluster restart -- Restart all or one module service in cluster stop -- Stop all or one module service in cluster tail -- Display the last part of the specified module's log status -- Display the service processes status help -- Show the detail of commands and examples Modules : fdir -- fastDIR server fstore -- faststore server fauth -- FastCFS auth server fuseclient -- FastCFS fuse client Node : You can specify a single cluster IP, or command will be executed on all nodes.","title":"1.6. Tool commands introduction"},{"location":"fcfs-ops-tool/#161-fastcfs-setup","text":"You can use command setup to quickly setup FastCFS softwares on nodes, then config and start module services. Examples Setup the full FastCFS cluster: fcfs.sh setup Setup fdir server on all fdir nodes: fcfs.sh setup fdir Setup fdir server on node 10.0.1.11: fcfs.sh setup fdir 10.0.1.11 node 10.0.1.11 must belong to fdir cluster, or it will fail.","title":"1.6.1. FastCFS setup"},{"location":"fcfs-ops-tool/#162-fastcfs-softwares-install","text":"You can use command install to install softwares only. This command is part of setup. First time, you must install all softwares on all nodes(that is to say you can't specify module and node). After that, you can install a new node with module and node params. Examples Install all FastCFS softwares on all nodes: fcfs.sh install Install fdir server on all fdir nodes: fcfs.sh install fdir Install fdir server on node 10.0.1.11: fcfs.sh install fdir 10.0.1.11","title":"1.6.2. FastCFS softwares install"},{"location":"fcfs-ops-tool/#163-fastcfs-softwares-upgrade","text":"When you want to upgrade FastCFS's software, you can modify fcfs.settings, change field fastcfs_version to new version, then execute install command: fcfs.sh install","title":"1.6.3. FastCFS softwares upgrade"},{"location":"fcfs-ops-tool/#164-fastcfs-softwares-downgrade","text":"If you realy want to downgrade FastCFS softwares to an old version, you must execute command remove first: fcfs.sh remove or: fcfs.sh erase and change field fastcfs_version to old version, then execute install command: fcfs.sh install","title":"1.6.4. FastCFS softwares downgrade"},{"location":"fcfs-ops-tool/#165-fastcfs-softwares-remove","text":"You can use command remove or erase to remove FastCFS softwares. Examples Remove all softwares on all nodes: fcfs.sh remove Remove fdir server on all nodes: fcfs.sh remove fdir Remove fdir server on node 10.0.1.11: fcfs.sh remove fdir 10.0.1.11","title":"1.6.5. FastCFS softwares remove"},{"location":"fcfs-ops-tool/#166-fastcfs-config-files-distribute","text":"After install FastCFS softwares, you must execute command config to distribute config files to cluster nodes. If target config file directory does't exist on node, it will create it automatically. Exmaples Distribute all module config files to all nodes respective\uff1a fcfs.sh config Distribute fdir server config files to all fdir nodes\uff1a fcfs.sh config fdir Distribute fdir server config files to fdir node 10.0.1.11\uff1a fcfs.sh config fdir 10.0.1.11","title":"1.6.6. FastCFS config files distribute"},{"location":"fcfs-ops-tool/#167-cluster-manage","text":"Manage commands include start , stop , restart . You can operate on all modules or one module's all nodes at same time, or a single node for one module. If you want to operate on a single node, you must specify node host after module, that is to say you can't operate on all modules on a single node at same time. Start all service on all nodes: fcfs.sh start Restart fdir service on all fdir nodes: fcfs.sh restart fdir Stop fdir service on fdir node 10.0.1.11: fcfs.sh stop fdir 10.0.1.11","title":"1.6.7. Cluster manage"},{"location":"fcfs-ops-tool/#168-display-cluster-logs","text":"When you want to query FastCFS services last logs, you can use command tail to display the last part of the specified module's log. Example Display the last 100 lines of fdir server log: fcfs.sh tail fdir 10.0.1.11 -n 100 or: fcfs.sh tail fdir 10.0.1.11 -100 Display the last 10 lines of each fdir server log: fcfs.sh tail fdir","title":"1.6.8. Display cluster logs"},{"location":"fcfs-ops-tool/#169-display-cluster-service-status","text":"When you want to query FastCFS services process status, you can use command status to display the status of the specified module's service process. Example Display the status of fdir service process: fcfs.sh status fdir 10.0.1.11 Display the status of each fdir service process: fcfs.sh status fdir Display the status of all service processes: fcfs.sh status","title":"1.6.9. Display cluster service status"},{"location":"fcfs-ops-tool/#2-fcfs_confsh-introduction","text":"fcfs_conf.sh is a ops tool for quickly generate FastCFS cluster config files.It only relying on bash shell access to the local fcfs_conf.settings file. It runs fully on your workstation, requiring no servers, databases, or anything like that. If you want to generate cluster config files with specify server ips quickly, this is for you.","title":"2. fcfs_conf.sh introduction"},{"location":"fcfs-ops-tool/#21-fetch-fcfs_confsh","text":"Get it from http://fastcfs.net/fastcfs/ops/fcfs_conf.sh and put it in workstation's bin path. sudo curl -o /usr/bin/fcfs_conf.sh http://fastcfs.net/fastcfs/ops/fcfs_conf.sh && sudo chmod +x /usr/bin/fcfs_conf.sh","title":"2.1. Fetch fcfs_conf.sh"},{"location":"fcfs-ops-tool/#22-use-preconditions-of-fcfs_confsh","text":"fcfs_conf.settings -- cluster ops settings for create config files, in current working directory You must create a independent working directory(exp: fastcfs-ops ) for a cluster, put \"fcfs_conf.settings\" into it. And then, subsequent commands for fcfs_conf.sh must be execute at the same working directory.","title":"2.2. Use preconditions of fcfs_conf.sh"},{"location":"fcfs-ops-tool/#221-fcfs_confsettings","text":"fcfs.settings include six fields: fastcfs_version and fuseclient_ips , fastcfs_version specify FastCFS main version number, fuseclient_ips specify host to deploy fuse client. When upgrade or downgrade FastCFS, you need change fastcfs_version to version you expect. fastcfs_version -- The FastCFS version you expect to create config files for. auth_ips -- FastCFS auth server IP list, multiple hosts separated by comma fdir_ips -- fastDIR server IP list, multiple hosts separated by comma fstore_group_count -- faststore server group count fstore_group_[N] -- faststore server group IP list, multiple hosts separated by comma data_group_count - faststore data group count(multiples of 64 are recommended) Parameter fstore_group_count's value must match fstore_group_[N], and N increases from 1\u3002 fcfs_conf.settings content Example: # Version of FastCFS cluster\uff08exp\uff1a2.3.0\uff09 fastcfs_version=2.3.0 # Cluster hosts list and group count auth_ips=10.0.1.11,10.0.1.12,10.0.1.13 fdir_ips=10.0.1.11,10.0.1.12,10.0.1.13 fstore_group_count=2 fstore_group_1=10.0.1.11,10.0.1.12,10.0.1.13 fstore_group_2=10.0.2.11,10.0.2.12,10.0.2.13 data_group_count=128 Tip\uff1aUse version 2.3.0 and later for crearte config files.","title":"2.2.1. fcfs_conf.settings"},{"location":"fcfs-ops-tool/#3-conf_tpl_tarsh-introduction","text":"A simple cluster config file templates pack tool for developer of FastCFS. It will pack FastCFS cluster config file templates to a tar file from source code repository FastCFS, fastDIR, faststore. Three repository FastCFS, fastDIR, faststore must at same path, and execute conf_tpl_tar.sh in FastCFS/shell/ Command: conf_tpl_tar.sh <version> [update] version -- Cluster version number to create template tar file. update -- Pull the last source codes before create tar file. Optional Exmaple: ./conf_tpl_tar.sh 2.3.0 update It will create tar file conf.2.3.0.tpl.tar.gz in current dir.","title":"3. conf_tpl_tar.sh introduction"}]}